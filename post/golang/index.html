<!DOCTYPE html>
<html lang="en" data-theme="light"><head>
    <title>golang · HZW</title>
    <meta charset="utf-8">
    
    <meta name="generator" content="Hugo 0.124.1">
    <meta property="og:title" content="golang" />
<meta property="og:description" content="a note for learning go language" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://seconsorl.github.io/post/golang/" /><meta property="og:image" content="https://seconsorl.github.io/images/profile.png" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2024-05-06T00:00:00+00:00" />
<meta property="article:modified_time" content="2024-05-06T00:00:00+00:00" /><meta property="og:site_name" content="2021.9 - 2025.6, Ningbo University, Bachelor&#39;s Degree. 
2025.9 - Now, Nanjing University of Science and Technology" />



    <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
    <meta name="description" content="HZW">
    
    
    
    <link rel="stylesheet" type="text/css" href="https://seconsorl.github.io/css/style.min.565d8c479597aa43658922d4b31e286529a7525a22c9546fa1018fc5e5ef6d86.css" integrity="sha256-Vl2MR5WXqkNliSLUsx4oZSmnUloiyVRvoQGPxeXvbYY=" crossorigin="anonymous" type="text/css">

    
    
    
    <script type="text/javascript" src="https://seconsorl.github.io/js/heyo-header.min.a3fa728a9f57833a31dfb45c48caaf1e4890c8c97f07bd7133fc2359745edb5d.js" integrity="sha256-o/pyip9Xgzox37RcSMqvHkiQyMl/B71xM/wjWXRe210=" crossorigin="anonymous"></script>

    
    
    <link rel="stylesheet" type="text/css" href="https://seconsorl.github.io/css/fonts.9398921f2d404983c2b7f9a68ddc72e3f5e58a3e38b0a8e4a70d75c12ebfb7c5.css" integrity="sha256-k5iSHy1ASYPCt/mmjdxy4/Xlij44sKjkpw11wS6/t8U=" crossorigin="anonymous">

    
    
    
    <script type="text/javascript" src="https://seconsorl.github.io/js/sidebar-toc.min.788b639e2ec681549740b90b3b865d5f9e1789e3ca9c06ccc45d65655434c954.js" integrity="sha256-eItjni7GgVSXQLkLO4ZdX54XiePKnAbMxF1lZVQ0yVQ=" crossorigin="anonymous"></script>

    
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.1.9/p5.min.js" defer></script>

        
        
        <script type="text/javascript" src="https://seconsorl.github.io/js/sketch-graph.26b92ed9317bdc6f35642d588bdf3283f40998846e01cf4bee22a126907fbf3b.js" integrity="sha256-Jrku2TF73G81ZC1Yi98yg/QJmIRuAc9L7iKhJpB/vzs=" crossorigin="anonymous" defer></script>

        
        
        <script type="text/javascript" src="https://seconsorl.github.io/js/sketch-digitalRain.af8a7b5c4428cc62d5bf49bf2698d4112c2459ee0c22c1c753ab304aef69888a.js" integrity="sha256-r4p7XEQozGLVv0m/JpjUESwkWe4MIsHHU6swSu9piIo=" crossorigin="anonymous" defer></script>

        
        
        <script type="text/javascript" src="https://seconsorl.github.io/js/sketch-circleBrushStrokes.fe8fc3ee52e1d90e9236be8c36a27711efa024beb4da304829f95dfbb61d6e84.js" integrity="sha256-/o/D7lLh2Q6SNr6MNqJ3Ee&#43;gJL602jBIKfld&#43;7YdboQ=" crossorigin="anonymous" defer></script>

        
        
        <script type="text/javascript" src="https://seconsorl.github.io/js/sketch-meta.71b5202ea881c86ac19e4b55414656a5444204a4ba08ff7368a5aa99c0a60949.js" integrity="sha256-cbUgLqiByGrBnktVQUZWpURCBKS6CP9zaKWqmcCmCUk=" crossorigin="anonymous" defer></script>

        
        
        <script type="text/javascript" src="https://seconsorl.github.io/js/sidebar-sketch.min.2e95015880993ef9abcad62d111decea22406616931bce193254bf8af2339953.js" integrity="sha256-LpUBWICZPvmrytYtER3s6iJAZhaTG84ZMlS/ivIzmVM=" crossorigin="anonymous" defer></script>
    
    
    
    <link rel="shortcut icon" href="https://seconsorl.github.io/favicons/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon" sizes="180x180" href="https://seconsorl.github.io/favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="https://seconsorl.github.io/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="https://seconsorl.github.io/favicons/favicon-16x16.png">
    <link rel="canonical" href="https://seconsorl.github.io/post/golang/">
    
    
    
    
    

    
    <meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://seconsorl.github.io/images/profile.png" /><meta name="twitter:title" content="golang"/>
<meta name="twitter:description" content="a note for learning go language"/>

</head><body>
        <div class="main">
            <div class="page-top">
    <a role="button" class="navbar-burger" data-target="navMenu" aria-label="menu" aria-expanded="false" >
        <span aria-hidden="true"></span>
        <span aria-hidden="true"></span>
        <span aria-hidden="true"></span>
      </a>
    <ul class="nav" id="navMenu">
        
        
            
            <li><a  href="/"  title="">Home</a></li>
        
            
            <li><a  href="/post/"  title="">Posts</a></li>
        
            
            <li><a  href="/about/"  title="">About</a></li>
        
        <li class="grow"></li>
        
        <li>
            <a class="theme-switch" title="Switch Theme">
                <i class="fa fa-adjust fa-fw" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>
            <div class="sidebar" id="sidebar">
    <div class="top-toc">
        <img src="https://seconsorl.github.io/images/profile.png" alt="profile picture">
        
        <a href="/">2021.9 - 2025.6, Ningbo University, Bachelor&#39;s Degree. 
2025.9 - Now, Nanjing University of Science and Technology</a>
    </div>
    
    <div class="middle-sidebar grow" id="middle-sidebar">
        
            
            
                
            

            
        
    </div>

    <div class="footer">
        <ul class="social-links">
            
            <li>
                <a href="https://linkedin.com/" target="_blank" rel="noopener noreferrer" rel="me" aria-label="Linkedin">
                    <i class="fab fa-linkedin" aria-hidden="true"></i>
                </a>
            </li>
            
            <li>
                <a href="https://github.com/SeConSorL" target="_blank" rel="noopener noreferrer" rel="me" aria-label="GitHub">
                    <i class="fab fa-github" aria-hidden="true"></i>
                </a>
            </li>
            
            <li>
                <a href="https://www.instagram.com/" target="_blank" rel="noopener noreferrer" rel="me" aria-label="instagram">
                    <i class="fab fa-instagram" aria-hidden="true"></i>
                </a>
            </li>
            
            <li>
                <a href="mailto:216002917@nbu.edu.cn" target="_blank" rel="noopener noreferrer" rel="me" aria-label="e-mail">
                    <i class="fas fa-envelope" aria-hidden="true"></i>
                </a>
            </li>
            
        </ul>

        <div class="by">by HZW <b>·</b> 2025</div>
    </div>
</div>
            <div class="content">
<div class="post">
    
    <div class="post-title">
        <h1>golang</h1>
        
            <div class="post-header">
    <div style="padding-top: 10px;">
        <i class="far fa-calendar"></i><span class="date">May 6, 2024</span>
        <i class="far fa-clock"></i><span class="reading-time">16 minutes</span>
        


    </div>
</div>
        
    </div>
    <div class="post-content">
        <h2 id="tips">TIPS</h2>
<p><a href="https://www.runoob.com/go/go-tutorial.html">菜鸟教程</a></p>
<p><a href="https://golang.google.cn/">谷歌文档</a></p>
<p><a href="https://studygolang.com/">中文网</a></p>
<p><a href="https://blog.csdn.net/m0_74824755/article/details/145835329">Golang入门教程</a></p>
<p><a href="https://www.liwenzhou.com/posts/Go/golang-menu/">他人博客</a></p>
<h2 id="简介">简介</h2>
<p>Go 是一个开源的编程语言，它的设计初衷是为了简单、高效。</p>
<p>Go是由谷歌2007年创建，由Robert Griesemer, Rob Pike, Ken Thompson主持开发，后来还加入了Ian Lance Taylor, Russ Cox等人，并最终于2009年11月开源，在2012年早些时候发布了Go 1稳定的开源版本。现在Go的开发已经是完全开放的，并且拥有一个活跃的社区。（Ken Thompson还是B、C语言发明者）</p>
<p><strong>语言特色</strong></p>
<ul>
<li>简洁、快速、安全</li>
<li>并行、有趣、开源</li>
<li>内存管理、数组安全、编译迅速</li>
</ul>
<p><strong>用途</strong></p>
<p>Go 语言被设计成一门应用于搭载 Web 服务器，存储集群或类似用途的巨型中央服务器的系统编程语言。</p>
<p>对于高性能分布式系统领域而言，Go 语言无疑比大多数其它语言有着更高的开发效率。它提供了海量并行的支持，这对于游戏服务端的开发而言是再好不过了。</p>
<h3 id="开发团队">开发团队</h3>
<p>Ken Thompson - 83年图灵奖、98年美国国家技术奖、00年去当一次飞行员</p>
<p>Rob Pike -  UTF-8发明人、天文学家、会射箭</p>
<p>Robert Griesemer - Java hot spot设计者之一、谷歌浏览器的GS引擎</p>
<h3 id="简史">简史</h3>
<p>2007年，开始设计，这是Go语言的最初原型。</p>
<p>2009年11月，Google将Go语言以开放源代码的方式向全球发布。</p>
<p>2015年8月，Go1.5版发布，本次更新中移除了最后残余的c代码。</p>
<p><strong>吉祥物</strong> - 囊地鼠gopher，由Rob Pike的妻子 Renee French绘制的</p>
<h2 id="安装">安装</h2>
<p><strong>下载地址</strong></p>
<p><a href="https://go.dev/dl/">https://go.dev/dl/</a>。</p>
<p><a href="https://golang.google.cn/dl/">https://golang.google.cn/dl/</a>。</p>
<p><strong>安装教程</strong></p>
<p><a href="https://www.runoob.com/go/go-environment.html">https://www.runoob.com/go/go-environment.html</a></p>
<p>安装完毕后，有安装目录下有多个文件</p>
<ul>
<li>api：API存放，使用手册</li>
<li>bin：Go命令，go（编译运行）、gofmt（格式化）</li>
</ul>
<p><strong>测试SDK环境搭建</strong></p>
<p>运行<code>go version</code></p>
<h2 id="goroot和gopath">GOROOT和GOPATH</h2>
<p><code>GOROOT</code>和<code>GOPATH</code>都是环境变量，其中<code>GOROOT</code>是我们安装go开发包的路径，而从Go 1.8版本开始，Go开发包在安装完成后会为<code>GOPATH</code>设置一个默认目录，并且在Go1.14及之后的版本中启用了Go Module模式之后，不一定非要将代码写到GOPATH目录下，所以也就<strong>不需要我们再自己配置GOPATH</strong>了，使用默认的即可。</p>
<p>想要查看你电脑上的<code>GOPATH</code>路径，只需要打开终端输入以下命令并回车：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>go env
</span></span></code></pre></div><p>在终端输出的内容中找到<code>GOPATH</code>对应的具体路径。</p>
<h3 id="goproxy-非常重要">GOPROXY 非常重要</h3>
<p>Go1.14版本之后，都推荐使用<code>go mod</code>模式来管理依赖环境了，也不再强制我们把代码必须写在<code>GOPATH</code>下面的src目录了，你可以在你电脑的任意位置编写go代码。</p>
<p>默认GoPROXY配置是：<code>GOPROXY=https://proxy.golang.org,direct</code>，由于国内访问不到<code>https://proxy.golang.org</code>，所以我们需要换一个PROXY，这里推荐使用<code>https://goproxy.io</code>或<code>https://goproxy.cn</code>。</p>
<p>可以执行下面的命令修改GOPROXY：</p>
<pre tabindex="0"><code>go env -w GOPROXY**=**https://goproxy.cn,direct
</code></pre><h2 id="go项目结构">Go项目结构</h2>
<p>在进行Go语言开发的时候，我们的代码总是会保存在<code>$GOPATH/src</code>目录下。在工程经过<code>go buiLd</code>、<code>go install</code>或<code>go get</code>等指令后，会将下载的第三方包源代码文件放在<code>$GOPATH/src</code>目录下，产生的二进制可执行文件放在<code>$GOPATH/bin</code>目录下，生成的中间缓存文件会被保存在<code>$GOPATH/pkg</code>下。</p>
<p>如果我们使用版本管理工具（Version Control System，VCS。常用如Git）来管理我们的项目代码时，我们只需要添加<code>$GOPATH/src</code>目录的源代码即可。<code>bin</code>和<code>pkg</code>目录的内容无需版本控制。</p>
<h4 id="个人开发者">个人开发者</h4>
<p>源代码都是存放在<code>GOPATH</code>的目录下，那我们可以按照下图来组织我们的代码。</p>
<p><img alt="image-20250711141646155" src="/./golang_img/image-20250711141646155.png"></p>
<h4 id="流行">流行</h4>
<p>Go语言中也是通过包来组织代码文件，我们可以引用别人的包也可以发布自己的包，但是为了防止不同包的项目名冲突，我们通常使用<strong>顶级域名</strong>来作为包名的前缀，这样就不担心项目名冲突的问题了。</p>
<p>因为不是每个个人开发者都拥有自己的顶级域名，所以目前流行的方式是使用个人的github用户名来区分不同的包。</p>
<blockquote>
<p>类似url路径，只是中间的<code>/</code>，通过文件夹套文件夹的形式</p>
</blockquote>
<p><img alt="image-20250711141803211" src="/./golang_img/image-20250711141803211.png"></p>
<p>例如</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#ff79c6">import</span> <span style="color:#f1fa8c">&#34;github.com/hzw/studygo&#34;</span>
</span></span></code></pre></div><p>从别人那边下载</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#ff79c6">go</span> get github.com<span style="color:#ff79c6">/</span><span style="color:#bd93f9">123</span><span style="color:#ff79c6">/</span>studygo
</span></span></code></pre></div><p>那么，这个包会下载到我们本地<code>GOPATH</code>目录下的<code>src/github.com/123/studygo</code></p>
<h4 id="企业里">企业里</h4>
<p><img alt="image-20250711142241168" src="/./golang_img/image-20250711142241168.png"></p>
<h2 id="语言结构">语言结构</h2>
<p>Go 语言的基础组成有以下几个部分：</p>
<ul>
<li>包声明</li>
<li>引入包</li>
<li>函数</li>
<li>变量</li>
<li>语句 &amp; 表达式</li>
<li>注释  （  VScode快捷键 shift+alt+A、ctrl+/  ）</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#ff79c6">package</span> main
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">import</span> <span style="color:#f1fa8c">&#34;fmt&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">func</span> <span style="color:#50fa7b">main</span>() {
</span></span><span style="display:flex;"><span>  <span style="color:#6272a4">/* 这是我的第一个简单的程序 */</span>
</span></span><span style="display:flex;"><span>  fmt.<span style="color:#50fa7b">Println</span>(<span style="color:#f1fa8c">&#34;Hello, World!&#34;</span>)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ol>
<li>第一行代码 <code>package main</code> 定义了包名。<strong>必须在源文件中非注释的第一行指明这个文件属于哪个包</strong>，如：package main。package main表示一个可独立执行的程序，每个 Go 应用程序都包含一个名为 main 的包。</li>
<li>下一行 <code>import &quot;fmt&quot;</code> 告诉 Go 编译器这个程序需要使用 <code>fmt</code> 包（的函数，或其他元素），<code>fmt</code> 包实现了格式化 IO（输入/输出）的函数。</li>
<li>下一行 <code>func main()</code> 是程序开始执行的函数。main 函数是每一个可执行程序所必须包含的，一般来说都是在<strong>启动后第一个执行</strong>的函数（如果有 <strong>init()</strong> 函数则会先执行该函数）。</li>
<li>下一行 <code>/*...*/ </code>是注释，在程序执行时将被忽略。单行注释是最常见的注释形式，你可以在任何地方使用以 <code>//</code> 开头的单行注释。多行注释也叫块注释，均已以 <code>/*</code> 开头，并以 <code>*/</code> 结尾，且不可以嵌套使用，多行注释一般用于包的文档描述或注释成块的代码片段。</li>
<li>下一行 <code>fmt.Println(...)</code> 可以将字符串输出到控制台，并在最后自动增加换行字符 <code>\n</code>。使用 <code>fmt.Print(&quot;hello, world\n&quot;) </code>可以得到相同的结果。</li>
<li>当标识符（包括常量、变量、类型、函数名、结构字段等等）以<strong>一个大写字母开头</strong>，如：Group1，那么使用这种形式的标识符的对象就可以被外部包的代码所使用（客户端程序需要先导入这个包），这被称为<strong>导出</strong>（像面向对象语言中的 <u>public</u>）；标识符如果<strong>以小写字母开头，则对包外是不可见的</strong>，但是他们在整个包的内部是可见并且可用的（像面向对象语言中的 <u>protected</u> ）。</li>
</ol>
<blockquote>
<p><strong>注意</strong>：需要注意的是 <code>{</code> 不能单独放在一行，会产生错误；因为Go编译器是一行行进行编译的，会在每行后面自动加<code>;</code>（也可以自己加）。</p>
<p>如果定义的变量或者import的包没有使用到，代码不能编译通过</p>
</blockquote>
<h3 id="标识符与关键字">标识符与关键字</h3>
<p><strong>标识符</strong></p>
<p>Go语言中标识符由字母数字和<code>_</code>(下划线）组成，并且只能以字母和<code>_</code>开头。 举几个例子：<code>abc</code>, <code>_</code>, <code>_123</code>, <code>a123</code>。</p>
<p><strong>关键字</strong></p>
<p>关键字是指编程语言中预先定义好的具有特殊含义的标识符。 关键字和保留字都不建议用作变量名。</p>
<p>Go语言中有25个关键字：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span>    <span style="color:#ff79c6">break</span>        <span style="color:#ff79c6">default</span>      <span style="color:#8be9fd;font-style:italic">func</span>         <span style="color:#8be9fd;font-style:italic">interface</span>    <span style="color:#ff79c6">select</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">case</span>         <span style="color:#ff79c6">defer</span>        <span style="color:#ff79c6">go</span>           <span style="color:#8be9fd;font-style:italic">map</span>          <span style="color:#8be9fd;font-style:italic">struct</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8be9fd;font-style:italic">chan</span>         <span style="color:#ff79c6">else</span>         <span style="color:#ff79c6">goto</span>         <span style="color:#ff79c6">package</span>      <span style="color:#ff79c6">switch</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8be9fd;font-style:italic">const</span>        <span style="color:#ff79c6">fallthrough</span>  <span style="color:#ff79c6">if</span>           <span style="color:#ff79c6">range</span>        <span style="color:#8be9fd;font-style:italic">type</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">continue</span>     <span style="color:#ff79c6">for</span>          <span style="color:#ff79c6">import</span>       <span style="color:#ff79c6">return</span>       <span style="color:#8be9fd;font-style:italic">var</span>
</span></span></code></pre></div><p>此外，Go语言中还有37个保留字。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span>    Constants:    <span style="color:#ff79c6">true</span>  <span style="color:#ff79c6">false</span>  <span style="color:#ff79c6">iota</span>  <span style="color:#ff79c6">nil</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        Types:    <span style="color:#8be9fd">int</span>  <span style="color:#8be9fd">int8</span>  <span style="color:#8be9fd">int16</span>  <span style="color:#8be9fd">int32</span>  <span style="color:#8be9fd">int64</span>  
</span></span><span style="display:flex;"><span>                  <span style="color:#8be9fd">uint</span>  <span style="color:#8be9fd">uint8</span>  <span style="color:#8be9fd">uint16</span>  <span style="color:#8be9fd">uint32</span>  <span style="color:#8be9fd">uint64</span>  <span style="color:#8be9fd">uintptr</span>
</span></span><span style="display:flex;"><span>                  <span style="color:#8be9fd">float32</span>  <span style="color:#8be9fd">float64</span>  <span style="color:#8be9fd">complex128</span>  <span style="color:#8be9fd">complex64</span>
</span></span><span style="display:flex;"><span>                  <span style="color:#8be9fd">bool</span>  <span style="color:#8be9fd">byte</span>  <span style="color:#8be9fd">rune</span>  <span style="color:#8be9fd">string</span>  <span style="color:#8be9fd">error</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    Functions:   make  len  cap  new  append  copy  close  delete
</span></span><span style="display:flex;"><span>                 complex  real  imag
</span></span><span style="display:flex;"><span>                 panic  recover
</span></span></code></pre></div><h3 id="变量">变量</h3>
<h4 id="声明">声明</h4>
<p>Go语言中的变量需要声明后才能使用，同一作用域内不支持重复声明。 并且Go语言的变量声明后必须使用。</p>
<p>Go语言的变量声明格式为：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">var</span> 变量名 变量类型
</span></span></code></pre></div><p>变量声明以关键字<code>var</code>开头，变量类型放在变量的后面，行尾无需分号。 举个例子：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">var</span> a <span style="color:#8be9fd">string</span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">var</span> b <span style="color:#8be9fd">int</span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">var</span> c <span style="color:#8be9fd">bool</span>
</span></span></code></pre></div><p><strong>批量声明</strong></p>
<p>每声明一个变量就需要写<code>var</code>关键字会比较繁琐，go语言中还支持批量变量声明：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">var</span> (
</span></span><span style="display:flex;"><span>    a <span style="color:#8be9fd">string</span>
</span></span><span style="display:flex;"><span>    b <span style="color:#8be9fd">int</span>
</span></span><span style="display:flex;"><span>    c <span style="color:#8be9fd">bool</span>
</span></span><span style="display:flex;"><span>    d <span style="color:#8be9fd">float32</span>
</span></span><span style="display:flex;"><span>)
</span></span></code></pre></div><h4 id="初始化">初始化</h4>
<p>Go语言在声明变量的时候，会自动对变量对应的内存区域进行初始化操作。每个变量会被初始化成其类型的默认值，例如： 整型和浮点型变量的默认值为 <strong>0</strong>。 字符串变量的默认值为 <strong>空字符串</strong> 。 布尔型变量默认为 <strong>false</strong>。 切片、函数、指针变量的默认为 <strong>nil</strong>。</p>
<p>当然我们也可在声明变量的时候为其指定初始值。变量初始化的标准格式如下：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">var</span> 变量名 类型 = 表达式
</span></span></code></pre></div><p>举个例子：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">var</span> name <span style="color:#8be9fd">string</span> = <span style="color:#f1fa8c">&#34;Q1mi&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">var</span> age <span style="color:#8be9fd">int</span> = <span style="color:#bd93f9">18</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4">//以下几种类型为 nil：
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span><span style="color:#8be9fd;font-style:italic">var</span> a <span style="color:#ff79c6">*</span><span style="color:#8be9fd">int</span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">var</span> a []<span style="color:#8be9fd">int</span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">var</span> a <span style="color:#8be9fd;font-style:italic">map</span>[<span style="color:#8be9fd">string</span>] <span style="color:#8be9fd">int</span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">var</span> a <span style="color:#8be9fd;font-style:italic">chan</span> <span style="color:#8be9fd">int</span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">var</span> a <span style="color:#8be9fd;font-style:italic">func</span>(<span style="color:#8be9fd">string</span>) <span style="color:#8be9fd">int</span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">var</span> a <span style="color:#8be9fd">error</span> <span style="color:#6272a4">// error 是接口
</span></span></span></code></pre></div><p>或者一次初始化多个变量</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">var</span> name, age = <span style="color:#f1fa8c">&#34;Q1mi&#34;</span>, <span style="color:#bd93f9">20</span>
</span></span></code></pre></div><h4 id="类型推导">类型推导</h4>
<p>有时候我们会将变量的类型<strong>省略</strong>，这个时候编译器会根据等号右边的值来推导变量的类型完成初始化。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">var</span> name = <span style="color:#f1fa8c">&#34;Q1mi&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">var</span> age = <span style="color:#bd93f9">18</span>
</span></span></code></pre></div><h4 id="短变量声明">短变量声明</h4>
<p>在函数内部，可以使用更简略的 <code>:=</code> 方式声明并初始化变量。</p>
<blockquote>
<p>这里需要注意 <code>=</code> 和 <code>:=</code> 的区别。<code>:=</code> 相当于新声明并初始化，一个作用域内只能声明一次，所以注意不要重复声明。<code>=</code> 就是普通的赋值。</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#ff79c6">package</span> main
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">import</span> (
</span></span><span style="display:flex;"><span>	<span style="color:#f1fa8c">&#34;fmt&#34;</span>
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span><span style="color:#6272a4">// 全局变量m
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span><span style="color:#8be9fd;font-style:italic">var</span> m = <span style="color:#bd93f9">100</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">func</span> <span style="color:#50fa7b">main</span>() {
</span></span><span style="display:flex;"><span>	n <span style="color:#ff79c6">:=</span> <span style="color:#bd93f9">10</span>
</span></span><span style="display:flex;"><span>	m <span style="color:#ff79c6">:=</span> <span style="color:#bd93f9">200</span> <span style="color:#6272a4">// 此处声明局部变量m
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>	fmt.<span style="color:#50fa7b">Println</span>(m, n)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>输出结果：</p>
<pre tabindex="0"><code>200 10
</code></pre><h4 id="匿名变量">匿名变量</h4>
<p>在使用多重赋值时，如果想要忽略某个值，可以使用<code>匿名变量（anonymous variable）</code>。 匿名变量用一个下划线<code>_</code>表示，例如：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">func</span> <span style="color:#50fa7b">foo</span>() (<span style="color:#8be9fd">int</span>, <span style="color:#8be9fd">string</span>) {
</span></span><span style="display:flex;"><span>	<span style="color:#ff79c6">return</span> <span style="color:#bd93f9">10</span>, <span style="color:#f1fa8c">&#34;Q1mi&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">func</span> <span style="color:#50fa7b">main</span>() {
</span></span><span style="display:flex;"><span>	x, _ <span style="color:#ff79c6">:=</span> <span style="color:#50fa7b">foo</span>()
</span></span><span style="display:flex;"><span>	_, y <span style="color:#ff79c6">:=</span> <span style="color:#50fa7b">foo</span>()
</span></span><span style="display:flex;"><span>	fmt.<span style="color:#50fa7b">Println</span>(<span style="color:#f1fa8c">&#34;x=&#34;</span>, x)
</span></span><span style="display:flex;"><span>	fmt.<span style="color:#50fa7b">Println</span>(<span style="color:#f1fa8c">&#34;y=&#34;</span>, y)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>匿名变量不占用命名空间，不会分配内存，所以匿名变量之间不存在重复声明。 (在<code>Lua</code>等编程语言里，匿名变量也被叫做哑元变量。)</p>
<p>注意事项：</p>
<ol>
<li>函数外的每个语句都必须以关键字开始（var、const、func等）</li>
<li><code>:=</code>不能使用在函数外。</li>
<li><code>_</code>多用于占位，表示忽略值。</li>
</ol>
<h4 id="值类型">值类型</h4>
<p>所有像 int、float、bool 和 string 这些基本类型都属于值类型，使用这些类型的变量直接指向存在内存中的值：</p>
<p><img alt="值类型" src="/./golang_img/%E5%80%BC%E7%B1%BB%E5%9E%8B.jpg"></p>
<p>当使用等号 <code>=</code> 将一个变量的值赋值给另一个变量时，如：<code>j = i</code>，实际上是在内存中将 i 的值进行了拷贝：</p>
<p><img alt="值类型声明" src="/./golang_img/%E5%80%BC%E7%B1%BB%E5%9E%8B%E5%A3%B0%E6%98%8E.jpg"></p>
<p>你可以通过 &amp;i 来获取变量 i 的内存地址，例如：0xf840000040（每次的地址都可能不一样）。</p>
<p>值类型变量通常存储在栈中，尤其是当它们是局部变量时。当值类型变量的值需要在函数作用域之外使用时，Go 会将其分配到堆内存中。</p>
<p>内存地址会根据机器的不同而有所不同，甚至相同的程序在不同的机器上执行后也会有不同的内存地址。因为每台机器可能有不同的存储器布局，并且位置分配也可能不同。</p>
<p>更复杂的数据通常会需要使用多个字，这些数据一般使用引用类型保存。</p>
<h4 id="引用类型">引用类型</h4>
<p>一个引用类型的变量 r1 存储的是 r1 的值所在的内存地址（数字），或内存地址中第一个字所在的位置。</p>
<p>这个内存地址称之为指针，这个指针实际上也被存在另外的某一个值中。</p>
<p>同一个引用类型的指针指向的多个字可以是在连续的内存地址中（内存布局是连续的），这也是计算效率最高的一种存储形式；也可以将这些字分散存放在内存中，每个字都指示了下一个字所在的内存地址。</p>
<p>当使用赋值语句 r2 = r1 时，只有引用（地址）被复制。</p>
<p>如果 r1 的值被改变了，那么这个值的所有引用都会指向被修改后的内容，在这个例子中，r2 也会受到影响。</p>
<h3 id="常量">常量</h3>
<p>相对于变量，常量是恒定不变的值，多用于定义程序运行期间不会改变的那些值。 常量的声明和变量声明非常类似，只是把<code>var</code>换成了<code>const</code>，常量在定义的时候必须赋值。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">const</span> pi = <span style="color:#bd93f9">3.1415</span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">const</span> e = <span style="color:#bd93f9">2.7182</span>
</span></span></code></pre></div><p>声明了<code>pi</code>和<code>e</code>这两个常量之后，在整个程序运行期间它们的值都不能再发生变化了。</p>
<p>多个常量也可以一起声明，const同时声明多个常量时，如果省略了值则表示和上面一行的值相同。 例如：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">const</span> (
</span></span><span style="display:flex;"><span>    n1 = <span style="color:#bd93f9">100</span>
</span></span><span style="display:flex;"><span>    n2
</span></span><span style="display:flex;"><span>    n3
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span><span style="color:#6272a4">//上面示例中，常量n1、n2、n3的值都是100。
</span></span></span></code></pre></div><h4 id="iota">iota</h4>
<p><code>iota</code>是go语言的常量计数器，只能在常量的表达式中使用。</p>
<p><code>iota</code>在const关键字出现时将被重置为==0==。<strong>const中每新增一行常量声明将使<code>iota</code>计数一次</strong>（iota可理解为const语句块中的行索引）。 使用iota能简化定义，在定义枚举时很有用。</p>
<p>举个例子：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">const</span> (
</span></span><span style="display:flex;"><span>		n1 = <span style="color:#ff79c6">iota</span> <span style="color:#6272a4">//0
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>		n2        <span style="color:#6272a4">//1
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>		n3        <span style="color:#6272a4">//2
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>		n4        <span style="color:#6272a4">//3
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>	)
</span></span></code></pre></div><p><strong>几个常见的<code>iota</code>示例:</strong></p>
<ul>
<li>使用<code>_</code>跳过某些值</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">const</span> (
</span></span><span style="display:flex;"><span>		n1 = <span style="color:#ff79c6">iota</span> <span style="color:#6272a4">//0
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>		n2        <span style="color:#6272a4">//1
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>		_
</span></span><span style="display:flex;"><span>		n4        <span style="color:#6272a4">//3
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>	)
</span></span></code></pre></div><ul>
<li><code>iota</code>声明中间插队</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">const</span> (
</span></span><span style="display:flex;"><span>		n1 = <span style="color:#ff79c6">iota</span> <span style="color:#6272a4">//0
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>		n2 = <span style="color:#bd93f9">100</span>  <span style="color:#6272a4">//100
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>		n3 = <span style="color:#ff79c6">iota</span> <span style="color:#6272a4">//2
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>		n4        <span style="color:#6272a4">//3
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>	)
</span></span><span style="display:flex;"><span>	<span style="color:#8be9fd;font-style:italic">const</span> n5 = <span style="color:#ff79c6">iota</span> <span style="color:#6272a4">//0
</span></span></span></code></pre></div><ul>
<li>
<p>定义数量级</p>
<p>（这里的<code>&lt;&lt;</code>表示左移操作，<code>1&lt;&lt;10</code>表示将1的<strong>二进制</strong>表示向左移10位，也就是由<code>1</code>变成了<code>10000000000</code>，也就是十进制的1024。同理<code>2&lt;&lt;2</code>表示将2的<strong>二进制</strong>表示向左移2位，也就是由<code>10</code>变成了<code>1000</code>，也就是十进制的8。）</p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">const</span> (
</span></span><span style="display:flex;"><span>		_  = <span style="color:#ff79c6">iota</span>
</span></span><span style="display:flex;"><span>		KB = <span style="color:#bd93f9">1</span> <span style="color:#ff79c6">&lt;&lt;</span> (<span style="color:#bd93f9">10</span> <span style="color:#ff79c6">*</span> <span style="color:#ff79c6">iota</span>)
</span></span><span style="display:flex;"><span>		MB = <span style="color:#bd93f9">1</span> <span style="color:#ff79c6">&lt;&lt;</span> (<span style="color:#bd93f9">10</span> <span style="color:#ff79c6">*</span> <span style="color:#ff79c6">iota</span>)
</span></span><span style="display:flex;"><span>	)
</span></span></code></pre></div><ul>
<li>多个<code>iota</code>定义在一行</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">const</span> (
</span></span><span style="display:flex;"><span>		a, b = <span style="color:#ff79c6">iota</span> <span style="color:#ff79c6">+</span> <span style="color:#bd93f9">1</span>, <span style="color:#ff79c6">iota</span> <span style="color:#ff79c6">+</span> <span style="color:#bd93f9">2</span> <span style="color:#6272a4">//1,2
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>		c, d                      <span style="color:#6272a4">//2,3
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>	)
</span></span></code></pre></div><h3 id="基本数据类型">基本数据类型</h3>
<p>Go语言中有丰富的数据类型，除了基本的整型、浮点型、布尔型、字符串外，还有数组、切片、结构体、函数、map、通道（channel）等。</p>
<h4 id="整型">整型</h4>
<p>整型分为以下两个大类： 按长度分为：<code>int8</code>、<code>int16</code>、<code>int32</code>、<code>int64</code> 。对应的无符号整型：<code>uint8</code>、<code>uint16</code>等。</p>
<p>其中，<code>uint8</code>就是我们熟知的<code>byte</code>型，<code>int16</code>对应C语言中的<code>short</code>型，<code>int64</code>对应C语言中的<code>long</code>型。</p>
<p><strong>特殊整型</strong></p>
<table>
<thead>
<tr>
<th style="text-align:center">类型</th>
<th style="text-align:center">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">uint</td>
<td style="text-align:center">32位操作系统上就是<code>uint32</code>，64位操作系统上就是<code>uint64</code></td>
</tr>
<tr>
<td style="text-align:center">int</td>
<td style="text-align:center">32位操作系统上就是<code>int32</code>，64位操作系统上就是<code>int64</code></td>
</tr>
<tr>
<td style="text-align:center">uintptr</td>
<td style="text-align:center">无符号整型，用于存放一个指针</td>
</tr>
</tbody>
</table>
<blockquote>
<p>在使用<code>int</code>和 <code>uint</code>类型时，不能假定它是32位或64位的整型，而是考虑<code>int</code>和<code>uint</code>可能在不同平台上的差异。</p>
</blockquote>
<blockquote>
<p>获取对象的长度的内建<code>len()</code>函数返回的长度可以根据不同平台的字节长度进行变化。实际使用中，切片或 map 的元素数量等都可以用<code>int</code>来表示。</p>
<p>在<strong>涉及到二进制传输、读写文件的结构描述</strong>时，为了保持文件的结构不会受到不同编译目标平台字节长度的影响，<strong>不要使用</strong><code>int</code>和 <code>uint</code>。</p>
</blockquote>
<h5 id="数字字面量语法number-literals-syntax">数字字面量语法（Number literals syntax）</h5>
<p>Go1.13版本之后引入了数字字面量语法，这样便于开发者以二进制、八进制或十六进制浮点数的格式定义数字，例如：</p>
<p><code>v := 0b00101101</code>， 代表二进制的 101101，相当于十进制的 45。 <code>v := 0o377</code>，代表八进制的 377，相当于十进制的 255。 <code>v := 0x1p-2</code>，代表十六进制的 1 除以 2²，也就是 0.25。</p>
<p>而且还允许我们用 <code>_</code> 来分隔数字，比如说： <code>v := 123_456</code> 表示 v 的值等于 123456。</p>
<p>我们可以借助fmt函数来将一个整数以不同进制形式展示。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#ff79c6">package</span> main
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">import</span> <span style="color:#f1fa8c">&#34;fmt&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">func</span> <span style="color:#50fa7b">main</span>(){
</span></span><span style="display:flex;"><span>	<span style="color:#6272a4">// 十进制
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>	<span style="color:#8be9fd;font-style:italic">var</span> a <span style="color:#8be9fd">int</span> = <span style="color:#bd93f9">10</span>
</span></span><span style="display:flex;"><span>	fmt.<span style="color:#50fa7b">Printf</span>(<span style="color:#f1fa8c">&#34;%d \n&#34;</span>, a)  <span style="color:#6272a4">// 10
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>	fmt.<span style="color:#50fa7b">Printf</span>(<span style="color:#f1fa8c">&#34;%b \n&#34;</span>, a)  <span style="color:#6272a4">// 1010  占位符%b表示二进制
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>	<span style="color:#6272a4">// 八进制  以0开头
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>	<span style="color:#8be9fd;font-style:italic">var</span> b <span style="color:#8be9fd">int</span> = <span style="color:#bd93f9">077</span>
</span></span><span style="display:flex;"><span>	fmt.<span style="color:#50fa7b">Printf</span>(<span style="color:#f1fa8c">&#34;%o \n&#34;</span>, b)  <span style="color:#6272a4">// 77
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>	<span style="color:#6272a4">// 十六进制  以0x开头
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>	<span style="color:#8be9fd;font-style:italic">var</span> c <span style="color:#8be9fd">int</span> = <span style="color:#bd93f9">0xff</span>
</span></span><span style="display:flex;"><span>	fmt.<span style="color:#50fa7b">Printf</span>(<span style="color:#f1fa8c">&#34;%x \n&#34;</span>, c)  <span style="color:#6272a4">// ff
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>	fmt.<span style="color:#50fa7b">Printf</span>(<span style="color:#f1fa8c">&#34;%X \n&#34;</span>, c)  <span style="color:#6272a4">// FF
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>}
</span></span></code></pre></div><h4 id="浮点型">浮点型</h4>
<p>Go语言支持两种浮点型数：<code>float32</code>和<code>float64</code>。这两种浮点型数据格式遵循<code>IEEE 754 </code>标准：</p>
<ul>
<li><code>float32</code> 的浮点数的最大范围约为 <code>3.4e38</code>，可以使用常量定义：<code>math.MaxFloat32</code>。</li>
<li><code>float64</code> 的浮点数的最大范围约为 <code>1.8e308</code>，可以使用一个常量定义：<code>math.MaxFloat64</code>。</li>
</ul>
<p>打印浮点数时，可以使用<code>fmt</code>包配合动词<code>%f</code>，代码如下：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#ff79c6">package</span> main
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">import</span> (
</span></span><span style="display:flex;"><span>        <span style="color:#f1fa8c">&#34;fmt&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f1fa8c">&#34;math&#34;</span>
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">func</span> <span style="color:#50fa7b">main</span>() {
</span></span><span style="display:flex;"><span>        fmt.<span style="color:#50fa7b">Printf</span>(<span style="color:#f1fa8c">&#34;%f\n&#34;</span>, math.Pi)
</span></span><span style="display:flex;"><span>        fmt.<span style="color:#50fa7b">Printf</span>(<span style="color:#f1fa8c">&#34;%.2f\n&#34;</span>, math.Pi)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h4 id="复数">复数</h4>
<p><code>complex64</code> 和 <code>complex128</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">var</span> c1 <span style="color:#8be9fd">complex64</span>
</span></span><span style="display:flex;"><span>c1 = <span style="color:#bd93f9">1</span> <span style="color:#ff79c6">+</span> <span style="color:#bd93f9">2i</span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">var</span> c2 <span style="color:#8be9fd">complex128</span>
</span></span><span style="display:flex;"><span>c2 = <span style="color:#bd93f9">2</span> <span style="color:#ff79c6">+</span> <span style="color:#bd93f9">3i</span>
</span></span><span style="display:flex;"><span>fmt.<span style="color:#50fa7b">Println</span>(c1)
</span></span><span style="display:flex;"><span>fmt.<span style="color:#50fa7b">Println</span>(c2)
</span></span></code></pre></div><p>复数有实部和虚部，<code>complex64</code> 的实部和虚部为32位，<code>complex128</code> 的实部和虚部为64位。</p>
<h4 id="布尔值">布尔值</h4>
<p>Go语言中以<code>bool</code>类型进行声明布尔型数据，布尔型数据只有<code>true（真）</code>和<code>false（假）</code>两个值。</p>
<p><strong>注意：</strong></p>
<ol>
<li>布尔类型变量的默认值为<code>false</code>。</li>
<li>Go 语言中<strong>不允许</strong>将整型强制转换为布尔型.</li>
<li>布尔型无法参与数值运算，也无法与其他类型进行转换。</li>
</ol>
<h4 id="字符串">字符串</h4>
<p>Go语言中的字符串以原生数据类型出现，使用字符串就像使用其他原生数据类型（int、bool、float32、float64 等）一样。 Go 语言里的字符串的内部实现使用<code>UTF-8</code>编码。 字符串的值为<code>双引号(&quot;)</code>中的内容，可以在Go语言的源码中直接添加非ASCII码字符，例如：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span>s1 <span style="color:#ff79c6">:=</span> <span style="color:#f1fa8c">&#34;hello&#34;</span>
</span></span><span style="display:flex;"><span>s2 <span style="color:#ff79c6">:=</span> <span style="color:#f1fa8c">&#34;你好&#34;</span>
</span></span></code></pre></div><h5 id="转义字符">转义字符</h5>
<p>Go 语言的字符串常见转义符包含回车、换行、单双引号、制表符等，如下表所示。</p>
<table>
<thead>
<tr>
<th style="text-align:center">转义符</th>
<th style="text-align:center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><code>\r</code></td>
<td style="text-align:center">回车符（返回行首）</td>
</tr>
<tr>
<td style="text-align:center"><code>\n</code></td>
<td style="text-align:center">换行符（直接跳到下一行的同列位置）</td>
</tr>
<tr>
<td style="text-align:center"><code>\t</code></td>
<td style="text-align:center">制表符</td>
</tr>
<tr>
<td style="text-align:center"><code>\'</code></td>
<td style="text-align:center">单引号</td>
</tr>
<tr>
<td style="text-align:center"><code>\&quot;</code></td>
<td style="text-align:center">双引号</td>
</tr>
<tr>
<td style="text-align:center"><code>\\</code></td>
<td style="text-align:center">反斜杠</td>
</tr>
</tbody>
</table>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#ff79c6">package</span> main
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">import</span> (
</span></span><span style="display:flex;"><span>    <span style="color:#f1fa8c">&#34;fmt&#34;</span>
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">func</span> <span style="color:#50fa7b">main</span>() {
</span></span><span style="display:flex;"><span>    fmt.<span style="color:#50fa7b">Println</span>(<span style="color:#f1fa8c">&#34;str := \&#34;c:\\Code\\lesson1\\go.exe\&#34;&#34;</span>)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h5 id="多行字符串">多行字符串</h5>
<p>Go语言中要定义一个多行字符串时，就必须使用 反引号 <strong>`</strong> 字符：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span>s1 <span style="color:#ff79c6">:=</span> <span style="color:#f1fa8c">`第一行
</span></span></span><span style="display:flex;"><span><span style="color:#f1fa8c">第二行
</span></span></span><span style="display:flex;"><span><span style="color:#f1fa8c">第三行
</span></span></span><span style="display:flex;"><span><span style="color:#f1fa8c">`</span>
</span></span><span style="display:flex;"><span>fmt.<span style="color:#50fa7b">Println</span>(s1)
</span></span></code></pre></div><p>反引号间换行将被作为字符串中的换行，但是<strong>所有的转义字符均无效</strong>，文本将会原样输出。</p>
<h5 id="字符串的常用操作">字符串的常用操作</h5>
<table>
<thead>
<tr>
<th style="text-align:center">方法</th>
<th style="text-align:center">介绍</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">len(str)</td>
<td style="text-align:center">求长度</td>
</tr>
<tr>
<td style="text-align:center">+或fmt.Sprintf</td>
<td style="text-align:center">拼接字符串</td>
</tr>
<tr>
<td style="text-align:center">strings.Split</td>
<td style="text-align:center">分割</td>
</tr>
<tr>
<td style="text-align:center">strings.contains</td>
<td style="text-align:center">判断是否包含</td>
</tr>
<tr>
<td style="text-align:center">strings.HasPrefix,strings.HasSuffix</td>
<td style="text-align:center">前缀/后缀判断</td>
</tr>
<tr>
<td style="text-align:center">strings.Index(),strings.LastIndex()</td>
<td style="text-align:center">子串出现的位置</td>
</tr>
<tr>
<td style="text-align:center">strings.Join(a[]string, sep string)</td>
<td style="text-align:center">join操作</td>
</tr>
</tbody>
</table>
<h4 id="byte和rune类型">byte和rune类型</h4>
<p>组成每个字符串的元素叫做“字符”，可以通过遍历或者单个获取字符串元素获得字符。 字符用单引号（’）包裹起来，如：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">var</span> a = <span style="color:#f1fa8c">&#39;中&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">var</span> b = <span style="color:#f1fa8c">&#39;x&#39;</span>
</span></span></code></pre></div><p>Go 语言的字符有以下两种：</p>
<ol>
<li><code>uint8</code>类型，或者叫 byte 型，代表一个<code>ASCII码</code>字符。</li>
<li><code>rune</code>类型，代表一个 <code>UTF-8字符</code>。</li>
</ol>
<p>当需要处理中文、日文或者其他复合字符时，则需要用到<code>rune</code>类型。<code>rune</code>类型实际是一个<code>int32</code>。</p>
<p>Go 使用了特殊的 rune 类型来处理 Unicode，让基于 Unicode 的文本处理更为方便，也可以使用 byte 型进行默认字符串处理，性能和扩展性都有照顾。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#6272a4">// 遍历字符串
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span><span style="color:#8be9fd;font-style:italic">func</span> <span style="color:#50fa7b">traversalString</span>() {
</span></span><span style="display:flex;"><span>	s <span style="color:#ff79c6">:=</span> <span style="color:#f1fa8c">&#34;hello沙河&#34;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#ff79c6">for</span> i <span style="color:#ff79c6">:=</span> <span style="color:#bd93f9">0</span>; i &lt; <span style="color:#8be9fd;font-style:italic">len</span>(s); i<span style="color:#ff79c6">++</span> { <span style="color:#6272a4">//每个s[i]为byte
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>		fmt.<span style="color:#50fa7b">Printf</span>(<span style="color:#f1fa8c">&#34;%v(%c) &#34;</span>, s[i], s[i])
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	fmt.<span style="color:#50fa7b">Println</span>()
</span></span><span style="display:flex;"><span>	<span style="color:#ff79c6">for</span> _, r <span style="color:#ff79c6">:=</span> <span style="color:#ff79c6">range</span> s { <span style="color:#6272a4">//rune
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>		fmt.<span style="color:#50fa7b">Printf</span>(<span style="color:#f1fa8c">&#34;%v(%c) &#34;</span>, r, r)
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	fmt.<span style="color:#50fa7b">Println</span>()
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>输出：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>104<span style="color:#ff79c6">(</span>h<span style="color:#ff79c6">)</span> 101<span style="color:#ff79c6">(</span>e<span style="color:#ff79c6">)</span> 108<span style="color:#ff79c6">(</span>l<span style="color:#ff79c6">)</span> 108<span style="color:#ff79c6">(</span>l<span style="color:#ff79c6">)</span> 111<span style="color:#ff79c6">(</span>o<span style="color:#ff79c6">)</span> 230<span style="color:#ff79c6">(</span>æ<span style="color:#ff79c6">)</span> 178<span style="color:#ff79c6">(</span>²<span style="color:#ff79c6">)</span> 153<span style="color:#ff79c6">()</span> 230<span style="color:#ff79c6">(</span>æ<span style="color:#ff79c6">)</span> 178<span style="color:#ff79c6">(</span>²<span style="color:#ff79c6">)</span> 179<span style="color:#ff79c6">(</span>³<span style="color:#ff79c6">)</span> 
</span></span><span style="display:flex;"><span>104<span style="color:#ff79c6">(</span>h<span style="color:#ff79c6">)</span> 101<span style="color:#ff79c6">(</span>e<span style="color:#ff79c6">)</span> 108<span style="color:#ff79c6">(</span>l<span style="color:#ff79c6">)</span> 108<span style="color:#ff79c6">(</span>l<span style="color:#ff79c6">)</span> 111<span style="color:#ff79c6">(</span>o<span style="color:#ff79c6">)</span> 27801<span style="color:#ff79c6">(</span>沙<span style="color:#ff79c6">)</span> 27827<span style="color:#ff79c6">(</span>河<span style="color:#ff79c6">)</span> 
</span></span></code></pre></div><p>因为UTF8编码下一个中文汉字由3~4个字节组成，所以我们不能简单的按照字节去遍历一个包含中文的字符串，否则就会出现上面输出中第一行的结果。</p>
<p>字符串底层是一个byte数组，所以可以和<code>[]byte</code>类型相互转换。字符串是不能修改的 字符串是由byte字节组成，所以字符串的长度是byte字节的长度。 rune类型用来表示utf8字符，一个rune字符由一个或多个byte组成。</p>
<h5 id="修改字符串">修改字符串</h5>
<p>要修改字符串，需要先将其转换成<code>[]rune</code>或<code>[]byte</code>，完成后再转换为<code>string</code>。无论哪种转换，都会<strong>重新分配内存</strong>，并复制字节数组。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">func</span> <span style="color:#50fa7b">changeString</span>() {
</span></span><span style="display:flex;"><span>	s1 <span style="color:#ff79c6">:=</span> <span style="color:#f1fa8c">&#34;big&#34;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#6272a4">// 强制类型转换
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>	byteS1 <span style="color:#ff79c6">:=</span> []<span style="color:#8be9fd;font-style:italic">byte</span>(s1)
</span></span><span style="display:flex;"><span>	byteS1[<span style="color:#bd93f9">0</span>] = <span style="color:#f1fa8c">&#39;p&#39;</span>
</span></span><span style="display:flex;"><span>	fmt.<span style="color:#50fa7b">Println</span>(<span style="color:#8be9fd;font-style:italic">string</span>(byteS1))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	s2 <span style="color:#ff79c6">:=</span> <span style="color:#f1fa8c">&#34;白萝卜&#34;</span>
</span></span><span style="display:flex;"><span>	runeS2 <span style="color:#ff79c6">:=</span> []<span style="color:#8be9fd;font-style:italic">rune</span>(s2)
</span></span><span style="display:flex;"><span>	runeS2[<span style="color:#bd93f9">0</span>] = <span style="color:#f1fa8c">&#39;红&#39;</span>
</span></span><span style="display:flex;"><span>	fmt.<span style="color:#50fa7b">Println</span>(<span style="color:#8be9fd;font-style:italic">string</span>(runeS2))
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h4 id="类型转换">类型转换</h4>
<p>Go语言中只有强制类型转换，<strong>没有隐式类型转换</strong>。该语法只能在两个类型之间支持相互转换的时候使用。</p>
<p>强制类型转换的基本语法如下：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>T<span style="color:#ff79c6">(</span>表达式<span style="color:#ff79c6">)</span>
</span></span></code></pre></div><p>其中，T表示要转换的类型。表达式包括变量、复杂算子和函数返回值等.</p>
<p>比如计算直角三角形的斜边长时使用math包的Sqrt()函数，该函数接收的是float64类型的参数，而变量a和b都是int类型的，这个时候就需要将a和b强制类型转换为float64类型。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">func</span> <span style="color:#50fa7b">sqrtDemo</span>() {
</span></span><span style="display:flex;"><span>	<span style="color:#8be9fd;font-style:italic">var</span> a, b = <span style="color:#bd93f9">3</span>, <span style="color:#bd93f9">4</span>
</span></span><span style="display:flex;"><span>	<span style="color:#8be9fd;font-style:italic">var</span> c <span style="color:#8be9fd">int</span>
</span></span><span style="display:flex;"><span>	<span style="color:#6272a4">// math.Sqrt()接收的参数是float64类型，需要强制转换
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>	c = <span style="color:#8be9fd;font-style:italic">int</span>(math.<span style="color:#50fa7b">Sqrt</span>(<span style="color:#8be9fd;font-style:italic">float64</span>(a<span style="color:#ff79c6">*</span>a <span style="color:#ff79c6">+</span> b<span style="color:#ff79c6">*</span>b)))
</span></span><span style="display:flex;"><span>	fmt.<span style="color:#50fa7b">Println</span>(c)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="运算符">运算符</h3>
<p>Go 语言内置的运算符有：</p>
<ol>
<li>算术运算符</li>
<li>关系运算符</li>
<li>逻辑运算符</li>
<li>位运算符</li>
<li>赋值运算符</li>
</ol>
<h4 id="算术运算符">算术运算符</h4>
<table>
<thead>
<tr>
<th style="text-align:center">运算符</th>
<th style="text-align:center">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">+</td>
<td style="text-align:center">相加</td>
</tr>
<tr>
<td style="text-align:center">-</td>
<td style="text-align:center">相减</td>
</tr>
<tr>
<td style="text-align:center">*</td>
<td style="text-align:center">相乘</td>
</tr>
<tr>
<td style="text-align:center">/</td>
<td style="text-align:center">相除</td>
</tr>
<tr>
<td style="text-align:center">%</td>
<td style="text-align:center">求余</td>
</tr>
</tbody>
</table>
<p><strong>注意：</strong> <code>++</code>（自增）和<code>--</code>（自减）在Go语言中是单独的语句，并不是运算符。</p>
<h4 id="关系运算符">关系运算符</h4>
<table>
<thead>
<tr>
<th style="text-align:center">运算符</th>
<th style="text-align:center">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">==</td>
<td style="text-align:center">检查两个值是否相等，如果相等返回 True 否则返回 False。</td>
</tr>
<tr>
<td style="text-align:center">!=</td>
<td style="text-align:center">检查两个值是否不相等，如果不相等返回 True 否则返回 False。</td>
</tr>
<tr>
<td style="text-align:center">&gt;</td>
<td style="text-align:center">检查左边值是否大于右边值，如果是返回 True 否则返回 False。</td>
</tr>
<tr>
<td style="text-align:center">&gt;=</td>
<td style="text-align:center">检查左边值是否大于等于右边值，如果是返回 True 否则返回 False。</td>
</tr>
<tr>
<td style="text-align:center">&lt;</td>
<td style="text-align:center">检查左边值是否小于右边值，如果是返回 True 否则返回 False。</td>
</tr>
<tr>
<td style="text-align:center">&lt;=</td>
<td style="text-align:center">检查左边值是否小于等于右边值，如果是返回 True 否则返回 False。</td>
</tr>
</tbody>
</table>
<h4 id="逻辑运算符">逻辑运算符</h4>
<table>
<thead>
<tr>
<th style="text-align:center">运算符</th>
<th style="text-align:center">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">&amp;&amp;</td>
<td style="text-align:center">逻辑 AND 运算符。 如果两边的操作数都是 True，则为 True，否则为 False。</td>
</tr>
<tr>
<td style="text-align:center">||</td>
<td style="text-align:center">逻辑 OR 运算符。 如果两边的操作数有一个 True，则为 True，否则为 False。</td>
</tr>
<tr>
<td style="text-align:center">!</td>
<td style="text-align:center">逻辑 NOT 运算符。 如果条件为 True，则为 False，否则为 True。</td>
</tr>
</tbody>
</table>
<h4 id="位运算符">位运算符</h4>
<p>位运算符对整数在内存中的二进制位进行操作。</p>
<table>
<thead>
<tr>
<th style="text-align:center">运算符</th>
<th style="text-align:center">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">&amp;</td>
<td style="text-align:center">参与运算的两数各对应的二进位相与。 （两位均为1才为1）</td>
</tr>
<tr>
<td style="text-align:center">|</td>
<td style="text-align:center">参与运算的两数各对应的二进位相或。 （两位有一个为1就为1）</td>
</tr>
<tr>
<td style="text-align:center">^</td>
<td style="text-align:center">参与运算的两数各对应的二进位相异或，当两对应的二进位相异时，结果为1。 （两位不一样则为1）</td>
</tr>
<tr>
<td style="text-align:center">&laquo;</td>
<td style="text-align:center">左移n位就是乘以2的n次方。 “a«b&quot;是把a的各二进位全部左移b位，高位丢弃，低位补0。</td>
</tr>
<tr>
<td style="text-align:center">&raquo;</td>
<td style="text-align:center">右移n位就是除以2的n次方。 “a»b&quot;是把a的各二进位全部右移b位。</td>
</tr>
</tbody>
</table>
<h4 id="赋值运算符">赋值运算符</h4>
<table>
<thead>
<tr>
<th style="text-align:center">运算符</th>
<th style="text-align:center">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">=</td>
<td style="text-align:center">简单的赋值运算符，将一个表达式的值赋给一个左值</td>
</tr>
<tr>
<td style="text-align:center">+=</td>
<td style="text-align:center">相加后再赋值</td>
</tr>
<tr>
<td style="text-align:center">-=</td>
<td style="text-align:center">相减后再赋值</td>
</tr>
<tr>
<td style="text-align:center">*=</td>
<td style="text-align:center">相乘后再赋值</td>
</tr>
<tr>
<td style="text-align:center">/=</td>
<td style="text-align:center">相除后再赋值</td>
</tr>
<tr>
<td style="text-align:center">%=</td>
<td style="text-align:center">求余后再赋值</td>
</tr>
<tr>
<td style="text-align:center">&laquo;=</td>
<td style="text-align:center">左移后赋值</td>
</tr>
<tr>
<td style="text-align:center">&raquo;=</td>
<td style="text-align:center">右移后赋值</td>
</tr>
<tr>
<td style="text-align:center">&amp;=</td>
<td style="text-align:center">按位与后赋值</td>
</tr>
<tr>
<td style="text-align:center">|=</td>
<td style="text-align:center">按位或后赋值</td>
</tr>
<tr>
<td style="text-align:center">^=</td>
<td style="text-align:center">按位异或后赋值</td>
</tr>
</tbody>
</table>
<h3 id="流程控制">流程控制</h3>
<p>Go语言中最常用的流程控制有<code>if</code>和<code>for</code>，而<code>switch</code>和<code>goto</code>主要是为了简化代码、降低重复代码而生的结构，属于扩展类的流程控制。</p>
<h4 id="if条件判断基本写法">if条件判断基本写法</h4>
<p>Go语言中<code>if</code>条件判断的格式如下：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#ff79c6">if</span> 表达式1 {
</span></span><span style="display:flex;"><span>    分支1
</span></span><span style="display:flex;"><span>} <span style="color:#ff79c6">else</span> <span style="color:#ff79c6">if</span> 表达式2 {
</span></span><span style="display:flex;"><span>    分支2
</span></span><span style="display:flex;"><span>} <span style="color:#ff79c6">else</span>{
</span></span><span style="display:flex;"><span>    分支3
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Go语言规定与<code>if</code>匹配的左括号<code>{</code>必须与<code>if和表达式</code>放在同一行，<code>{</code>放在其他位置会触发编译错误。 同理，与<code>else</code>匹配的<code>{</code>也必须与<code>else</code>写在同一行，<code>else</code>也必须与上一个<code>if</code>或<code>else if</code>右边的大括号在同一行。</p>
<h5 id="特殊写法">特殊写法</h5>
<p>if条件判断还有一种特殊的写法，可以在 if 表达式之前添加一个执行语句，再根据变量值进行判断，举个例子：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">func</span> <span style="color:#50fa7b">ifDemo2</span>() {
</span></span><span style="display:flex;"><span>	<span style="color:#ff79c6">if</span> score <span style="color:#ff79c6">:=</span> <span style="color:#bd93f9">65</span>; score <span style="color:#ff79c6">&gt;=</span> <span style="color:#bd93f9">90</span> {
</span></span><span style="display:flex;"><span>		fmt.<span style="color:#50fa7b">Println</span>(<span style="color:#f1fa8c">&#34;A&#34;</span>)
</span></span><span style="display:flex;"><span>	} <span style="color:#ff79c6">else</span> <span style="color:#ff79c6">if</span> score &gt; <span style="color:#bd93f9">75</span> {
</span></span><span style="display:flex;"><span>		fmt.<span style="color:#50fa7b">Println</span>(<span style="color:#f1fa8c">&#34;B&#34;</span>)
</span></span><span style="display:flex;"><span>	} <span style="color:#ff79c6">else</span> {
</span></span><span style="display:flex;"><span>		fmt.<span style="color:#50fa7b">Println</span>(<span style="color:#f1fa8c">&#34;C&#34;</span>)
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><blockquote>
<p>考虑作用域</p>
</blockquote>
<h4 id="for循环结构">for(循环结构)</h4>
<p>Go 语言中的所有循环类型均可以使用<code>for</code>关键字来完成。</p>
<p>for循环的基本格式如下：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff79c6">for</span> 初始语句;条件表达式;结束语句<span style="color:#ff79c6">{</span>
</span></span><span style="display:flex;"><span>    循环体语句
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">}</span>
</span></span></code></pre></div><p>条件表达式返回<code>true</code>时循环体不停地进行循环，直到条件表达式返回<code>false</code>时自动退出循环。</p>
<p>for循环的初始语句和结束语句都可以省略，例如：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">func</span> <span style="color:#50fa7b">forDemo3</span>() {
</span></span><span style="display:flex;"><span>	i <span style="color:#ff79c6">:=</span> <span style="color:#bd93f9">0</span>
</span></span><span style="display:flex;"><span>	<span style="color:#ff79c6">for</span> i &lt; <span style="color:#bd93f9">10</span> {
</span></span><span style="display:flex;"><span>		fmt.<span style="color:#50fa7b">Println</span>(i)
</span></span><span style="display:flex;"><span>		i<span style="color:#ff79c6">++</span>
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h5 id="无限循环">无限循环</h5>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#ff79c6">for</span> {
</span></span><span style="display:flex;"><span>    循环体语句
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>for循环可以通过<code>break</code>、<code>goto</code>、<code>return</code>、<code>panic</code>语句强制退出循环。</p>
<h4 id="for-range键值循环">for range(键值循环)</h4>
<p>Go语言中可以使用<code>for range</code>遍历数组、切片、字符串、map 及通道（channel）。 通过<code>for range</code>遍历的返回值有以下规律：</p>
<ol>
<li>数组、切片、字符串返回索引和值。</li>
<li>map返回键和值。</li>
<li>通道（channel）只返回通道内的值。</li>
</ol>
<blockquote>
<p>Go1.22版本开始支持 for range 整数。</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#ff79c6">for</span> i <span style="color:#ff79c6">:=</span> <span style="color:#ff79c6">range</span> <span style="color:#bd93f9">5</span> {  <span style="color:#6272a4">//like python
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>	fmt.<span style="color:#50fa7b">Println</span>(i)
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">for</span> <span style="color:#ff79c6">range</span> <span style="color:#bd93f9">2</span> {
</span></span><span style="display:flex;"><span>	fmt.<span style="color:#50fa7b">Println</span>(<span style="color:#f1fa8c">&#34;你好&#34;</span>)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>输出：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#bd93f9">0</span>
</span></span><span style="display:flex;"><span><span style="color:#bd93f9">1</span>
</span></span><span style="display:flex;"><span><span style="color:#bd93f9">2</span>
</span></span><span style="display:flex;"><span><span style="color:#bd93f9">3</span>
</span></span><span style="display:flex;"><span><span style="color:#bd93f9">4</span>
</span></span><span style="display:flex;"><span>你好
</span></span><span style="display:flex;"><span>你好
</span></span></code></pre></div><h4 id="switch-case">switch case</h4>
<p>使用<code>switch</code>语句可方便地对大量的值进行条件判断。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">func</span> <span style="color:#50fa7b">switchDemo1</span>() {
</span></span><span style="display:flex;"><span>	finger <span style="color:#ff79c6">:=</span> <span style="color:#bd93f9">3</span>
</span></span><span style="display:flex;"><span>	<span style="color:#ff79c6">switch</span> finger {
</span></span><span style="display:flex;"><span>	<span style="color:#ff79c6">case</span> <span style="color:#bd93f9">1</span>:
</span></span><span style="display:flex;"><span>		fmt.<span style="color:#50fa7b">Println</span>(<span style="color:#f1fa8c">&#34;大拇指&#34;</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#ff79c6">case</span> <span style="color:#bd93f9">2</span>:
</span></span><span style="display:flex;"><span>		fmt.<span style="color:#50fa7b">Println</span>(<span style="color:#f1fa8c">&#34;食指&#34;</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#ff79c6">case</span> <span style="color:#bd93f9">3</span>:
</span></span><span style="display:flex;"><span>		fmt.<span style="color:#50fa7b">Println</span>(<span style="color:#f1fa8c">&#34;中指&#34;</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#ff79c6">case</span> <span style="color:#bd93f9">4</span>:
</span></span><span style="display:flex;"><span>		fmt.<span style="color:#50fa7b">Println</span>(<span style="color:#f1fa8c">&#34;无名指&#34;</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#ff79c6">case</span> <span style="color:#bd93f9">5</span>:
</span></span><span style="display:flex;"><span>		fmt.<span style="color:#50fa7b">Println</span>(<span style="color:#f1fa8c">&#34;小拇指&#34;</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#ff79c6">default</span>:
</span></span><span style="display:flex;"><span>		fmt.<span style="color:#50fa7b">Println</span>(<span style="color:#f1fa8c">&#34;无效的输入！&#34;</span>)
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Go语言规定每个<code>switch</code>只能有一个<code>default</code>分支。</p>
<p>一个分支可以有多个值，多个case值中间使用英文逗号分隔。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">func</span> <span style="color:#50fa7b">testSwitch3</span>() {
</span></span><span style="display:flex;"><span>	<span style="color:#ff79c6">switch</span> n <span style="color:#ff79c6">:=</span> <span style="color:#bd93f9">7</span>; n {
</span></span><span style="display:flex;"><span>	<span style="color:#ff79c6">case</span> <span style="color:#bd93f9">1</span>, <span style="color:#bd93f9">3</span>, <span style="color:#bd93f9">5</span>, <span style="color:#bd93f9">7</span>, <span style="color:#bd93f9">9</span>:
</span></span><span style="display:flex;"><span>		fmt.<span style="color:#50fa7b">Println</span>(<span style="color:#f1fa8c">&#34;奇数&#34;</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#ff79c6">case</span> <span style="color:#bd93f9">2</span>, <span style="color:#bd93f9">4</span>, <span style="color:#bd93f9">6</span>, <span style="color:#bd93f9">8</span>:
</span></span><span style="display:flex;"><span>		fmt.<span style="color:#50fa7b">Println</span>(<span style="color:#f1fa8c">&#34;偶数&#34;</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#ff79c6">default</span>:
</span></span><span style="display:flex;"><span>		fmt.<span style="color:#50fa7b">Println</span>(n)
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>分支还可以使用表达式</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">func</span> <span style="color:#50fa7b">switchDemo4</span>() {
</span></span><span style="display:flex;"><span>	age <span style="color:#ff79c6">:=</span> <span style="color:#bd93f9">30</span>
</span></span><span style="display:flex;"><span>	<span style="color:#ff79c6">switch</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#ff79c6">case</span> age &lt; <span style="color:#bd93f9">25</span>:
</span></span><span style="display:flex;"><span>		fmt.<span style="color:#50fa7b">Println</span>(<span style="color:#f1fa8c">&#34;好好学习吧&#34;</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#ff79c6">case</span> age &gt; <span style="color:#bd93f9">25</span> <span style="color:#ff79c6">&amp;&amp;</span> age &lt; <span style="color:#bd93f9">35</span>:
</span></span><span style="display:flex;"><span>		fmt.<span style="color:#50fa7b">Println</span>(<span style="color:#f1fa8c">&#34;好好工作吧&#34;</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#ff79c6">case</span> age &gt; <span style="color:#bd93f9">60</span>:
</span></span><span style="display:flex;"><span>		fmt.<span style="color:#50fa7b">Println</span>(<span style="color:#f1fa8c">&#34;好好享受吧&#34;</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#ff79c6">default</span>:
</span></span><span style="display:flex;"><span>		fmt.<span style="color:#50fa7b">Println</span>(<span style="color:#f1fa8c">&#34;活着真好&#34;</span>)
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p><code>fallthrough</code>语法可以执行满足条件的case的下一个case，是为了兼容C语言中的case设计的。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">func</span> <span style="color:#50fa7b">switchDemo5</span>() {
</span></span><span style="display:flex;"><span>	s <span style="color:#ff79c6">:=</span> <span style="color:#f1fa8c">&#34;a&#34;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#ff79c6">switch</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#ff79c6">case</span> s <span style="color:#ff79c6">==</span> <span style="color:#f1fa8c">&#34;a&#34;</span>:
</span></span><span style="display:flex;"><span>		fmt.<span style="color:#50fa7b">Println</span>(<span style="color:#f1fa8c">&#34;a&#34;</span>)
</span></span><span style="display:flex;"><span>		<span style="color:#ff79c6">fallthrough</span>
</span></span><span style="display:flex;"><span>	<span style="color:#ff79c6">case</span> s <span style="color:#ff79c6">==</span> <span style="color:#f1fa8c">&#34;b&#34;</span>:
</span></span><span style="display:flex;"><span>		fmt.<span style="color:#50fa7b">Println</span>(<span style="color:#f1fa8c">&#34;b&#34;</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#ff79c6">case</span> s <span style="color:#ff79c6">==</span> <span style="color:#f1fa8c">&#34;c&#34;</span>:
</span></span><span style="display:flex;"><span>		fmt.<span style="color:#50fa7b">Println</span>(<span style="color:#f1fa8c">&#34;c&#34;</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#ff79c6">default</span>:
</span></span><span style="display:flex;"><span>		fmt.<span style="color:#50fa7b">Println</span>(<span style="color:#f1fa8c">&#34;...&#34;</span>)
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>输出：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>a
</span></span><span style="display:flex;"><span>b
</span></span></code></pre></div><h4 id="goto跳转到指定标签">goto(跳转到指定标签)</h4>
<p><code>goto</code>语句通过标签进行代码间的无条件跳转。<code>goto</code>语句可以在快速跳出循环、避免重复退出上有一定的帮助。Go语言中使用<code>goto</code>语句能简化一些代码的实现过程。 例如双层嵌套的for循环要退出时：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">func</span> <span style="color:#50fa7b">gotoDemo2</span>() {
</span></span><span style="display:flex;"><span>	<span style="color:#ff79c6">for</span> i <span style="color:#ff79c6">:=</span> <span style="color:#bd93f9">0</span>; i &lt; <span style="color:#bd93f9">10</span>; i<span style="color:#ff79c6">++</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#ff79c6">for</span> j <span style="color:#ff79c6">:=</span> <span style="color:#bd93f9">0</span>; j &lt; <span style="color:#bd93f9">10</span>; j<span style="color:#ff79c6">++</span> {
</span></span><span style="display:flex;"><span>			<span style="color:#ff79c6">if</span> j <span style="color:#ff79c6">==</span> <span style="color:#bd93f9">2</span> {
</span></span><span style="display:flex;"><span>				<span style="color:#6272a4">// 设置退出标签
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>				<span style="color:#ff79c6">goto</span> breakTag
</span></span><span style="display:flex;"><span>			}
</span></span><span style="display:flex;"><span>			fmt.<span style="color:#50fa7b">Printf</span>(<span style="color:#f1fa8c">&#34;%v-%v\n&#34;</span>, i, j)
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#ff79c6">return</span>
</span></span><span style="display:flex;"><span>	<span style="color:#6272a4">// 标签
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>breakTag:
</span></span><span style="display:flex;"><span>	fmt.<span style="color:#50fa7b">Println</span>(<span style="color:#f1fa8c">&#34;结束for循环&#34;</span>)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h4 id="break跳出循环">break(跳出循环)</h4>
<p><code>break</code>语句可以结束<code>for</code>、<code>switch</code>和<code>select</code>的代码块。</p>
<p><code>break</code>语句还可以在语句后面添加标签，表示退出某个标签对应的代码块，标签要求必须定义在对应的<code>for</code>、<code>switch</code>和 <code>select</code>的代码块上。 举个例子：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">func</span> <span style="color:#50fa7b">breakDemo1</span>() {
</span></span><span style="display:flex;"><span>BREAKDEMO1:
</span></span><span style="display:flex;"><span>	<span style="color:#ff79c6">for</span> i <span style="color:#ff79c6">:=</span> <span style="color:#bd93f9">0</span>; i &lt; <span style="color:#bd93f9">10</span>; i<span style="color:#ff79c6">++</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#ff79c6">for</span> j <span style="color:#ff79c6">:=</span> <span style="color:#bd93f9">0</span>; j &lt; <span style="color:#bd93f9">10</span>; j<span style="color:#ff79c6">++</span> {
</span></span><span style="display:flex;"><span>			<span style="color:#ff79c6">if</span> j <span style="color:#ff79c6">==</span> <span style="color:#bd93f9">2</span> {
</span></span><span style="display:flex;"><span>				<span style="color:#ff79c6">break</span> BREAKDEMO1
</span></span><span style="display:flex;"><span>			}
</span></span><span style="display:flex;"><span>			fmt.<span style="color:#50fa7b">Printf</span>(<span style="color:#f1fa8c">&#34;%v-%v\n&#34;</span>, i, j)
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	fmt.<span style="color:#50fa7b">Println</span>(<span style="color:#f1fa8c">&#34;...&#34;</span>)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h4 id="continue继续下次循环">continue(继续下次循环)</h4>
<p><code>continue</code>语句可以结束当前循环，开始下一次的循环迭代过程，<strong>仅限在<code>for</code>循环内使用</strong>。</p>
<p>在 <code>continue</code>语句后添加标签时，表示开始标签对应的循环。例如：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">func</span> <span style="color:#50fa7b">continueDemo</span>() {
</span></span><span style="display:flex;"><span>forloop1:
</span></span><span style="display:flex;"><span>	<span style="color:#ff79c6">for</span> i <span style="color:#ff79c6">:=</span> <span style="color:#bd93f9">0</span>; i &lt; <span style="color:#bd93f9">5</span>; i<span style="color:#ff79c6">++</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#6272a4">// forloop2:
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>		<span style="color:#ff79c6">for</span> j <span style="color:#ff79c6">:=</span> <span style="color:#bd93f9">0</span>; j &lt; <span style="color:#bd93f9">5</span>; j<span style="color:#ff79c6">++</span> {
</span></span><span style="display:flex;"><span>			<span style="color:#ff79c6">if</span> i <span style="color:#ff79c6">==</span> <span style="color:#bd93f9">2</span> <span style="color:#ff79c6">&amp;&amp;</span> j <span style="color:#ff79c6">==</span> <span style="color:#bd93f9">2</span> {
</span></span><span style="display:flex;"><span>				<span style="color:#ff79c6">continue</span> forloop1
</span></span><span style="display:flex;"><span>			}
</span></span><span style="display:flex;"><span>			fmt.<span style="color:#50fa7b">Printf</span>(<span style="color:#f1fa8c">&#34;%v-%v\n&#34;</span>, i, j)
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="数组">数组</h3>
<p>数组是同一种数据类型元素的集合。 在Go语言中，数组从声明时就确定，使用时可以修改数组成员，但是数组大小不可变化。 基本语法：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#6272a4">// 定义一个长度为3元素类型为int的数组a
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span><span style="color:#8be9fd;font-style:italic">var</span> a [<span style="color:#bd93f9">3</span>]<span style="color:#8be9fd">int</span>
</span></span></code></pre></div><h4 id="定义">定义</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>var 数组变量名 <span style="color:#ff79c6">[</span>元素数量<span style="color:#ff79c6">]</span>T
</span></span></code></pre></div><p>比如：<code>var a [5]int</code>， 数组的长度必须是常量，并且长度是数组类型的一部分。一旦定义，长度不能变。 <code>[5]int</code>和<code>[10]int</code>是不同的类型。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">var</span> a [<span style="color:#bd93f9">3</span>]<span style="color:#8be9fd">int</span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">var</span> b [<span style="color:#bd93f9">4</span>]<span style="color:#8be9fd">int</span>
</span></span><span style="display:flex;"><span>a = b <span style="color:#6272a4">//不可以这样做，因为此时a和b是不同的类型
</span></span></span></code></pre></div><p>数组可以通过下标进行访问，下标是从<code>0</code>开始，最后一个元素下标是：<code>len-1</code>，访问越界（下标在合法范围之外），则触发访问越界，会panic。</p>
<h4 id="初始化-1">初始化</h4>
<p>数组的初始化也有很多方式。</p>
<h5 id="方法一">方法一</h5>
<p>初始化数组时可以使用初始化列表来设置数组元素的值。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">func</span> <span style="color:#50fa7b">main</span>() {
</span></span><span style="display:flex;"><span>	<span style="color:#8be9fd;font-style:italic">var</span> testArray [<span style="color:#bd93f9">3</span>]<span style="color:#8be9fd">int</span>                        <span style="color:#6272a4">//数组会初始化为int类型的零值 [0 0 0]
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>	<span style="color:#8be9fd;font-style:italic">var</span> numArray = [<span style="color:#bd93f9">3</span>]<span style="color:#8be9fd">int</span>{<span style="color:#bd93f9">1</span>, <span style="color:#bd93f9">2</span>}                 <span style="color:#6272a4">//使用指定的初始值完成初始化  [1 2 0]
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>	<span style="color:#8be9fd;font-style:italic">var</span> cityArray = [<span style="color:#bd93f9">3</span>]<span style="color:#8be9fd">string</span>{<span style="color:#f1fa8c">&#34;北京&#34;</span>, <span style="color:#f1fa8c">&#34;上海&#34;</span>, <span style="color:#f1fa8c">&#34;深圳&#34;</span>} <span style="color:#6272a4">//使用指定的初始值完成初始化  [北京 上海 深圳]
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>}
</span></span></code></pre></div><h5 id="方法二">方法二</h5>
<p>按照上面的方法每次都要确保提供的初始值和数组长度一致，一般情况下我们可以让编译器根据初始值的个数自行推断数组的长度，例如：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">func</span> <span style="color:#50fa7b">main</span>() {
</span></span><span style="display:flex;"><span>	<span style="color:#8be9fd;font-style:italic">var</span> testArray [<span style="color:#bd93f9">3</span>]<span style="color:#8be9fd">int</span>
</span></span><span style="display:flex;"><span>	<span style="color:#8be9fd;font-style:italic">var</span> numArray = [<span style="color:#ff79c6">...</span>]<span style="color:#8be9fd">int</span>{<span style="color:#bd93f9">1</span>, <span style="color:#bd93f9">2</span>}
</span></span><span style="display:flex;"><span>	<span style="color:#8be9fd;font-style:italic">var</span> cityArray = [<span style="color:#ff79c6">...</span>]<span style="color:#8be9fd">string</span>{<span style="color:#f1fa8c">&#34;北京&#34;</span>, <span style="color:#f1fa8c">&#34;上海&#34;</span>, <span style="color:#f1fa8c">&#34;深圳&#34;</span>}
</span></span><span style="display:flex;"><span>	fmt.<span style="color:#50fa7b">Println</span>(testArray)                          <span style="color:#6272a4">//[0 0 0]
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>	fmt.<span style="color:#50fa7b">Println</span>(numArray)                           <span style="color:#6272a4">//[1 2]
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>	fmt.<span style="color:#50fa7b">Printf</span>(<span style="color:#f1fa8c">&#34;type of numArray:%T\n&#34;</span>, numArray)   <span style="color:#6272a4">//type of numArray:[2]int
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>	fmt.<span style="color:#50fa7b">Println</span>(cityArray)                          <span style="color:#6272a4">//[北京 上海 深圳]
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>	fmt.<span style="color:#50fa7b">Printf</span>(<span style="color:#f1fa8c">&#34;type of cityArray:%T\n&#34;</span>, cityArray) <span style="color:#6272a4">//type of cityArray:[3]string
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>}
</span></span></code></pre></div><h5 id="方法三">方法三</h5>
<p>我们还可以使用指定索引值的方式来初始化数组，例如:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">func</span> <span style="color:#50fa7b">main</span>() {
</span></span><span style="display:flex;"><span>	a <span style="color:#ff79c6">:=</span> [<span style="color:#ff79c6">...</span>]<span style="color:#8be9fd">int</span>{<span style="color:#bd93f9">1</span>: <span style="color:#bd93f9">1</span>, <span style="color:#bd93f9">3</span>: <span style="color:#bd93f9">5</span>}
</span></span><span style="display:flex;"><span>	fmt.<span style="color:#50fa7b">Println</span>(a)                  <span style="color:#6272a4">// [0 1 0 5]
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>	fmt.<span style="color:#50fa7b">Printf</span>(<span style="color:#f1fa8c">&#34;type of a:%T\n&#34;</span>, a) <span style="color:#6272a4">//type of a:[4]int
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>}
</span></span></code></pre></div><h4 id="遍历">遍历</h4>
<p>遍历数组a有以下两种方法：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">func</span> <span style="color:#50fa7b">main</span>() {
</span></span><span style="display:flex;"><span>	<span style="color:#8be9fd;font-style:italic">var</span> a = [<span style="color:#ff79c6">...</span>]<span style="color:#8be9fd">string</span>{<span style="color:#f1fa8c">&#34;北京&#34;</span>, <span style="color:#f1fa8c">&#34;上海&#34;</span>, <span style="color:#f1fa8c">&#34;深圳&#34;</span>}
</span></span><span style="display:flex;"><span>	<span style="color:#6272a4">// 方法1：for循环遍历
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>	<span style="color:#ff79c6">for</span> i <span style="color:#ff79c6">:=</span> <span style="color:#bd93f9">0</span>; i &lt; <span style="color:#8be9fd;font-style:italic">len</span>(a); i<span style="color:#ff79c6">++</span> {
</span></span><span style="display:flex;"><span>		fmt.<span style="color:#50fa7b">Println</span>(a[i])
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#6272a4">// 方法2：for range遍历
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>	<span style="color:#ff79c6">for</span> index, value <span style="color:#ff79c6">:=</span> <span style="color:#ff79c6">range</span> a {
</span></span><span style="display:flex;"><span>		fmt.<span style="color:#50fa7b">Println</span>(index, value)
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h4 id="多维数组">多维数组</h4>
<p>Go语言是支持多维数组的，我们这里以二维数组为例（数组中又嵌套数组）。</p>
<h5 id="二维数组的定义">二维数组的定义</h5>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">func</span> <span style="color:#50fa7b">main</span>() {
</span></span><span style="display:flex;"><span>	a <span style="color:#ff79c6">:=</span> [<span style="color:#bd93f9">3</span>][<span style="color:#bd93f9">2</span>]<span style="color:#8be9fd">string</span>{
</span></span><span style="display:flex;"><span>		{<span style="color:#f1fa8c">&#34;北京&#34;</span>, <span style="color:#f1fa8c">&#34;上海&#34;</span>},
</span></span><span style="display:flex;"><span>		{<span style="color:#f1fa8c">&#34;广州&#34;</span>, <span style="color:#f1fa8c">&#34;深圳&#34;</span>},
</span></span><span style="display:flex;"><span>		{<span style="color:#f1fa8c">&#34;成都&#34;</span>, <span style="color:#f1fa8c">&#34;重庆&#34;</span>},
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	fmt.<span style="color:#50fa7b">Println</span>(a) <span style="color:#6272a4">//[[北京 上海] [广州 深圳] [成都 重庆]]
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>	fmt.<span style="color:#50fa7b">Println</span>(a[<span style="color:#bd93f9">2</span>][<span style="color:#bd93f9">1</span>]) <span style="color:#6272a4">//支持索引取值:重庆
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>}
</span></span></code></pre></div><h5 id="二维数组的遍历">二维数组的遍历</h5>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">func</span> <span style="color:#50fa7b">main</span>() {
</span></span><span style="display:flex;"><span>	a <span style="color:#ff79c6">:=</span> [<span style="color:#bd93f9">3</span>][<span style="color:#bd93f9">2</span>]<span style="color:#8be9fd">string</span>{
</span></span><span style="display:flex;"><span>		{<span style="color:#f1fa8c">&#34;北京&#34;</span>, <span style="color:#f1fa8c">&#34;上海&#34;</span>},
</span></span><span style="display:flex;"><span>		{<span style="color:#f1fa8c">&#34;广州&#34;</span>, <span style="color:#f1fa8c">&#34;深圳&#34;</span>},
</span></span><span style="display:flex;"><span>		{<span style="color:#f1fa8c">&#34;成都&#34;</span>, <span style="color:#f1fa8c">&#34;重庆&#34;</span>},
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#ff79c6">for</span> _, v1 <span style="color:#ff79c6">:=</span> <span style="color:#ff79c6">range</span> a {
</span></span><span style="display:flex;"><span>		<span style="color:#ff79c6">for</span> _, v2 <span style="color:#ff79c6">:=</span> <span style="color:#ff79c6">range</span> v1 {
</span></span><span style="display:flex;"><span>			fmt.<span style="color:#50fa7b">Printf</span>(<span style="color:#f1fa8c">&#34;%s\t&#34;</span>, v2)
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>		fmt.<span style="color:#50fa7b">Println</span>()
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>输出：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>北京	上海	
</span></span><span style="display:flex;"><span>广州	深圳	
</span></span><span style="display:flex;"><span>成都	重庆	
</span></span></code></pre></div><p><strong>注意：</strong> 多维数组<strong>只有第一层</strong>可以使用<code>...</code>来让编译器推导数组长度。例如：</p>
<h5 id="数组作为值类型">数组作为值类型</h5>
<p>数组是值类型，赋值和传参会复制整个数组。因此改变副本的值，不会改变本身的值。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">func</span> <span style="color:#50fa7b">modifyArray</span>(x [<span style="color:#bd93f9">3</span>]<span style="color:#8be9fd">int</span>) {
</span></span><span style="display:flex;"><span>	x[<span style="color:#bd93f9">0</span>] = <span style="color:#bd93f9">100</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">func</span> <span style="color:#50fa7b">modifyArray2</span>(x [<span style="color:#bd93f9">3</span>][<span style="color:#bd93f9">2</span>]<span style="color:#8be9fd">int</span>) {
</span></span><span style="display:flex;"><span>	x[<span style="color:#bd93f9">2</span>][<span style="color:#bd93f9">0</span>] = <span style="color:#bd93f9">100</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">func</span> <span style="color:#50fa7b">main</span>() {
</span></span><span style="display:flex;"><span>	a <span style="color:#ff79c6">:=</span> [<span style="color:#bd93f9">3</span>]<span style="color:#8be9fd">int</span>{<span style="color:#bd93f9">10</span>, <span style="color:#bd93f9">20</span>, <span style="color:#bd93f9">30</span>}
</span></span><span style="display:flex;"><span>	<span style="color:#50fa7b">modifyArray</span>(a) <span style="color:#6272a4">//在modify中修改的是a的副本x
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>	fmt.<span style="color:#50fa7b">Println</span>(a) <span style="color:#6272a4">//[10 20 30]
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>	b <span style="color:#ff79c6">:=</span> [<span style="color:#bd93f9">3</span>][<span style="color:#bd93f9">2</span>]<span style="color:#8be9fd">int</span>{
</span></span><span style="display:flex;"><span>		{<span style="color:#bd93f9">1</span>, <span style="color:#bd93f9">1</span>},
</span></span><span style="display:flex;"><span>		{<span style="color:#bd93f9">1</span>, <span style="color:#bd93f9">1</span>},
</span></span><span style="display:flex;"><span>		{<span style="color:#bd93f9">1</span>, <span style="color:#bd93f9">1</span>},
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#50fa7b">modifyArray2</span>(b) <span style="color:#6272a4">//在modify中修改的是b的副本x
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>	fmt.<span style="color:#50fa7b">Println</span>(b)  <span style="color:#6272a4">//[[1 1] [1 1] [1 1]]
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>}
</span></span></code></pre></div><p><strong>注意：</strong></p>
<ol>
<li>数组支持 “==&quot;、”!=&quot; 操作符，因为内存总是被初始化过的。</li>
<li><code>[n]*T</code>表示指针数组，<code>*[n]T</code>表示数组指针 。</li>
</ol>
<h3 id="切片slice">切片（slice）</h3>
<h4 id="定义-1">定义</h4>
<p>声明切片类型的基本语法如下：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">var</span> name []T
</span></span></code></pre></div><p>其中，</p>
<ul>
<li>name:表示变量名</li>
<li>T:表示切片中的元素类型</li>
</ul>
<p>举个例子：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">func</span> <span style="color:#50fa7b">main</span>() {
</span></span><span style="display:flex;"><span>	<span style="color:#6272a4">// 声明切片类型
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>	<span style="color:#8be9fd;font-style:italic">var</span> a []<span style="color:#8be9fd">string</span>              <span style="color:#6272a4">//声明一个字符串切片
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>	<span style="color:#8be9fd;font-style:italic">var</span> b = []<span style="color:#8be9fd">int</span>{}             <span style="color:#6272a4">//声明一个整型切片并初始化
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>	<span style="color:#8be9fd;font-style:italic">var</span> c = []<span style="color:#8be9fd">bool</span>{<span style="color:#ff79c6">false</span>, <span style="color:#ff79c6">true</span>} <span style="color:#6272a4">//声明一个布尔切片并初始化
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>	<span style="color:#8be9fd;font-style:italic">var</span> d = []<span style="color:#8be9fd">bool</span>{<span style="color:#ff79c6">false</span>, <span style="color:#ff79c6">true</span>} <span style="color:#6272a4">//声明一个布尔切片并初始化
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>	fmt.<span style="color:#50fa7b">Println</span>(a)              <span style="color:#6272a4">//[]
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>	fmt.<span style="color:#50fa7b">Println</span>(b)              <span style="color:#6272a4">//[]
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>	fmt.<span style="color:#50fa7b">Println</span>(c)              <span style="color:#6272a4">//[false true]
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>	fmt.<span style="color:#50fa7b">Println</span>(a <span style="color:#ff79c6">==</span> <span style="color:#ff79c6">nil</span>)       <span style="color:#6272a4">//true
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>	fmt.<span style="color:#50fa7b">Println</span>(b <span style="color:#ff79c6">==</span> <span style="color:#ff79c6">nil</span>)       <span style="color:#6272a4">//false
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>	fmt.<span style="color:#50fa7b">Println</span>(c <span style="color:#ff79c6">==</span> <span style="color:#ff79c6">nil</span>)       <span style="color:#6272a4">//false
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>	<span style="color:#6272a4">// fmt.Println(c == d)   //切片是引用类型，不支持直接比较，只能和nil比较
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>}
</span></span></code></pre></div><h4 id="切片的长度和容量">切片的长度和容量</h4>
<p>切片拥有自己的长度和容量，我们可以通过使用内置的<code>len()</code>函数求长度，使用内置的<code>cap()</code>函数求切片的容量。</p>
<h4 id="切片表达式">切片表达式</h4>
<p>切片表达式从字符串、数组、指向数组或切片的指针构造子字符串或切片。它有两种变体：一种指定low和high两个索引界限值的简单的形式，另一种是除了low和high索引界限值外还指定容量的完整的形式。</p>
<h5 id="简单切片表达式">简单切片表达式</h5>
<p>切片的底层就是一个数组，所以我们可以基于数组通过切片表达式得到切片。 切片表达式中的<code>low</code>和<code>high</code>表示一个索引范围（左包含，右不包含），也就是下面代码中从数组a中选出<code>1&lt;=索引值&lt;3</code>的元素组成切片s，得到的切片<code>长度=high-low</code>，容量等于得到的切片的底层数组的容量。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">func</span> <span style="color:#50fa7b">main</span>() {
</span></span><span style="display:flex;"><span>	a <span style="color:#ff79c6">:=</span> [<span style="color:#bd93f9">5</span>]<span style="color:#8be9fd">int</span>{<span style="color:#bd93f9">1</span>, <span style="color:#bd93f9">2</span>, <span style="color:#bd93f9">3</span>, <span style="color:#bd93f9">4</span>, <span style="color:#bd93f9">5</span>}
</span></span><span style="display:flex;"><span>	s <span style="color:#ff79c6">:=</span> a[<span style="color:#bd93f9">1</span>:<span style="color:#bd93f9">3</span>]  <span style="color:#6272a4">// s := a[low:high]
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>	fmt.<span style="color:#50fa7b">Printf</span>(<span style="color:#f1fa8c">&#34;s:%v len(s):%v cap(s):%v\n&#34;</span>, s, <span style="color:#8be9fd;font-style:italic">len</span>(s), <span style="color:#8be9fd;font-style:italic">cap</span>(s))
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>输出：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>s:<span style="color:#ff79c6">[</span><span style="color:#bd93f9">2</span> 3<span style="color:#ff79c6">]</span> len<span style="color:#ff79c6">(</span>s<span style="color:#ff79c6">)</span>:2 cap<span style="color:#ff79c6">(</span>s<span style="color:#ff79c6">)</span>:4
</span></span></code></pre></div><p>为了方便起见，可以省略切片表达式中的任何索引。省略了<code>low</code>则默认为0；省略了<code>high</code>则默认为切片操作数的长度:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span>a[<span style="color:#bd93f9">2</span>:]  <span style="color:#6272a4">// 等同于 a[2:len(a)]
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>a[:<span style="color:#bd93f9">3</span>]  <span style="color:#6272a4">// 等同于 a[0:3]
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>a[:]   <span style="color:#6272a4">// 等同于 a[0:len(a)]
</span></span></span></code></pre></div><p><strong>注意：</strong></p>
<p>对于数组或字符串，如果<code>0 &lt;= low &lt;= high &lt;= len(a)</code>，则索引合法，否则就会索引越界（out of range）。</p>
<p>对切片再执行切片表达式时（切片再切片），<code>high</code>的上限边界是切片的容量<code>cap(a)</code>，而不是长度。</p>
<p><strong>常量索引</strong>必须是非负的，并且可以用int类型的值表示；</p>
<p>对于数组或常量字符串，常量索引也必须在有效范围内。如果<code>low</code>和<code>high</code>两个指标都是常数，它们必须满足<code>low &lt;= high</code>。如果索引在运行时超出范围，就会发生运行时<code>panic</code>。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">func</span> <span style="color:#50fa7b">main</span>() {
</span></span><span style="display:flex;"><span>	a <span style="color:#ff79c6">:=</span> [<span style="color:#bd93f9">5</span>]<span style="color:#8be9fd">int</span>{<span style="color:#bd93f9">1</span>, <span style="color:#bd93f9">2</span>, <span style="color:#bd93f9">3</span>, <span style="color:#bd93f9">4</span>, <span style="color:#bd93f9">5</span>}
</span></span><span style="display:flex;"><span>	s <span style="color:#ff79c6">:=</span> a[<span style="color:#bd93f9">1</span>:<span style="color:#bd93f9">3</span>]  <span style="color:#6272a4">// s := a[low:high]
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>	fmt.<span style="color:#50fa7b">Printf</span>(<span style="color:#f1fa8c">&#34;s:%v len(s):%v cap(s):%v\n&#34;</span>, s, <span style="color:#8be9fd;font-style:italic">len</span>(s), <span style="color:#8be9fd;font-style:italic">cap</span>(s))
</span></span><span style="display:flex;"><span>	s2 <span style="color:#ff79c6">:=</span> s[<span style="color:#bd93f9">3</span>:<span style="color:#bd93f9">4</span>]  <span style="color:#6272a4">// 索引的上限是cap(s)而不是len(s)
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>	fmt.<span style="color:#50fa7b">Printf</span>(<span style="color:#f1fa8c">&#34;s2:%v len(s2):%v cap(s2):%v\n&#34;</span>, s2, <span style="color:#8be9fd;font-style:italic">len</span>(s2), <span style="color:#8be9fd;font-style:italic">cap</span>(s2))
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>输出：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>s:<span style="color:#ff79c6">[</span><span style="color:#bd93f9">2</span> 3<span style="color:#ff79c6">]</span> len<span style="color:#ff79c6">(</span>s<span style="color:#ff79c6">)</span>:2 cap<span style="color:#ff79c6">(</span>s<span style="color:#ff79c6">)</span>:4
</span></span><span style="display:flex;"><span>s2:<span style="color:#ff79c6">[</span>5<span style="color:#ff79c6">]</span> len<span style="color:#ff79c6">(</span>s2<span style="color:#ff79c6">)</span>:1 cap<span style="color:#ff79c6">(</span>s2<span style="color:#ff79c6">)</span>:1
</span></span></code></pre></div><h5 id="完整切片表达式">完整切片表达式</h5>
<p>对于数组，指向数组的指针，或切片a(<strong>注意不能是字符串</strong>)支持完整切片表达式：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span>a[low : high : max]
</span></span></code></pre></div><p>上面的代码会构造与简单切片表达式<code>a[low: high]</code>相同类型、相同长度和元素的切片。</p>
<blockquote>
<p>另外，它会将得到的结果切片的容量设置为<code>max-low</code>。</p>
</blockquote>
<p>在完整切片表达式中只有<strong>第一个索引值（low）可以省略</strong>；它默认为0。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">func</span> <span style="color:#50fa7b">main</span>() {
</span></span><span style="display:flex;"><span>	a <span style="color:#ff79c6">:=</span> [<span style="color:#bd93f9">5</span>]<span style="color:#8be9fd">int</span>{<span style="color:#bd93f9">1</span>, <span style="color:#bd93f9">2</span>, <span style="color:#bd93f9">3</span>, <span style="color:#bd93f9">4</span>, <span style="color:#bd93f9">5</span>}
</span></span><span style="display:flex;"><span>	t <span style="color:#ff79c6">:=</span> a[<span style="color:#bd93f9">1</span>:<span style="color:#bd93f9">3</span>:<span style="color:#bd93f9">4</span>]
</span></span><span style="display:flex;"><span>	fmt.<span style="color:#50fa7b">Printf</span>(<span style="color:#f1fa8c">&#34;t:%v len(t):%v cap(t):%v\n&#34;</span>, t, <span style="color:#8be9fd;font-style:italic">len</span>(t), <span style="color:#8be9fd;font-style:italic">cap</span>(t))
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>输出结果：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>t:<span style="color:#ff79c6">[</span><span style="color:#bd93f9">2</span> 3<span style="color:#ff79c6">]</span> len<span style="color:#ff79c6">(</span>t<span style="color:#ff79c6">)</span>:2 cap<span style="color:#ff79c6">(</span>t<span style="color:#ff79c6">)</span>:3
</span></span></code></pre></div><p>完整切片表达式需要满足的条件是<code>0 &lt;= low &lt;= high &lt;= max &lt;= cap(a)</code>，其他条件和简单切片表达式相同。</p>
<blockquote>
<p>可以认为是切片的新的cap的值取到原来数组的索引值为max，但不包括max</p>
</blockquote>
<h4 id="make函数构造切片">make()函数构造切片</h4>
<p>我们上面都是基于数组来创建的切片，如果需要动态的创建一个切片，我们就需要使用内置的<code>make()</code>函数，格式如下：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>make<span style="color:#ff79c6">([]</span>T, size, cap<span style="color:#ff79c6">)</span>
</span></span></code></pre></div><p>其中：</p>
<ul>
<li>T:切片的元素类型</li>
<li>size:切片中元素的数量</li>
<li>cap:切片的容量</li>
</ul>
<p>举个例子：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">func</span> <span style="color:#50fa7b">main</span>() {
</span></span><span style="display:flex;"><span>	a <span style="color:#ff79c6">:=</span> <span style="color:#8be9fd;font-style:italic">make</span>([]<span style="color:#8be9fd">int</span>, <span style="color:#bd93f9">2</span>, <span style="color:#bd93f9">10</span>)
</span></span><span style="display:flex;"><span>	fmt.<span style="color:#50fa7b">Println</span>(a)      <span style="color:#6272a4">//[0 0]
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>	fmt.<span style="color:#50fa7b">Println</span>(<span style="color:#8be9fd;font-style:italic">len</span>(a)) <span style="color:#6272a4">//2
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>	fmt.<span style="color:#50fa7b">Println</span>(<span style="color:#8be9fd;font-style:italic">cap</span>(a)) <span style="color:#6272a4">//10
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>}
</span></span></code></pre></div><p>上面代码中<code>a</code>的内部存储空间已经分配了10个，但实际上只用了2个。 容量并不会影响当前元素的个数，所以<code>len(a)</code>返回2，<code>cap(a)</code>则返回该切片的容量。</p>
<h4 id="本质">本质</h4>
<p>切片的本质就是对底层数组的封装，它包含了三个信息：底层数组的指针、切片的长度（len）和切片的容量（cap）。</p>
<blockquote>
<p>可以认为是指针</p>
</blockquote>
<p>举个例子，现在有一个数组<code>a := [8]int{0, 1, 2, 3, 4, 5, 6, 7}</code>，切片<code>s1 := a[:5]</code>，相应示意图如下。</p>
<p><img alt="切片1" src="/golang_img/%E5%88%87%E7%89%871.png"></p>
<p>切片<code>s2 := a[3:6]</code>，相应示意图如下：</p>
<p><img alt="切片2" src="/golang_img/%E5%88%87%E7%89%872.png"></p>
<h4 id="判断切片是否为空">判断切片是否为空</h4>
<p>要检查切片是否为空，请始终使用<code>len(s) == 0</code>来判断，而不应该使用<code>s == nil</code>来判断。</p>
<h4 id="切片不能直接比较">切片不能直接比较</h4>
<p>切片之间是不能比较的，我们不能使用<code>==</code>操作符来判断两个切片是否含有全部相等元素。 切片唯一合法的比较操作是和<code>nil</code>比较。 一个<code>nil</code>值的切片并没有底层数组，一个<code>nil</code>值的切片的长度和容量都是0。但是我们不能说一个长度和容量都是0的切片一定是<code>nil</code>，例如下面的示例：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">var</span> s1 []<span style="color:#8be9fd">int</span>         <span style="color:#6272a4">//len(s1)=0;cap(s1)=0;s1==nil
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>s2 <span style="color:#ff79c6">:=</span> []<span style="color:#8be9fd">int</span>{}        <span style="color:#6272a4">//len(s2)=0;cap(s2)=0;s2!=nil
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>s3 <span style="color:#ff79c6">:=</span> <span style="color:#8be9fd;font-style:italic">make</span>([]<span style="color:#8be9fd">int</span>, <span style="color:#bd93f9">0</span>) <span style="color:#6272a4">//len(s3)=0;cap(s3)=0;s3!=nil
</span></span></span></code></pre></div><p>所以要判断一个切片是否是空的，要是用<code>len(s) == 0</code>来判断，不应该使用<code>s == nil</code>来判断。</p>
<h4 id="切片的赋值拷贝">切片的赋值拷贝</h4>
<p>下面的代码中演示了拷贝前后两个变量共享底层数组，对一个切片的修改会影响另一个切片的内容，这点需要特别注意。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">func</span> <span style="color:#50fa7b">main</span>() {
</span></span><span style="display:flex;"><span>	s1 <span style="color:#ff79c6">:=</span> <span style="color:#8be9fd;font-style:italic">make</span>([]<span style="color:#8be9fd">int</span>, <span style="color:#bd93f9">3</span>) <span style="color:#6272a4">//[0 0 0]
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>	s2 <span style="color:#ff79c6">:=</span> s1             <span style="color:#6272a4">//将s1直接赋值给s2，s1和s2共用一个底层数组
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>	s2[<span style="color:#bd93f9">0</span>] = <span style="color:#bd93f9">100</span>
</span></span><span style="display:flex;"><span>	fmt.<span style="color:#50fa7b">Println</span>(s1) <span style="color:#6272a4">//[100 0 0]
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>	fmt.<span style="color:#50fa7b">Println</span>(s2) <span style="color:#6272a4">//[100 0 0]
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>}
</span></span></code></pre></div><h4 id="切片遍历">切片遍历</h4>
<p>切片的遍历方式和数组是一致的，支持索引遍历和<code>for range</code>遍历。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">func</span> <span style="color:#50fa7b">main</span>() {
</span></span><span style="display:flex;"><span>	s <span style="color:#ff79c6">:=</span> []<span style="color:#8be9fd">int</span>{<span style="color:#bd93f9">1</span>, <span style="color:#bd93f9">3</span>, <span style="color:#bd93f9">5</span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#ff79c6">for</span> i <span style="color:#ff79c6">:=</span> <span style="color:#bd93f9">0</span>; i &lt; <span style="color:#8be9fd;font-style:italic">len</span>(s); i<span style="color:#ff79c6">++</span> {
</span></span><span style="display:flex;"><span>		fmt.<span style="color:#50fa7b">Println</span>(i, s[i])
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#ff79c6">for</span> index, value <span style="color:#ff79c6">:=</span> <span style="color:#ff79c6">range</span> s {
</span></span><span style="display:flex;"><span>		fmt.<span style="color:#50fa7b">Println</span>(index, value)
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h4 id="append方法为切片添加元素">append()方法为切片添加元素</h4>
<p>Go语言的内建函数<code>append()</code>可以为切片动态添加元素。 可以一次添加一个元素，可以添加多个元素，也可以添加另一个切片中的元素（后面加…）。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">func</span> <span style="color:#50fa7b">main</span>(){
</span></span><span style="display:flex;"><span>	<span style="color:#8be9fd;font-style:italic">var</span> s []<span style="color:#8be9fd">int</span>
</span></span><span style="display:flex;"><span>	s = <span style="color:#8be9fd;font-style:italic">append</span>(s, <span style="color:#bd93f9">1</span>)        <span style="color:#6272a4">// [1]
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>	s = <span style="color:#8be9fd;font-style:italic">append</span>(s, <span style="color:#bd93f9">2</span>, <span style="color:#bd93f9">3</span>, <span style="color:#bd93f9">4</span>)  <span style="color:#6272a4">// [1 2 3 4]
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>	s2 <span style="color:#ff79c6">:=</span> []<span style="color:#8be9fd">int</span>{<span style="color:#bd93f9">5</span>, <span style="color:#bd93f9">6</span>, <span style="color:#bd93f9">7</span>}  
</span></span><span style="display:flex;"><span>	s = <span style="color:#8be9fd;font-style:italic">append</span>(s, s2<span style="color:#ff79c6">...</span>)    <span style="color:#6272a4">// [1 2 3 4 5 6 7]
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>}
</span></span></code></pre></div><p>**注意：**通过var声明的零值切片可以在<code>append()</code>函数直接使用，无需初始化。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">var</span> s []<span style="color:#8be9fd">int</span>
</span></span><span style="display:flex;"><span>s = <span style="color:#8be9fd;font-style:italic">append</span>(s, <span style="color:#bd93f9">1</span>, <span style="color:#bd93f9">2</span>, <span style="color:#bd93f9">3</span>)
</span></span></code></pre></div><p>没有必要像下面的代码一样初始化一个切片再传入<code>append()</code>函数使用，</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span>s <span style="color:#ff79c6">:=</span> []<span style="color:#8be9fd">int</span>{}  <span style="color:#6272a4">// 没有必要初始化
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>s = <span style="color:#8be9fd;font-style:italic">append</span>(s, <span style="color:#bd93f9">1</span>, <span style="color:#bd93f9">2</span>, <span style="color:#bd93f9">3</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">var</span> s = <span style="color:#8be9fd;font-style:italic">make</span>([]<span style="color:#8be9fd">int</span>)  <span style="color:#6272a4">// 没有必要初始化
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>s = <span style="color:#8be9fd;font-style:italic">append</span>(s, <span style="color:#bd93f9">1</span>, <span style="color:#bd93f9">2</span>, <span style="color:#bd93f9">3</span>)
</span></span></code></pre></div><p>每个切片会指向一个底层数组，这个数组的容量够用就添加新增元素。</p>
<p>当底层数组不能容纳新增的元素时，切片就会自动按照一定的策略进行“扩容”，此时该切片指向的底层数组就会更换。“扩容”操作往往发生在<code>append()</code>函数调用时，所以我们通常都需要用原变量接收append函数的返回值。</p>
<p>举个例子：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">func</span> <span style="color:#50fa7b">main</span>() {
</span></span><span style="display:flex;"><span>	<span style="color:#6272a4">//append()添加元素和切片扩容
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>	<span style="color:#8be9fd;font-style:italic">var</span> numSlice []<span style="color:#8be9fd">int</span>
</span></span><span style="display:flex;"><span>	<span style="color:#ff79c6">for</span> i <span style="color:#ff79c6">:=</span> <span style="color:#bd93f9">0</span>; i &lt; <span style="color:#bd93f9">10</span>; i<span style="color:#ff79c6">++</span> {
</span></span><span style="display:flex;"><span>		numSlice = <span style="color:#8be9fd;font-style:italic">append</span>(numSlice, i)
</span></span><span style="display:flex;"><span>		fmt.<span style="color:#50fa7b">Printf</span>(<span style="color:#f1fa8c">&#34;%v  len:%d  cap:%d  ptr:%p\n&#34;</span>, numSlice, <span style="color:#8be9fd;font-style:italic">len</span>(numSlice), <span style="color:#8be9fd;font-style:italic">cap</span>(numSlice), numSlice)
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>输出：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff79c6">[</span>0<span style="color:#ff79c6">]</span>  len:1  cap:1  ptr:0xc0000a8000
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">[</span><span style="color:#bd93f9">0</span> 1<span style="color:#ff79c6">]</span>  len:2  cap:2  ptr:0xc0000a8040
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">[</span><span style="color:#bd93f9">0</span> <span style="color:#bd93f9">1</span> 2<span style="color:#ff79c6">]</span>  len:3  cap:4  ptr:0xc0000b2020
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">[</span><span style="color:#bd93f9">0</span> <span style="color:#bd93f9">1</span> <span style="color:#bd93f9">2</span> 3<span style="color:#ff79c6">]</span>  len:4  cap:4  ptr:0xc0000b2020
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">[</span><span style="color:#bd93f9">0</span> <span style="color:#bd93f9">1</span> <span style="color:#bd93f9">2</span> <span style="color:#bd93f9">3</span> 4<span style="color:#ff79c6">]</span>  len:5  cap:8  ptr:0xc0000b6000
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">[</span><span style="color:#bd93f9">0</span> <span style="color:#bd93f9">1</span> <span style="color:#bd93f9">2</span> <span style="color:#bd93f9">3</span> <span style="color:#bd93f9">4</span> 5<span style="color:#ff79c6">]</span>  len:6  cap:8  ptr:0xc0000b6000
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">[</span><span style="color:#bd93f9">0</span> <span style="color:#bd93f9">1</span> <span style="color:#bd93f9">2</span> <span style="color:#bd93f9">3</span> <span style="color:#bd93f9">4</span> <span style="color:#bd93f9">5</span> 6<span style="color:#ff79c6">]</span>  len:7  cap:8  ptr:0xc0000b6000
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">[</span><span style="color:#bd93f9">0</span> <span style="color:#bd93f9">1</span> <span style="color:#bd93f9">2</span> <span style="color:#bd93f9">3</span> <span style="color:#bd93f9">4</span> <span style="color:#bd93f9">5</span> <span style="color:#bd93f9">6</span> 7<span style="color:#ff79c6">]</span>  len:8  cap:8  ptr:0xc0000b6000
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">[</span><span style="color:#bd93f9">0</span> <span style="color:#bd93f9">1</span> <span style="color:#bd93f9">2</span> <span style="color:#bd93f9">3</span> <span style="color:#bd93f9">4</span> <span style="color:#bd93f9">5</span> <span style="color:#bd93f9">6</span> <span style="color:#bd93f9">7</span> 8<span style="color:#ff79c6">]</span>  len:9  cap:16  ptr:0xc0000b8000
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">[</span><span style="color:#bd93f9">0</span> <span style="color:#bd93f9">1</span> <span style="color:#bd93f9">2</span> <span style="color:#bd93f9">3</span> <span style="color:#bd93f9">4</span> <span style="color:#bd93f9">5</span> <span style="color:#bd93f9">6</span> <span style="color:#bd93f9">7</span> <span style="color:#bd93f9">8</span> 9<span style="color:#ff79c6">]</span>  len:10  cap:16  ptr:0xc0000b8000
</span></span></code></pre></div><p>从上面的结果可以看出：</p>
<ol>
<li><code>append()</code>函数将元素追加到切片的最后并返回该切片。</li>
<li>切片numSlice的容量按照1，2，4，8，16这样的规则自动进行扩容，每次扩容后都是扩容前的2倍。</li>
</ol>
<p>append()函数还支持一次性追加多个元素。 例如：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">var</span> citySlice []<span style="color:#8be9fd">string</span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4">// 追加一个元素
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>citySlice = <span style="color:#8be9fd;font-style:italic">append</span>(citySlice, <span style="color:#f1fa8c">&#34;北京&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#6272a4">// 追加多个元素
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>citySlice = <span style="color:#8be9fd;font-style:italic">append</span>(citySlice, <span style="color:#f1fa8c">&#34;上海&#34;</span>, <span style="color:#f1fa8c">&#34;广州&#34;</span>, <span style="color:#f1fa8c">&#34;深圳&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#6272a4">// 追加切片
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>a <span style="color:#ff79c6">:=</span> []<span style="color:#8be9fd">string</span>{<span style="color:#f1fa8c">&#34;成都&#34;</span>, <span style="color:#f1fa8c">&#34;重庆&#34;</span>}
</span></span><span style="display:flex;"><span>citySlice = <span style="color:#8be9fd;font-style:italic">append</span>(citySlice, a<span style="color:#ff79c6">...</span>)
</span></span><span style="display:flex;"><span>fmt.<span style="color:#50fa7b">Println</span>(citySlice) <span style="color:#6272a4">//[北京 上海 广州 深圳 成都 重庆]
</span></span></span></code></pre></div><h4 id="切片的扩容策略">切片的扩容策略</h4>
<p>可以通过查看<code>$GOROOT/src/runtime/slice.go</code>源码，其中扩容相关代码如下：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span>newcap <span style="color:#ff79c6">:=</span> old.cap
</span></span><span style="display:flex;"><span>doublecap <span style="color:#ff79c6">:=</span> newcap <span style="color:#ff79c6">+</span> newcap
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">if</span> cap &gt; doublecap {
</span></span><span style="display:flex;"><span>	newcap = cap
</span></span><span style="display:flex;"><span>} <span style="color:#ff79c6">else</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#ff79c6">if</span> old.len &lt; <span style="color:#bd93f9">1024</span> {
</span></span><span style="display:flex;"><span>		newcap = doublecap
</span></span><span style="display:flex;"><span>	} <span style="color:#ff79c6">else</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#6272a4">// Check 0 &lt; newcap to detect overflow
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>		<span style="color:#6272a4">// and prevent an infinite loop.
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>		<span style="color:#ff79c6">for</span> <span style="color:#bd93f9">0</span> &lt; newcap <span style="color:#ff79c6">&amp;&amp;</span> newcap &lt; cap {
</span></span><span style="display:flex;"><span>			newcap <span style="color:#ff79c6">+=</span> newcap <span style="color:#ff79c6">/</span> <span style="color:#bd93f9">4</span>
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>		<span style="color:#6272a4">// Set newcap to the requested cap when
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>		<span style="color:#6272a4">// the newcap calculation overflowed.
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>		<span style="color:#ff79c6">if</span> newcap <span style="color:#ff79c6">&lt;=</span> <span style="color:#bd93f9">0</span> {
</span></span><span style="display:flex;"><span>			newcap = cap
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>从上面的代码可以看出以下内容：</p>
<ul>
<li>首先判断，如果新申请容量（cap）大于2倍的旧容量（old.cap），最终容量（newcap）就是新申请的容量（cap）。</li>
<li>否则判断，如果旧切片的长度小于1024，则最终容量(newcap)就是旧容量(old.cap)的两倍，即（newcap=doublecap），</li>
<li>否则判断，如果旧切片长度大于等于1024，则最终容量（newcap）从旧容量（old.cap）开始循环增加原来的1/4，即（newcap=old.cap,for {newcap += newcap/4}）直到最终容量（newcap）大于等于新申请的容量(cap)，即（newcap &gt;= cap）</li>
<li>如果最终容量（cap）计算值溢出，则最终容量（cap）就是新申请容量（cap）。</li>
</ul>
<p>需要注意的是，切片扩容还会根据切片中元素的类型不同而做不同的处理，比如<code>int</code>和<code>string</code>类型的处理方式就不一样。</p>
<h4 id="使用copy函数复制切片">使用copy()函数复制切片</h4>
<p>首先我们来看一个问题：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">func</span> <span style="color:#50fa7b">main</span>() {
</span></span><span style="display:flex;"><span>	a <span style="color:#ff79c6">:=</span> []<span style="color:#8be9fd">int</span>{<span style="color:#bd93f9">1</span>, <span style="color:#bd93f9">2</span>, <span style="color:#bd93f9">3</span>, <span style="color:#bd93f9">4</span>, <span style="color:#bd93f9">5</span>}
</span></span><span style="display:flex;"><span>	b <span style="color:#ff79c6">:=</span> a
</span></span><span style="display:flex;"><span>	fmt.<span style="color:#50fa7b">Println</span>(a) <span style="color:#6272a4">//[1 2 3 4 5]
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>	fmt.<span style="color:#50fa7b">Println</span>(b) <span style="color:#6272a4">//[1 2 3 4 5]
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>	b[<span style="color:#bd93f9">0</span>] = <span style="color:#bd93f9">1000</span>
</span></span><span style="display:flex;"><span>	fmt.<span style="color:#50fa7b">Println</span>(a) <span style="color:#6272a4">//[1000 2 3 4 5]
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>	fmt.<span style="color:#50fa7b">Println</span>(b) <span style="color:#6272a4">//[1000 2 3 4 5]
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>}
</span></span></code></pre></div><p>由于切片是引用类型，所以a和b其实都指向了同一块内存地址。修改b的同时a的值也会发生变化。</p>
<p>Go语言内建的<code>copy()</code>函数可以迅速地将一个切片的数据复制到另外一个切片空间中，<code>copy()</code>函数的使用格式如下：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>copy<span style="color:#ff79c6">(</span>destSlice, srcSlice <span style="color:#ff79c6">[]</span>T<span style="color:#ff79c6">)</span>
</span></span></code></pre></div><p>其中：</p>
<ul>
<li>srcSlice: 数据来源切片</li>
<li>destSlice: 目标切片</li>
</ul>
<p>举个例子：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">func</span> <span style="color:#50fa7b">main</span>() {
</span></span><span style="display:flex;"><span>	<span style="color:#6272a4">// copy()复制切片
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>	a <span style="color:#ff79c6">:=</span> []<span style="color:#8be9fd">int</span>{<span style="color:#bd93f9">1</span>, <span style="color:#bd93f9">2</span>, <span style="color:#bd93f9">3</span>, <span style="color:#bd93f9">4</span>, <span style="color:#bd93f9">5</span>}
</span></span><span style="display:flex;"><span>	c <span style="color:#ff79c6">:=</span> <span style="color:#8be9fd;font-style:italic">make</span>([]<span style="color:#8be9fd">int</span>, <span style="color:#bd93f9">5</span>, <span style="color:#bd93f9">5</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#8be9fd;font-style:italic">copy</span>(c, a)     <span style="color:#6272a4">//使用copy()函数将切片a中的元素复制到切片c
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>	fmt.<span style="color:#50fa7b">Println</span>(a) <span style="color:#6272a4">//[1 2 3 4 5]
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>	fmt.<span style="color:#50fa7b">Println</span>(c) <span style="color:#6272a4">//[1 2 3 4 5]
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>	c[<span style="color:#bd93f9">0</span>] = <span style="color:#bd93f9">1000</span>
</span></span><span style="display:flex;"><span>	fmt.<span style="color:#50fa7b">Println</span>(a) <span style="color:#6272a4">//[1 2 3 4 5]
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>	fmt.<span style="color:#50fa7b">Println</span>(c) <span style="color:#6272a4">//[1000 2 3 4 5]
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>}
</span></span></code></pre></div><h4 id="从切片中删除元素">从切片中删除元素</h4>
<p>Go语言中并没有删除切片元素的专用方法，我们可以使用切片本身的特性来删除元素。 代码如下：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">func</span> <span style="color:#50fa7b">main</span>() {
</span></span><span style="display:flex;"><span>	<span style="color:#6272a4">// 从切片中删除元素
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>	a <span style="color:#ff79c6">:=</span> []<span style="color:#8be9fd">int</span>{<span style="color:#bd93f9">30</span>, <span style="color:#bd93f9">31</span>, <span style="color:#bd93f9">32</span>, <span style="color:#bd93f9">33</span>, <span style="color:#bd93f9">34</span>, <span style="color:#bd93f9">35</span>, <span style="color:#bd93f9">36</span>, <span style="color:#bd93f9">37</span>}
</span></span><span style="display:flex;"><span>	<span style="color:#6272a4">// 要删除索引为2的元素
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>	a = <span style="color:#8be9fd;font-style:italic">append</span>(a[:<span style="color:#bd93f9">2</span>], a[<span style="color:#bd93f9">3</span>:]<span style="color:#ff79c6">...</span>)
</span></span><span style="display:flex;"><span>	fmt.<span style="color:#50fa7b">Println</span>(a) <span style="color:#6272a4">//[30 31 33 34 35 36 37]
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>}
</span></span></code></pre></div><p>总结一下就是：要从切片a中删除索引为<code>index</code>的元素，操作方法是<code>a = append(a[:index], a[index+1:]...)</code></p>
<h3 id="map">map</h3>
<p>Go语言中提供的映射关系容器为<code>map</code>，其内部使用<code>散列表（hash）</code>实现。</p>
<p>map是一种无序的基于<code>key-value</code>的数据结构，Go语言中的map是引用类型，必须初始化才能使用。</p>
<h4 id="定义-2">定义</h4>
<p>Go语言中 <code>map</code>的定义语法如下：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">map</span>[KeyType]ValueType
</span></span></code></pre></div><p>其中，</p>
<ul>
<li>KeyType:表示键的类型。</li>
<li>ValueType:表示键对应的值的类型。</li>
</ul>
<p>map类型的变量默认初始值为 <code>nil</code>，需要使用 <code>make()</code> 函数来分配内存。语法为：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">make</span>(<span style="color:#8be9fd;font-style:italic">map</span>[KeyType]ValueType, [cap])
</span></span></code></pre></div><p>其中cap表示map的容量，该参数虽然不是必须的，但是我们应该在初始化map的时候就为其指定一个合适的容量。</p>
<h4 id="基本使用">基本使用</h4>
<p>map中的数据都是成对出现的，map的基本使用示例代码如下：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">func</span> <span style="color:#50fa7b">main</span>() {
</span></span><span style="display:flex;"><span>	scoreMap <span style="color:#ff79c6">:=</span> <span style="color:#8be9fd;font-style:italic">make</span>(<span style="color:#8be9fd;font-style:italic">map</span>[<span style="color:#8be9fd">string</span>]<span style="color:#8be9fd">int</span>, <span style="color:#bd93f9">8</span>)
</span></span><span style="display:flex;"><span>	scoreMap[<span style="color:#f1fa8c">&#34;张三&#34;</span>] = <span style="color:#bd93f9">90</span>
</span></span><span style="display:flex;"><span>	scoreMap[<span style="color:#f1fa8c">&#34;小明&#34;</span>] = <span style="color:#bd93f9">100</span>
</span></span><span style="display:flex;"><span>	fmt.<span style="color:#50fa7b">Println</span>(scoreMap)
</span></span><span style="display:flex;"><span>	fmt.<span style="color:#50fa7b">Println</span>(scoreMap[<span style="color:#f1fa8c">&#34;小明&#34;</span>])
</span></span><span style="display:flex;"><span>	fmt.<span style="color:#50fa7b">Printf</span>(<span style="color:#f1fa8c">&#34;type of a:%T\n&#34;</span>, scoreMap)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>输出：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>map<span style="color:#ff79c6">[</span>小明:100 张三:90<span style="color:#ff79c6">]</span>
</span></span><span style="display:flex;"><span><span style="color:#bd93f9">100</span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">type</span> of a:map<span style="color:#ff79c6">[</span>string<span style="color:#ff79c6">]</span>int
</span></span></code></pre></div><p>map也支持在声明的时候填充元素，例如：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">func</span> <span style="color:#50fa7b">main</span>() {
</span></span><span style="display:flex;"><span>	userInfo <span style="color:#ff79c6">:=</span> <span style="color:#8be9fd;font-style:italic">map</span>[<span style="color:#8be9fd">string</span>]<span style="color:#8be9fd">string</span>{
</span></span><span style="display:flex;"><span>		<span style="color:#f1fa8c">&#34;username&#34;</span>: <span style="color:#f1fa8c">&#34;沙河小王子&#34;</span>,
</span></span><span style="display:flex;"><span>		<span style="color:#f1fa8c">&#34;password&#34;</span>: <span style="color:#f1fa8c">&#34;123456&#34;</span>,
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	fmt.<span style="color:#50fa7b">Println</span>(userInfo) <span style="color:#6272a4">//
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>}
</span></span></code></pre></div><h4 id="判断某个键是否存在">判断某个键是否存在</h4>
<p>Go语言中有个判断map中键是否存在的特殊写法，格式如下:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span>value, ok <span style="color:#ff79c6">:=</span> <span style="color:#8be9fd;font-style:italic">map</span>[key]
</span></span></code></pre></div><p>举个例子：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">func</span> <span style="color:#50fa7b">main</span>() {
</span></span><span style="display:flex;"><span>	scoreMap <span style="color:#ff79c6">:=</span> <span style="color:#8be9fd;font-style:italic">make</span>(<span style="color:#8be9fd;font-style:italic">map</span>[<span style="color:#8be9fd">string</span>]<span style="color:#8be9fd">int</span>)
</span></span><span style="display:flex;"><span>	scoreMap[<span style="color:#f1fa8c">&#34;张三&#34;</span>] = <span style="color:#bd93f9">90</span>
</span></span><span style="display:flex;"><span>	scoreMap[<span style="color:#f1fa8c">&#34;小明&#34;</span>] = <span style="color:#bd93f9">100</span>
</span></span><span style="display:flex;"><span>	<span style="color:#6272a4">// 如果key存在ok为true,v为对应的值；不存在ok为false,v为值类型的零值
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>	v, ok <span style="color:#ff79c6">:=</span> scoreMap[<span style="color:#f1fa8c">&#34;张三&#34;</span>]
</span></span><span style="display:flex;"><span>	<span style="color:#ff79c6">if</span> ok {
</span></span><span style="display:flex;"><span>		fmt.<span style="color:#50fa7b">Println</span>(v)
</span></span><span style="display:flex;"><span>	} <span style="color:#ff79c6">else</span> {
</span></span><span style="display:flex;"><span>		fmt.<span style="color:#50fa7b">Println</span>(<span style="color:#f1fa8c">&#34;查无此人&#34;</span>)
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h4 id="遍历-1">遍历</h4>
<p>Go语言中使用<code>for range</code>遍历map。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">func</span> <span style="color:#50fa7b">main</span>() {
</span></span><span style="display:flex;"><span>	scoreMap <span style="color:#ff79c6">:=</span> <span style="color:#8be9fd;font-style:italic">make</span>(<span style="color:#8be9fd;font-style:italic">map</span>[<span style="color:#8be9fd">string</span>]<span style="color:#8be9fd">int</span>)
</span></span><span style="display:flex;"><span>	scoreMap[<span style="color:#f1fa8c">&#34;张三&#34;</span>] = <span style="color:#bd93f9">90</span>
</span></span><span style="display:flex;"><span>	scoreMap[<span style="color:#f1fa8c">&#34;小明&#34;</span>] = <span style="color:#bd93f9">100</span>
</span></span><span style="display:flex;"><span>	scoreMap[<span style="color:#f1fa8c">&#34;娜扎&#34;</span>] = <span style="color:#bd93f9">60</span>
</span></span><span style="display:flex;"><span>	<span style="color:#ff79c6">for</span> k, v <span style="color:#ff79c6">:=</span> <span style="color:#ff79c6">range</span> scoreMap {
</span></span><span style="display:flex;"><span>		fmt.<span style="color:#50fa7b">Println</span>(k, v)
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>但我们只想遍历key的时候，可以按下面的写法：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">func</span> <span style="color:#50fa7b">main</span>() {
</span></span><span style="display:flex;"><span>	scoreMap <span style="color:#ff79c6">:=</span> <span style="color:#8be9fd;font-style:italic">make</span>(<span style="color:#8be9fd;font-style:italic">map</span>[<span style="color:#8be9fd">string</span>]<span style="color:#8be9fd">int</span>)
</span></span><span style="display:flex;"><span>	scoreMap[<span style="color:#f1fa8c">&#34;张三&#34;</span>] = <span style="color:#bd93f9">90</span>
</span></span><span style="display:flex;"><span>	scoreMap[<span style="color:#f1fa8c">&#34;小明&#34;</span>] = <span style="color:#bd93f9">100</span>
</span></span><span style="display:flex;"><span>	scoreMap[<span style="color:#f1fa8c">&#34;娜扎&#34;</span>] = <span style="color:#bd93f9">60</span>
</span></span><span style="display:flex;"><span>	<span style="color:#ff79c6">for</span> k <span style="color:#ff79c6">:=</span> <span style="color:#ff79c6">range</span> scoreMap {
</span></span><span style="display:flex;"><span>		fmt.<span style="color:#50fa7b">Println</span>(k)
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p><strong>注意：</strong> 遍历map时的元素顺序与添加键值对的顺序无关。</p>
<h4 id="使用delete函数删除键值对">使用delete()函数删除键值对</h4>
<p>使用<code>delete()</code>内建函数从map中删除一组键值对，<code>delete()</code>函数的格式如下：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">delete</span>(<span style="color:#8be9fd;font-style:italic">map</span>, key)
</span></span></code></pre></div><p>其中，</p>
<ul>
<li>map:表示要删除键值对的map</li>
<li>key:表示要删除的键值对的键</li>
</ul>
<p>示例代码如下：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">func</span> <span style="color:#50fa7b">main</span>(){
</span></span><span style="display:flex;"><span>	scoreMap <span style="color:#ff79c6">:=</span> <span style="color:#8be9fd;font-style:italic">make</span>(<span style="color:#8be9fd;font-style:italic">map</span>[<span style="color:#8be9fd">string</span>]<span style="color:#8be9fd">int</span>)
</span></span><span style="display:flex;"><span>	scoreMap[<span style="color:#f1fa8c">&#34;张三&#34;</span>] = <span style="color:#bd93f9">90</span>
</span></span><span style="display:flex;"><span>	scoreMap[<span style="color:#f1fa8c">&#34;小明&#34;</span>] = <span style="color:#bd93f9">100</span>
</span></span><span style="display:flex;"><span>	scoreMap[<span style="color:#f1fa8c">&#34;娜扎&#34;</span>] = <span style="color:#bd93f9">60</span>
</span></span><span style="display:flex;"><span>	<span style="color:#8be9fd;font-style:italic">delete</span>(scoreMap, <span style="color:#f1fa8c">&#34;小明&#34;</span>)<span style="color:#6272a4">//将小明:100从map中删除
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>	<span style="color:#ff79c6">for</span> k,v <span style="color:#ff79c6">:=</span> <span style="color:#ff79c6">range</span> scoreMap{
</span></span><span style="display:flex;"><span>		fmt.<span style="color:#50fa7b">Println</span>(k, v)
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h4 id="按照指定顺序遍历map">按照指定顺序遍历map</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">func</span> <span style="color:#50fa7b">main</span>() {
</span></span><span style="display:flex;"><span>	rand.<span style="color:#50fa7b">Seed</span>(time.<span style="color:#50fa7b">Now</span>().<span style="color:#50fa7b">UnixNano</span>()) <span style="color:#6272a4">//初始化随机数种子
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>
</span></span><span style="display:flex;"><span>	<span style="color:#8be9fd;font-style:italic">var</span> scoreMap = <span style="color:#8be9fd;font-style:italic">make</span>(<span style="color:#8be9fd;font-style:italic">map</span>[<span style="color:#8be9fd">string</span>]<span style="color:#8be9fd">int</span>, <span style="color:#bd93f9">200</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#ff79c6">for</span> i <span style="color:#ff79c6">:=</span> <span style="color:#bd93f9">0</span>; i &lt; <span style="color:#bd93f9">100</span>; i<span style="color:#ff79c6">++</span> {
</span></span><span style="display:flex;"><span>		key <span style="color:#ff79c6">:=</span> fmt.<span style="color:#50fa7b">Sprintf</span>(<span style="color:#f1fa8c">&#34;stu%02d&#34;</span>, i) <span style="color:#6272a4">//生成stu开头的字符串
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>		value <span style="color:#ff79c6">:=</span> rand.<span style="color:#50fa7b">Intn</span>(<span style="color:#bd93f9">100</span>)          <span style="color:#6272a4">//生成0~99的随机整数
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>		scoreMap[key] = value
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#6272a4">//取出map中的所有key存入切片keys
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>	<span style="color:#8be9fd;font-style:italic">var</span> keys = <span style="color:#8be9fd;font-style:italic">make</span>([]<span style="color:#8be9fd">string</span>, <span style="color:#bd93f9">0</span>, <span style="color:#bd93f9">200</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#ff79c6">for</span> key <span style="color:#ff79c6">:=</span> <span style="color:#ff79c6">range</span> scoreMap {
</span></span><span style="display:flex;"><span>		keys = <span style="color:#8be9fd;font-style:italic">append</span>(keys, key)
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#6272a4">//对切片进行排序
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>	sort.<span style="color:#50fa7b">Strings</span>(keys)
</span></span><span style="display:flex;"><span>	<span style="color:#6272a4">//按照排序后的key遍历map
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>	<span style="color:#ff79c6">for</span> _, key <span style="color:#ff79c6">:=</span> <span style="color:#ff79c6">range</span> keys {
</span></span><span style="display:flex;"><span>		fmt.<span style="color:#50fa7b">Println</span>(key, scoreMap[key])
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h4 id="元素为map类型的切片">元素为map类型的切片</h4>
<p>下面的代码演示了切片中的元素为map类型时的操作：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">func</span> <span style="color:#50fa7b">main</span>() {
</span></span><span style="display:flex;"><span>	<span style="color:#8be9fd;font-style:italic">var</span> mapSlice = <span style="color:#8be9fd;font-style:italic">make</span>([]<span style="color:#8be9fd;font-style:italic">map</span>[<span style="color:#8be9fd">string</span>]<span style="color:#8be9fd">string</span>, <span style="color:#bd93f9">3</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#ff79c6">for</span> index, value <span style="color:#ff79c6">:=</span> <span style="color:#ff79c6">range</span> mapSlice {
</span></span><span style="display:flex;"><span>		fmt.<span style="color:#50fa7b">Printf</span>(<span style="color:#f1fa8c">&#34;index:%d value:%v\n&#34;</span>, index, value)
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	fmt.<span style="color:#50fa7b">Println</span>(<span style="color:#f1fa8c">&#34;after init&#34;</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#6272a4">// 对切片中的map元素进行初始化
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>	mapSlice[<span style="color:#bd93f9">0</span>] = <span style="color:#8be9fd;font-style:italic">make</span>(<span style="color:#8be9fd;font-style:italic">map</span>[<span style="color:#8be9fd">string</span>]<span style="color:#8be9fd">string</span>, <span style="color:#bd93f9">10</span>)
</span></span><span style="display:flex;"><span>	mapSlice[<span style="color:#bd93f9">0</span>][<span style="color:#f1fa8c">&#34;name&#34;</span>] = <span style="color:#f1fa8c">&#34;小王子&#34;</span>
</span></span><span style="display:flex;"><span>	mapSlice[<span style="color:#bd93f9">0</span>][<span style="color:#f1fa8c">&#34;password&#34;</span>] = <span style="color:#f1fa8c">&#34;123456&#34;</span>
</span></span><span style="display:flex;"><span>	mapSlice[<span style="color:#bd93f9">0</span>][<span style="color:#f1fa8c">&#34;address&#34;</span>] = <span style="color:#f1fa8c">&#34;沙河&#34;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#ff79c6">for</span> index, value <span style="color:#ff79c6">:=</span> <span style="color:#ff79c6">range</span> mapSlice {
</span></span><span style="display:flex;"><span>		fmt.<span style="color:#50fa7b">Printf</span>(<span style="color:#f1fa8c">&#34;index:%d value:%v\n&#34;</span>, index, value)
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h4 id="值为切片类型的map">值为切片类型的map</h4>
<p>下面的代码演示了map中值为切片类型的操作：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">func</span> <span style="color:#50fa7b">main</span>() {
</span></span><span style="display:flex;"><span>	<span style="color:#8be9fd;font-style:italic">var</span> sliceMap = <span style="color:#8be9fd;font-style:italic">make</span>(<span style="color:#8be9fd;font-style:italic">map</span>[<span style="color:#8be9fd">string</span>][]<span style="color:#8be9fd">string</span>, <span style="color:#bd93f9">3</span>)
</span></span><span style="display:flex;"><span>	fmt.<span style="color:#50fa7b">Println</span>(sliceMap)
</span></span><span style="display:flex;"><span>	fmt.<span style="color:#50fa7b">Println</span>(<span style="color:#f1fa8c">&#34;after init&#34;</span>)
</span></span><span style="display:flex;"><span>	key <span style="color:#ff79c6">:=</span> <span style="color:#f1fa8c">&#34;中国&#34;</span>
</span></span><span style="display:flex;"><span>	value, ok <span style="color:#ff79c6">:=</span> sliceMap[key]
</span></span><span style="display:flex;"><span>	<span style="color:#ff79c6">if</span> !ok {
</span></span><span style="display:flex;"><span>		value = <span style="color:#8be9fd;font-style:italic">make</span>([]<span style="color:#8be9fd">string</span>, <span style="color:#bd93f9">0</span>, <span style="color:#bd93f9">2</span>)
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	value = <span style="color:#8be9fd;font-style:italic">append</span>(value, <span style="color:#f1fa8c">&#34;北京&#34;</span>, <span style="color:#f1fa8c">&#34;上海&#34;</span>)
</span></span><span style="display:flex;"><span>	sliceMap[key] = value
</span></span><span style="display:flex;"><span>	fmt.<span style="color:#50fa7b">Println</span>(sliceMap)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><blockquote>
<p>键值对的“值” 返回 具体值 和 是否存在。这种设计是为了区分“<strong>键不存在</strong>”和“<strong>键存在但值为零值</strong>”两种情况。</p>
</blockquote>
<h3 id="函数">函数</h3>
<h2 id="示例hello-world">示例（hello world）</h2>
<h4 id="创建项目">创建项目</h4>
<p>在src下创建<code>hello</code>文件夹，为<strong>项目根目录</strong></p>
<h4 id="go-mod-init">go mod init</h4>
<p>使用go module模式新建项目时，我们<strong>需要</strong>通过<code>go mod init 项目名</code>命令对项目进行初始化，该命令会在项目根目录下生成<code>go.mod</code>文件。例如，我们使用<code>hello</code>作为我们第一个Go项目的名称，执行如下命令。（在刚才建好的项目根目录下）</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>go mod init hello
</span></span></code></pre></div><h4 id="编写代码">编写代码</h4>
<p>接下来在该目录中创建一个<code>main.go</code>文件：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#ff79c6">package</span> main  <span style="color:#6272a4">// 声明 main 包，表明当前是一个可执行程序
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">import</span> <span style="color:#f1fa8c">&#34;fmt&#34;</span>  <span style="color:#6272a4">// 导入内置 fmt 包
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">func</span> <span style="color:#50fa7b">main</span>(){  <span style="color:#6272a4">// main函数，是程序执行的入口
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>	fmt.<span style="color:#50fa7b">Println</span>(<span style="color:#f1fa8c">&#34;Hello World!&#34;</span>)  <span style="color:#6272a4">// 在终端打印 Hello World!
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>}
</span></span></code></pre></div><h4 id="编译">编译</h4>
<p><code>go build</code>命令表示将源代码编译成可执行文件。</p>
<p>在项目根目录下执行：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>go build
</span></span></code></pre></div><p>编译得到的可执行文件会保存在执行编译命令的当前目录下，如果是<code>Windows</code>平台会在当前目录下找到<code>hello.exe</code>可执行文件。（<strong>文件名和项目名相同</strong>）</p>
<p>可在终端直接执行该<code>hello.exe</code>文件：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ hello.exe
</span></span><span style="display:flex;"><span>Hello World!
</span></span></code></pre></div><p>我们还可以使用<code>-o</code>参数来指定编译后得到的可执行文件的名字。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>go build -o 123.exe
</span></span></code></pre></div><h4 id="go-run">go run</h4>
<p><code>go run main.go</code>也可以执行程序，该命令本质上是先在临时目录编译程序然后再执行。</p>
<h4 id="go-install">go install</h4>
<p><code>go install</code>表示安装的意思，它先编译源代码得到可执行文件，然后将可执行文件移动到<code>GOPATH</code>的bin目录下。因为我们<strong>把<code>GOPATH</code>下的<code>bin</code>目录添加到了环境变量中</strong>，所以我们就可以在任意地方直接执行可执行文件了。</p>
<h2 id="依赖管理">依赖管理</h2>
<p>最早的时候，Go所依赖的所有的第三方库都放在GOPATH这个目录下面。这就导致了同一个库只能保存一个版本的代码。如果不同的项目依赖同一个第三方的库的不同版本，应该怎么解决？</p>
<h3 id="godep">godep</h3>
<p>Go语言从v1.5开始开始引入<code>vendor</code>模式，如果项目目录下有vendor目录，那么go工具链会优先使用<code>vendor</code>内的包进行编译、测试等。</p>
<p><code>godep</code>是一个通过vender模式实现的Go语言的第三方依赖管理工具，类似的还有由社区维护准官方包管理工具<code>dep</code>。</p>
<h5 id="安装-1">安装</h5>
<p>执行以下命令安装<code>godep</code>工具。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#ff79c6">go</span> get github.com<span style="color:#ff79c6">/</span>tools<span style="color:#ff79c6">/</span>godep
</span></span></code></pre></div><h5 id="基本命令">基本命令</h5>
<p>安装好godep之后，在终端输入<code>godep</code>查看支持的所有命令。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>godep save     将依赖项输出并复制到Godeps.json文件中
</span></span><span style="display:flex;"><span>godep go       使用保存的依赖项运行go工具
</span></span><span style="display:flex;"><span>godep get      下载并安装具有指定依赖项的包
</span></span><span style="display:flex;"><span>godep path     打印依赖的GOPATH路径
</span></span><span style="display:flex;"><span>godep restore  在GOPATH中拉取依赖的版本
</span></span><span style="display:flex;"><span>godep update   更新选定的包或go版本
</span></span><span style="display:flex;"><span>godep diff     显示当前和以前保存的依赖项集之间的差异
</span></span><span style="display:flex;"><span>godep version  查看版本信息
</span></span></code></pre></div><p>使用<code>godep help [command]</code>可以看看具体命令的帮助信息。</p>
<h5 id="使用godep">使用godep</h5>
<p>在项目目录下执行<code>godep save</code>命令，会在当前项目中创建<code>Godeps</code>和<code>vender</code>两个文件夹。</p>
<p>其中<code>Godeps</code>文件夹下有一个<code>Godeps.json</code>的文件，里面记录了项目所依赖的包信息。 <code>vender</code>文件夹下是项目依赖的包的源代码文件。</p>
<h5 id="vender机制">vender机制</h5>
<p>Go1.5版本之后开始支持，能够控制Go语言程序编译时依赖包搜索路径的优先级。</p>
<p>例如查找项目的某个依赖包，首先会在项目根目录下的<code>vender</code>文件夹中查找，如果没有找到就会去<code>$GOAPTH/src</code>目录下查找。</p>
<h5 id="godep开发流程">godep开发流程</h5>
<ol>
<li>保证程序能够正常编译</li>
<li>执行<code>godep save</code>保存当前项目的所有第三方依赖的版本信息和代码</li>
<li>提交Godeps目录和vender目录到代码库。</li>
<li>如果要更新依赖的版本，可以直接修改<code>Godeps.json</code>文件中的对应项</li>
</ol>
<h3 id="go-module">go module</h3>
<p><code>go module</code>是Go1.11版本之后官方推出的版本管理工具，并且从Go1.13版本开始，<code>go module</code>将是Go语言默认的依赖管理工具。</p>
<p><strong>GO111MODULE</strong></p>
<p>要启用<code>go module</code>支持首先要设置环境变量<code>GO111MODULE</code>，通过它可以开启或关闭模块支持，它有三个可选值：<code>off</code>、<code>on</code>、<code>auto</code>，默认值是<code>auto</code>。</p>
<ol>
<li><code>GO111MODULE=off</code>禁用模块支持，编译时会从<code>GOPATH</code>和<code>vendor</code>文件夹中查找包。</li>
<li><code>GO111MODULE=on</code>启用模块支持，编译时会忽略<code>GOPATH</code>和<code>vendor</code>文件夹，只根据 <code>go.mod</code>下载依赖。</li>
<li><code>GO111MODULE=auto</code>，当项目在<code>$GOPATH/src</code>外且项目根目录有<code>go.mod</code>文件时，开启模块支持。</li>
</ol>
<p>简单来说，设置<code>GO111MODULE=on</code>之后就可以使用<code>go module</code>了，以后就没有必要在GOPATH中创建项目了，并且还能够很好的管理项目依赖的第三方包信息。</p>
<p>使用 go module 管理依赖后会在项目根目录下生成两个文件<code>go.mod</code>和<code>go.sum</code>。</p>
<h4 id="go-mod命令">go mod命令</h4>
<p>常用的<code>go mod</code>命令如下：</p>
<pre tabindex="0"><code>go mod download    下载依赖的module到本地cache（默认为$GOPATH/pkg/mod目录）
go mod edit        编辑go.mod文件
go mod graph       打印模块依赖图
go mod init        初始化当前文件夹, 创建go.mod文件
go mod tidy        增加缺少的module，删除无用的module
go mod vendor      将依赖复制到vendor下
go mod verify      校验依赖
go mod why         解释为什么需要依赖
</code></pre><p><strong>go.mod</strong></p>
<p>go.mod文件记录了项目所有的依赖信息，其结构大致如下：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>module github.com/Q1mi/studygo/blogger
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>go 1.12
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>require <span style="color:#ff79c6">(</span>
</span></span><span style="display:flex;"><span>	github.com/DeanThompson/ginpprof v0.0.0-20190408063150-3be636683586
</span></span><span style="display:flex;"><span>	github.com/gin-gonic/gin v1.4.0
</span></span><span style="display:flex;"><span>	github.com/go-sql-driver/mysql v1.4.1
</span></span><span style="display:flex;"><span>	github.com/jmoiron/sqlx v1.2.0
</span></span><span style="display:flex;"><span>	github.com/satori/go.uuid v1.2.0
</span></span><span style="display:flex;"><span>	google.golang.org/appengine v1.6.1 // indirect
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">)</span>
</span></span></code></pre></div><ul>
<li><code>module</code>用来定义包名</li>
<li><code>require</code>用来定义依赖包及版本</li>
<li><code>indirect</code>表示间接引用</li>
</ul>
<p><strong>依赖的版本</strong></p>
<p>go mod支持语义化版本号，比如<code>go get foo@v1.2.3</code>，也可以跟git的分支或tag，比如<code>go get foo@master</code>，当然也可以跟git提交哈希，比如<code>go get foo@e3702bed2</code>。关于依赖的版本支持以下几种格式：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span>gopkg.in<span style="color:#ff79c6">/</span>tomb.v1 v1<span style="color:#bd93f9">.0.0</span><span style="color:#ff79c6">-</span><span style="color:#bd93f9">20141024135613</span><span style="color:#ff79c6">-</span>dd632973f1e7
</span></span><span style="display:flex;"><span>gopkg.in<span style="color:#ff79c6">/</span>vmihailenco<span style="color:#ff79c6">/</span>msgpack.v2 v2<span style="color:#bd93f9">.9.1</span>
</span></span><span style="display:flex;"><span>gopkg.in<span style="color:#ff79c6">/</span>yaml.v2 <span style="color:#ff79c6">&lt;=</span>v2<span style="color:#bd93f9">.2.1</span>
</span></span><span style="display:flex;"><span>github.com<span style="color:#ff79c6">/</span>tatsushid<span style="color:#ff79c6">/</span><span style="color:#ff79c6">go</span><span style="color:#ff79c6">-</span>fastping v0<span style="color:#bd93f9">.0.0</span><span style="color:#ff79c6">-</span><span style="color:#bd93f9">20160109021039</span><span style="color:#ff79c6">-</span>d7bb493dee3e
</span></span><span style="display:flex;"><span>latest
</span></span></code></pre></div><p><strong>replace</strong></p>
<p>在国内访问golang.org/x的各个包都需要翻墙，你可以在go.mod中使用replace替换成github上对应的库。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#50fa7b">replace</span> (
</span></span><span style="display:flex;"><span>	golang.org<span style="color:#ff79c6">/</span>x<span style="color:#ff79c6">/</span>crypto v0<span style="color:#bd93f9">.0.0</span><span style="color:#ff79c6">-</span><span style="color:#bd93f9">20180820150726</span><span style="color:#ff79c6">-</span><span style="color:#bd93f9">614</span>d502a4dac =&gt; github.com<span style="color:#ff79c6">/</span>golang<span style="color:#ff79c6">/</span>crypto v0<span style="color:#bd93f9">.0.0</span><span style="color:#ff79c6">-</span><span style="color:#bd93f9">20180820150726</span><span style="color:#ff79c6">-</span><span style="color:#bd93f9">614</span>d502a4dac
</span></span><span style="display:flex;"><span>	golang.org<span style="color:#ff79c6">/</span>x<span style="color:#ff79c6">/</span>text v0<span style="color:#bd93f9">.3.0</span> =&gt; github.com<span style="color:#ff79c6">/</span>golang<span style="color:#ff79c6">/</span>text v0<span style="color:#bd93f9">.3.0</span>
</span></span><span style="display:flex;"><span>)
</span></span></code></pre></div><h4 id="go-get-命令">go get 命令</h4>
<p>在项目中执行<code>go get</code>命令可以下载依赖包，并且还可以指定下载的版本。</p>
<ol>
<li>运行<code>go get -u</code>将会升级到最新的次要版本或者修订版本(x.y.z, z是修订版本号， y是次要版本号)</li>
<li>运行<code>go get -u=patch</code>将会升级到最新的修订版本</li>
<li>运行<code>go get package@version</code>将会升级到指定的版本号version</li>
</ol>
<p>如果下载所有依赖可以使用<code>go mod download </code>命令。</p>
<h4 id="整理依赖">整理依赖</h4>
<p>我们在代码中删除依赖代码后，相关的依赖库并不会在<code>go.mod</code>文件中自动移除。这种情况下我们可以使用<code>go mod tidy</code>命令更新<code>go.mod</code>中的依赖关系。</p>
<h4 id="go-mod-edit">go mod edit</h4>
<p><strong>格式化</strong></p>
<p>因为我们可以手动修改go.mod文件，所以有些时候需要格式化该文件。Go提供了一下命令：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>go mod edit -fmt
</span></span></code></pre></div><p><strong>添加依赖项</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>go mod edit -require<span style="color:#ff79c6">=</span>golang.org/x/text
</span></span></code></pre></div><p><strong>移除依赖项</strong></p>
<p>如果只是想修改<code>go.mod</code>文件中的内容，那么可以运行<code>go mod edit -droprequire=package path</code>，比如要在<code>go.mod</code>中移除<code>golang.org/x/text</code>包，可以使用如下命令：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>go mod edit -droprequire<span style="color:#ff79c6">=</span>golang.org/x/text
</span></span></code></pre></div><p>关于<code>go mod edit</code>的更多用法可以通过<code>go help mod edit</code>查看。</p>
<h4 id="使用go-module">使用go module</h4>
<h5 id="既有项目">既有项目</h5>
<p>如果需要对一个已经存在的项目启用<code>go module</code>，可以按照以下步骤操作：</p>
<ol>
<li>在项目目录下执行<code>go mod init</code>，生成一个<code>go.mod</code>文件。</li>
<li>执行<code>go get</code>，查找并记录当前项目的依赖，同时生成一个<code>go.sum</code>记录每个依赖库的版本和哈希值。</li>
</ol>
<h5 id="新项目">新项目</h5>
<p>对于一个新创建的项目，我们可以在项目文件夹下按照以下步骤操作：</p>
<ol>
<li>执行<code>go mod init 项目名</code>命令，在当前项目文件夹下创建一个<code>go.mod</code>文件。</li>
<li>手动编辑<code>go.mod</code>中的require依赖项或执行<code>go get</code>自动发现、维护依赖。</li>
</ol>
<h5 id="导入本地包">导入本地包</h5>
<p>假设我们现在有<code>moduledemo</code>和<code>mypackage</code>两个包，其中<code>moduledemo</code>包中会导入<code>mypackage</code>包并使用它的<code>New</code>方法。</p>
<p><code>mypackage/mypackage.go</code>内容如下：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#ff79c6">package</span> mypackage
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">import</span> <span style="color:#f1fa8c">&#34;fmt&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">func</span> <span style="color:#50fa7b">New</span>(){
</span></span><span style="display:flex;"><span>	fmt.<span style="color:#50fa7b">Println</span>(<span style="color:#f1fa8c">&#34;mypackage.New&#34;</span>)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p><strong>当在不同项目下时</strong></p>
<p>目录结构如下：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>├── moduledemo
</span></span><span style="display:flex;"><span>│   ├── go.mod
</span></span><span style="display:flex;"><span>│   └── main.go
</span></span><span style="display:flex;"><span>└── mypackage
</span></span><span style="display:flex;"><span>    ├── go.mod
</span></span><span style="display:flex;"><span>    └── mypackage.go
</span></span></code></pre></div><p>这个时候，<code>mypackage</code>也需要进行module初始化，即拥有一个属于自己的<code>go.mod</code>文件，内容如下：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span>module mypackage
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">go</span> <span style="color:#bd93f9">1.14</span>
</span></span></code></pre></div><p>然后我们在<code>moduledemo/main.go</code>中按如下方式导入：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#ff79c6">import</span> (
</span></span><span style="display:flex;"><span>	<span style="color:#f1fa8c">&#34;fmt&#34;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#f1fa8c">&#34;mypackage&#34;</span>
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">func</span> <span style="color:#50fa7b">main</span>() {
</span></span><span style="display:flex;"><span>	mypackage.<span style="color:#50fa7b">New</span>()
</span></span><span style="display:flex;"><span>	fmt.<span style="color:#50fa7b">Println</span>(<span style="color:#f1fa8c">&#34;main&#34;</span>)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>因为这两个包不在同一个项目路径下，你想要导入本地包，并且这些包也没有发布到远程的github或其他代码仓库地址。这个时候我们就需要在<code>go.mod</code>文件中使用<code>replace</code>指令。</p>
<p>在调用方也就是<code>moduledemo/go.mod</code>中按如下方式指定使用相对路径来寻找<code>mypackage</code>这个包。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span>module moduledemo
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">go</span> <span style="color:#bd93f9">1.14</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>require <span style="color:#f1fa8c">&#34;mypackage&#34;</span> v0<span style="color:#bd93f9">.0.0</span>
</span></span><span style="display:flex;"><span>replace <span style="color:#f1fa8c">&#34;mypackage&#34;</span> =&gt; <span style="color:#f1fa8c">&#34;../mypackage&#34;</span>
</span></span></code></pre></div><h2 id="跨平台编译">跨平台编译</h2>
<p>默认我们<code>go build</code>的可执行文件都是当前操作系统可执行的文件，Go语言支持跨平台编译——在当前平台（例如Windows）下编译其他平台（例如Linux）的可执行文件。</p>
<h4 id="windows编译linux可执行文件">Windows编译Linux可执行文件</h4>
<p>如果我想在Windows下编译一个Linux下可执行文件，那需要怎么做呢？只需要在编译时指定目标操作系统的平台和处理器架构即可。</p>
<blockquote>
<p>注意：无论你在Windows电脑上使用VsCode编辑器还是Goland编辑器，都要注意你使用的终端类型，因为不同的终端下命令不一样！！！目前的Windows通常默认使用的是<code>PowerShell</code>终端。</p>
</blockquote>
<p>如果你的<code>Windows</code>使用的是<code>cmd</code>，那么按如下方式指定环境变量。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>SET <span style="color:#8be9fd;font-style:italic">CGO_ENABLED</span><span style="color:#ff79c6">=</span><span style="color:#bd93f9">0</span>  // 禁用CGO
</span></span><span style="display:flex;"><span>SET <span style="color:#8be9fd;font-style:italic">GOOS</span><span style="color:#ff79c6">=</span>linux  // 目标平台是linux
</span></span><span style="display:flex;"><span>SET <span style="color:#8be9fd;font-style:italic">GOARCH</span><span style="color:#ff79c6">=</span>amd64  // 目标处理器架构是amd64
</span></span></code></pre></div><p>如果你的<code>Windows</code>使用的是<code>PowerShell</code>终端，那么设置环境变量的语法为</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">$ENV</span>:CGO_ENABLED<span style="color:#ff79c6">=</span><span style="color:#bd93f9">0</span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">$ENV</span>:GOOS<span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;linux&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">$ENV</span>:GOARCH<span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;amd64&#34;</span>
</span></span></code></pre></div><p>在你的<code>Windows</code>终端下执行完上述命令后，再执行下面的命令，得到的就是能够在Linux平台运行的可执行文件了。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>go build
</span></span></code></pre></div>
    </div>
    <div class="post-footer">
        <div class="info">
            
            
        </div>
        


    </div>
    
        
    
</div>

                <div class="grow"></div>
                <div class="built-with">
    Built with <a href="https://gohugo.io/">Hugo</a> <b>·</b> Using the <a href="https://github.com/LucasVadilho/heyo-hugo-theme">heyo</a> theme
</div>
            </div>
        </div>
        
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha512-3M00D/rn8n+2ZVXBO9Hib0GKNpkm8MSUU/e2VNthDyBYxKWG+BftNYYcuEjXlyrSO637tidzMBXfE7sQm0INUg==" crossorigin="anonymous" referrerpolicy="no-referrer" />

<script type="text/javascript">
            
            
            window.MathJax = {
                tex: {
                    inlineMath: [['$', '$'], ['\\(', '\\)']],
                    displayMath: [['$$','$$'], ['\\[', '\\]']]
                },
                svg: {
                    scale: 1.25,
                }
            };
        </script><script defer type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.1.0/es5/tex-mml-svg.min.js" integrity="sha512-/mL9Gs6E5Bz6NtPOr9eY&#43;T8IIdJbo2JL3TudApzFFelwBXEc3TeFLU6kPq122TJROv7jkktuBRkz5h8vGzrsyA==" crossorigin="anonymous"></script>
    </body>
</html>