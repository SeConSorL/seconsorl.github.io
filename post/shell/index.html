<!DOCTYPE html>
<html lang="en" data-theme="light"><head>
    <title>Shell · HZW</title>
    <meta charset="utf-8">
    
    <meta name="generator" content="Hugo 0.124.1">
    <meta property="og:title" content="Shell" />
<meta property="og:description" content="a note for learning shell" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://seconsorl.github.io/post/shell/" /><meta property="og:image" content="https://seconsorl.github.io/images/profile.png" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2024-05-06T00:00:00+00:00" />
<meta property="article:modified_time" content="2024-05-06T00:00:00+00:00" /><meta property="og:site_name" content="A junior from NBU" />



    <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
    <meta name="description" content="HZW">
    
    
    
    <link rel="stylesheet" type="text/css" href="https://seconsorl.github.io/css/style.min.565d8c479597aa43658922d4b31e286529a7525a22c9546fa1018fc5e5ef6d86.css" integrity="sha256-Vl2MR5WXqkNliSLUsx4oZSmnUloiyVRvoQGPxeXvbYY=" crossorigin="anonymous" type="text/css">

    
    
    
    <script type="text/javascript" src="https://seconsorl.github.io/js/heyo-header.min.a3fa728a9f57833a31dfb45c48caaf1e4890c8c97f07bd7133fc2359745edb5d.js" integrity="sha256-o/pyip9Xgzox37RcSMqvHkiQyMl/B71xM/wjWXRe210=" crossorigin="anonymous"></script>

    
    
    <link rel="stylesheet" type="text/css" href="https://seconsorl.github.io/css/fonts.9398921f2d404983c2b7f9a68ddc72e3f5e58a3e38b0a8e4a70d75c12ebfb7c5.css" integrity="sha256-k5iSHy1ASYPCt/mmjdxy4/Xlij44sKjkpw11wS6/t8U=" crossorigin="anonymous">

    
    
    
    <script type="text/javascript" src="https://seconsorl.github.io/js/sidebar-toc.min.788b639e2ec681549740b90b3b865d5f9e1789e3ca9c06ccc45d65655434c954.js" integrity="sha256-eItjni7GgVSXQLkLO4ZdX54XiePKnAbMxF1lZVQ0yVQ=" crossorigin="anonymous"></script>

    
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.1.9/p5.min.js" defer></script>

        
        
        <script type="text/javascript" src="https://seconsorl.github.io/js/sketch-graph.26b92ed9317bdc6f35642d588bdf3283f40998846e01cf4bee22a126907fbf3b.js" integrity="sha256-Jrku2TF73G81ZC1Yi98yg/QJmIRuAc9L7iKhJpB/vzs=" crossorigin="anonymous" defer></script>

        
        
        <script type="text/javascript" src="https://seconsorl.github.io/js/sketch-digitalRain.af8a7b5c4428cc62d5bf49bf2698d4112c2459ee0c22c1c753ab304aef69888a.js" integrity="sha256-r4p7XEQozGLVv0m/JpjUESwkWe4MIsHHU6swSu9piIo=" crossorigin="anonymous" defer></script>

        
        
        <script type="text/javascript" src="https://seconsorl.github.io/js/sketch-circleBrushStrokes.fe8fc3ee52e1d90e9236be8c36a27711efa024beb4da304829f95dfbb61d6e84.js" integrity="sha256-/o/D7lLh2Q6SNr6MNqJ3Ee&#43;gJL602jBIKfld&#43;7YdboQ=" crossorigin="anonymous" defer></script>

        
        
        <script type="text/javascript" src="https://seconsorl.github.io/js/sketch-meta.71b5202ea881c86ac19e4b55414656a5444204a4ba08ff7368a5aa99c0a60949.js" integrity="sha256-cbUgLqiByGrBnktVQUZWpURCBKS6CP9zaKWqmcCmCUk=" crossorigin="anonymous" defer></script>

        
        
        <script type="text/javascript" src="https://seconsorl.github.io/js/sidebar-sketch.min.2e95015880993ef9abcad62d111decea22406616931bce193254bf8af2339953.js" integrity="sha256-LpUBWICZPvmrytYtER3s6iJAZhaTG84ZMlS/ivIzmVM=" crossorigin="anonymous" defer></script>
    
    
    
    <link rel="shortcut icon" href="https://seconsorl.github.io/favicons/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon" sizes="180x180" href="https://seconsorl.github.io/favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="https://seconsorl.github.io/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="https://seconsorl.github.io/favicons/favicon-16x16.png">
    <link rel="canonical" href="https://seconsorl.github.io/post/shell/">
    
    
    
    
    

    
    <meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://seconsorl.github.io/images/profile.png" /><meta name="twitter:title" content="Shell"/>
<meta name="twitter:description" content="a note for learning shell"/>

</head><body>
        <div class="main">
            <div class="page-top">
    <a role="button" class="navbar-burger" data-target="navMenu" aria-label="menu" aria-expanded="false" >
        <span aria-hidden="true"></span>
        <span aria-hidden="true"></span>
        <span aria-hidden="true"></span>
      </a>
    <ul class="nav" id="navMenu">
        
        
            
            <li><a  href="/"  title="">Home</a></li>
        
            
            <li><a  href="/post/"  title="">Posts</a></li>
        
            
            <li><a  href="/about/"  title="">About</a></li>
        
        <li class="grow"></li>
        
        <li>
            <a class="theme-switch" title="Switch Theme">
                <i class="fa fa-adjust fa-fw" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>
            <div class="sidebar" id="sidebar">
    <div class="top-toc">
        <img src="https://seconsorl.github.io/images/profile.png" alt="profile picture">
        
        <a href="/">A junior from NBU</a>
    </div>
    
    <div class="middle-sidebar grow" id="middle-sidebar">
        
            
            
                
            

            
        
    </div>

    <div class="footer">
        <ul class="social-links">
            
            <li>
                <a href="https://linkedin.com/" target="_blank" rel="noopener noreferrer" rel="me" aria-label="Linkedin">
                    <i class="fab fa-linkedin" aria-hidden="true"></i>
                </a>
            </li>
            
            <li>
                <a href="https://github.com/SeConSorL" target="_blank" rel="noopener noreferrer" rel="me" aria-label="GitHub">
                    <i class="fab fa-github" aria-hidden="true"></i>
                </a>
            </li>
            
            <li>
                <a href="https://www.instagram.com/" target="_blank" rel="noopener noreferrer" rel="me" aria-label="instagram">
                    <i class="fab fa-instagram" aria-hidden="true"></i>
                </a>
            </li>
            
            <li>
                <a href="mailto:216002917@nbu.edu.cn" target="_blank" rel="noopener noreferrer" rel="me" aria-label="e-mail">
                    <i class="fas fa-envelope" aria-hidden="true"></i>
                </a>
            </li>
            
        </ul>

        <div class="by">by HZW <b>·</b> 2024</div>
    </div>
</div>
            <div class="content">
<div class="post">
    
    <div class="post-title">
        <h1>Shell</h1>
        
            <div class="post-header">
    <div style="padding-top: 10px;">
        <i class="far fa-calendar"></i><span class="date">May 6, 2024</span>
        <i class="far fa-clock"></i><span class="reading-time">9 minutes</span>
        


    </div>
</div>
        
    </div>
    <div class="post-content">
        <h2 id="tips">TIPS</h2>
<p><a href="https://www.runoob.com/try/runcode.php?filename=helloworld&type=bash">在线编辑器</a></p>
<p><a href="https://www.runoob.com/linux/linux-tutorial.html">菜鸟教程</a></p>
<h2 id="介绍">介绍</h2>
<p>Shell 是一个用 C 语言编写的程序，它是用户使用 Linux 的桥梁。Shell 既是一种命令语言，又是一种程序设计语言。</p>
<p>Ken Thompson 的 sh 是第一种 Unix Shell，Windows Explorer 是一个典型的图形界面 Shell。</p>
<h3 id="shell-脚本">Shell 脚本</h3>
<p>Shell 脚本（shell script），是一种为 shell 编写的脚本程序。</p>
<p>业界所说的 shell 通常都是指 shell 脚本，但读者朋友要知道，shell 和 shell script 是两个不同的概念。</p>
<p>由于习惯的原因，简洁起见，本文出现的 &ldquo;shell编程&rdquo; 都是指 shell 脚本编程，不是指开发 shell 自身。</p>
<h3 id="shell-环境">Shell 环境</h3>
<p>Shell 编程跟 JavaScript、php 编程一样，只要有一个能编写代码的文本编辑器和一个能解释执行的脚本解释器就可以了。</p>
<p>Linux 的 Shell 种类众多，常见的有：</p>
<ul>
<li>Bourne Shell（/usr/bin/sh或/bin/sh）</li>
<li>Bourne Again Shell（/bin/bash）</li>
<li>C Shell（/usr/bin/csh）</li>
</ul>
<p>Bourne Again Shell（Bash），由于易用和免费，Bash 在日常工作中被广泛使用。同时，Bash 也是大多数Linux 系统默认的 Shell。</p>
<h2 id="shell调用形式">Shell调用形式</h2>
<p><strong>打开终端时系统自动调用：/etc/profile 或 ~/.bashrc</strong></p>
<p><strong>/etc/profile</strong>
此文件为系统的每个用户设置环境信息，当用户第一次登录时，该文件被执行，系统的公共环境变量在这里设置开机自启动的程序，一般也在这里设置。</p>
<p><strong>~/.bashrc</strong>
用户自己的home目录中的.bashrc 登录时会自动调用，打开任意终端时也会自动调用这个文件一般设置与个人用户有关的环境变量，如交叉编译器的路径等。</p>
<h3 id="运行">运行</h3>
<p>指定解析器时候，会创建一个子shell解析脚本</p>
<h4 id="作为可执行程序">作为可执行程序</h4>
<p>将代码保存为 test.sh，并 cd 到相应目录：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>chmod +x ./test.sh  <span style="color:#6272a4">#使脚本具有执行权限</span>
</span></span><span style="display:flex;"><span>./test.sh  <span style="color:#6272a4">#执行脚本  按照文件中#!指定的解析器解析</span>
</span></span></code></pre></div><p>注意，一定要写成 <strong>./test.sh</strong>，而不是 <strong>test.sh</strong>，运行其它二进制的程序也一样，直接写 test.sh，linux 系统会去 PATH 里寻找有没有叫 test.sh 的，而只有 /bin, /sbin, /usr/bin，/usr/sbin 等在 PATH 里，你的当前目录通常不在 PATH 里，所以写成 test.sh 是会找不到命令的，要用 ./test.sh 告诉系统说，就在当前目录找。</p>
<h4 id="作为解释器参数">作为解释器参数</h4>
<p>这种运行方式是，直接运行解释器，其参数就是 shell 脚本的文件名，如：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>/bin/sh test.sh  <span style="color:#6272a4">#解释器  sh脚本</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>bash test.sh <span style="color:#6272a4">#指明先用bash解析器解析</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>. xxx.sh <span style="color:#6272a4">#直接使用默认解析器解析</span>
</span></span></code></pre></div><p>这种方式运行的脚本，不需要在第一行指定解释器信息，写了也没用，但是第一行还是要写的。</p>
<p>打开终端就会有以后个解释器，我们称为当前解释器；我们指定解析器的时候（使用 ./xxx.sh 或 bash xxx.sh）时会创建一个子shell解析脚本</p>
<h3 id="将windows文件转换成-unix文件">将windows文件转换成 unix文件</h3>
<p><strong>方法一</strong></p>
<p><strong>dos2unix</strong> 如果没有该插件 需要安装</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>sudo apt-get install dos2unix
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4">#转换命令：</span>
</span></span><span style="display:flex;"><span>dos2unix &lt;shell脚本&gt;
</span></span><span style="display:flex;"><span><span style="color:#6272a4">#转换成功就可以执行运行</span>
</span></span></code></pre></div><p><strong>方法二</strong></p>
<p>编辑脚本，在最后一行模式下执行 <code>:set ff=unix</code></p>
<h2 id="变量">变量</h2>
<p>变量是用于存储数据值的名称。</p>
<h3 id="定义和赋值">定义和赋值</h3>
<p>定义变量时，变量名不加美元符号（$，PHP语言中变量需要）</p>
<p>变量名的命名须遵循如下规则：</p>
<ul>
<li>
<p><strong>只包含字母、数字和下划线：</strong> 变量名可以包含字母（大小写敏感）、数字和下划线 <strong>_</strong>，不能包含其他特殊字符。</p>
</li>
<li>
<p><strong>不能以数字开头：</strong> 变量名不能以数字开头，但可以包含数字。</p>
</li>
<li>
<p><strong>避免使用 Shell 关键字：</strong> 不要使用Shell的关键字（例如 if、then、else、fi、for、while 等）作为变量名，以免引起混淆。</p>
</li>
<li>
<p><strong>使用大写字母表示常量：</strong> 习惯上，常量的变量名通常使用大写字母，例如 <strong>PI=3.14</strong>。</p>
</li>
<li>
<p><strong>避免使用特殊符号：</strong> 尽量避免在变量名中使用特殊符号，因为它们可能与 Shell 的语法产生冲突。</p>
</li>
<li>
<p><strong>避免使用空格：</strong> 变量名中不应该包含空格，因为空格通常用于分隔命令和参数。<strong>赋值时等号两侧避免使用空格</strong>：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#6272a4"># 正确的赋值</span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">variable_name</span><span style="color:#ff79c6">=</span>value
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># 有可能会导致错误</span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">variable_name</span> <span style="color:#ff79c6">=</span> value
</span></span></code></pre></div></li>
</ul>
<p>可以用语句给变量赋值，如：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#6272a4">#将 /etc 下目录的文件名循环出来。</span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">for</span> file in <span style="color:#f1fa8c">`</span>ls /etc<span style="color:#f1fa8c">`</span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">for</span> file in <span style="color:#ff79c6">$(</span>ls /etc<span style="color:#ff79c6">)</span>
</span></span></code></pre></div><h4 id="只读变量">只读变量</h4>
<p>使用 <code>readonly</code> 命令可以将变量定义为只读变量，只读变量的值不能被改变。</p>
<h3 id="使用">使用</h3>
<p>使用一个定义过的变量，只要在变量名前面加美元符号即可，如：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">your_name</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;qinjx&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">echo</span> <span style="color:#8be9fd;font-style:italic">$your_name</span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">echo</span> <span style="color:#f1fa8c">${</span><span style="color:#8be9fd;font-style:italic">your_name</span><span style="color:#f1fa8c">}</span>
</span></span></code></pre></div><p>变量名外面的花括号是<strong>可选</strong>的，加不加都行，加花括号是为了帮助解释器识别变量的边界</p>
<blockquote>
<p>给所有变量加上花括号，这是个好的编程习惯</p>
</blockquote>
<h3 id="删除">删除</h3>
<p>使用 <code>unset</code> 命令可以删除变量。语法：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">unset</span> variable_name
</span></span></code></pre></div><p>变量被删除后不能再次使用。<code>unset</code> 命令<strong>不能删除只读变量</strong>。</p>
<h3 id="变量类型">变量类型</h3>
<p>Shell 支持不同类型的变量，其中一些主要的类型包括：</p>
<ul>
<li>
<p><strong>字符串变量：</strong> 在 Shell中，变量通常被视为字符串。</p>
<p>你可以使用单引号 <code>'</code> 或双引号 <code>&quot;</code> 来定义字符串，例如：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">my_string</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#39;Hello, World!&#39;</span>
</span></span><span style="display:flex;"><span>或者
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">my_string</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;Hello, World!&#34;</span>
</span></span></code></pre></div></li>
<li>
<p><strong>整数变量</strong>： 在一些Shell中，你可以使用 <code>declare</code> 或 <code>typeset</code> 命令来声明整数变量。这样的变量只包含整数值，例如：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">declare</span> -i <span style="color:#8be9fd;font-style:italic">my_integer</span><span style="color:#ff79c6">=</span><span style="color:#bd93f9">42</span>
</span></span></code></pre></div><p>这样的声明告诉 Shell <strong>将 my_integer 视为整数</strong>，如果尝试将非整数值赋给它，Shell会尝试将其转换为整数。</p>
</li>
<li>
<p><strong>数组变量：</strong> Shell 也支持数组，允许你在一个变量中存储多个值。数组可以是整数索引数组或关联数组（字典），以下是一个简单的整数索引数组的例子：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">my_array</span><span style="color:#ff79c6">=(</span><span style="color:#bd93f9">1</span> <span style="color:#bd93f9">2</span> <span style="color:#bd93f9">3</span> <span style="color:#bd93f9">4</span> 5<span style="color:#ff79c6">)</span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4">#或者关联数组（字典）</span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">declare</span> -A associative_array
</span></span><span style="display:flex;"><span>associative_array<span style="color:#ff79c6">[</span><span style="color:#f1fa8c">&#34;name&#34;</span><span style="color:#ff79c6">]=</span><span style="color:#f1fa8c">&#34;John&#34;</span>
</span></span><span style="display:flex;"><span>associative_array<span style="color:#ff79c6">[</span><span style="color:#f1fa8c">&#34;age&#34;</span><span style="color:#ff79c6">]=</span><span style="color:#bd93f9">30</span>
</span></span></code></pre></div></li>
<li>
<p><strong>环境变量：</strong> 这些是由操作系统或用户设置的特殊变量，用于配置 Shell 的行为和影响其执行环境。</p>
<p>例如，<code>PATH</code>变量包含了操作系统搜索可执行文件的路径</p>
</li>
<li>
<p><strong>特殊变量：</strong> 有一些特殊变量在 Shell 中具有特殊含义，例如 <strong>$0</strong> 表示脚本的名称，<strong>$1</strong>, <strong>$2</strong>, 等表示脚本的参数。<strong>$#<strong>表示传递给脚本的参数数量，</strong>$?</strong> 表示上一个命令的退出状态等。当n&gt;=10时，需要使用<code>${n}</code>来获取参数。</p>
</li>
</ul>
<h3 id="字符串">字符串</h3>
<p>字符串可以用单引号，也可以用双引号，也可以不用引号。</p>
<p><strong>单引号</strong></p>
<ul>
<li>单引号里的任何字符都会原样输出，单引号字符串中的变量是无效的；</li>
<li>单引号字符串中不能出现单独一个的单引号（对单引号使用转义符后也不行），但可成对出现，作为字符串拼接使用。</li>
</ul>
<p><strong>双引号</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">your_name</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;runoob&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">str</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;Hello, I know you are \&#34;</span><span style="color:#8be9fd;font-style:italic">$your_name</span><span style="color:#f1fa8c">\&#34;! \n&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">echo</span> -e <span style="color:#8be9fd;font-style:italic">$str</span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4">#输出结果为：</span>
</span></span><span style="display:flex;"><span>Hello, I know you are <span style="color:#f1fa8c">&#34;runoob&#34;</span>! 
</span></span></code></pre></div><ul>
<li>双引号里可以有变量（认为是使用变量）</li>
<li>双引号里可以出现转义字符</li>
</ul>
<h3 id="方法">方法</h3>
<h4 id="字符串拼接"><strong>字符串拼接</strong></h4>
<p>字符串（或者字符串变量）紧挨着字符串（或者字符串变量）即可</p>
<h4 id="字符串截取"><strong>字符串截取</strong></h4>
<p>假设有变量 var=http://www.aaa.com/123.htm</p>
<p><strong>1. # 号截取，删除左边字符，保留右边字符。</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">echo</span> <span style="color:#f1fa8c">${</span><span style="color:#8be9fd;font-style:italic">var</span>#*//<span style="color:#f1fa8c">}</span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># 其中 var 是变量名，# 号是运算符，*// 表示从左边开始删除第一个 // 号及左边的所有字符</span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># 即删除 http://</span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># 结果是 ：www.aaa.com/123.htm</span>
</span></span></code></pre></div><p><strong>2. ## 号截取，删除左边字符，保留右边字符。</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">echo</span> <span style="color:#f1fa8c">${</span><span style="color:#8be9fd;font-style:italic">var</span>##*/<span style="color:#f1fa8c">}</span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># 即删除 http://www.aaa.com/</span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># 结果是 123.htm</span>
</span></span></code></pre></div><p>##*/ 表示从左边开始删除最后（最右边）一个 / 号及左边的所有字符</p>
<p><strong>3. %号截取，删除右边字符，保留左边字符</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">echo</span> <span style="color:#f1fa8c">${</span><span style="color:#8be9fd;font-style:italic">var</span>%/*<span style="color:#f1fa8c">}</span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># %/* 表示从右边开始，删除第一个 / 号及右边的字符</span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># 结果是：http://www.aaa.com</span>
</span></span></code></pre></div><p><strong>4. %% 号截取，删除右边字符，保留左边字符</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">echo</span> <span style="color:#f1fa8c">${</span><span style="color:#8be9fd;font-style:italic">var</span>%%/*<span style="color:#f1fa8c">}</span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># 结果是：http:</span>
</span></span></code></pre></div><p><code>%%/*</code> 表示从右边开始，删除最后（最左边）一个 <code>/</code> 号及右边的字符</p>
<p><strong>5. 从左边第几个字符开始，及字符的个数</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">echo</span> <span style="color:#f1fa8c">${</span><span style="color:#8be9fd;font-style:italic">var</span>:<span style="color:#8be9fd;font-style:italic">0</span>:<span style="color:#8be9fd;font-style:italic">5</span><span style="color:#f1fa8c">}</span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># 其中的 0 表示左边第一个字符开始，5 表示字符的总个数。</span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># 结果是：http:</span>
</span></span></code></pre></div><p><strong>6. 从左边第几个字符开始，一直到结束。</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">echo</span> <span style="color:#f1fa8c">${</span><span style="color:#8be9fd;font-style:italic">var</span>:<span style="color:#8be9fd;font-style:italic">7</span><span style="color:#f1fa8c">}</span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># 其中的 7 表示左边第8个字符开始，一直到结束。</span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># 结果是 ：www.aaa.com/123.htm</span>
</span></span></code></pre></div><p><strong>7. 从右边第几个字符开始，及字符的个数</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">echo</span> <span style="color:#f1fa8c">${</span><span style="color:#8be9fd;font-style:italic">var</span>:<span style="color:#8be9fd;font-style:italic">0</span>-7:<span style="color:#8be9fd;font-style:italic">3</span><span style="color:#f1fa8c">}</span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># 其中的 0-7 表示右边算起第七个字符开始，3 表示字符的个数。</span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># 结果是：123</span>
</span></span></code></pre></div><p><strong>8. 从右边第几个字符开始，一直到结束。</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">echo</span> <span style="color:#f1fa8c">${</span><span style="color:#8be9fd;font-style:italic">var</span>:<span style="color:#8be9fd;font-style:italic">0</span>-7<span style="color:#f1fa8c">}</span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># 表示从右边第七个字符开始，一直到结束。</span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># 结果是：123.htm</span>
</span></span></code></pre></div><blockquote>
<p>（左边的第一个字符是用 0 表示，右边的第一个字符用 0-1 表示）</p>
</blockquote>
<h4 id="获取字符串长度"><strong>获取字符串长度</strong></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">string</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;abcd&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">echo</span> <span style="color:#f1fa8c">${#</span><span style="color:#8be9fd;font-style:italic">string</span><span style="color:#f1fa8c">}</span>  <span style="color:#6272a4"># 输出 4</span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># 变量为字符串时，${#string} 等价于 ${#string[0]};</span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">echo</span> <span style="color:#f1fa8c">${#</span><span style="color:#8be9fd;font-style:italic">string</span>[0]<span style="color:#f1fa8c">}</span>  <span style="color:#6272a4"># 输出 4</span>
</span></span></code></pre></div><p>还可以使用 <code>length</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">string</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;hello,everyone my name is xiaoming&#34;</span>
</span></span><span style="display:flex;"><span>expr length <span style="color:#f1fa8c">&#34;</span><span style="color:#8be9fd;font-style:italic">$string</span><span style="color:#f1fa8c">&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># 输出:34</span>
</span></span></code></pre></div><blockquote>
<p>string字符串里边有空格,所以需要添加双引号</p>
</blockquote>
<h4 id="查找子字符串"><strong>查找子字符串</strong></h4>
<p>查找字符 <strong>i</strong> 或 <strong>o</strong> 的位置(哪个字母先出现就计算哪个)：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">string</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;runoob is a great site&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">echo</span> <span style="color:#f1fa8c">`</span>expr index <span style="color:#f1fa8c">&#34;</span><span style="color:#8be9fd;font-style:italic">$string</span><span style="color:#f1fa8c">&#34;</span> io<span style="color:#f1fa8c">`</span><span style="color:#6272a4"># 输出 4</span>
</span></span></code></pre></div><blockquote>
<p>以上脚本中 <strong>`</strong> 是反引号，而不是单引号 <strong>&rsquo;</strong></p>
</blockquote>
<h3 id="数组">数组</h3>
<p>bash支持一维数组（不支持多维数组），并且没有限定数组的大小。</p>
<p>类似于 C 语言，数组元素的下标由 0 开始编号。获取数组中的元素要利用下标，下标可以是整数或算术表达式，其值应大于或等于 0。</p>
<h4 id="定义">定义</h4>
<p>在 Shell 中，用括号来表示数组，数组元素用&quot;空格&quot;符号分割开（数组的值也可以写入变量）。定义数组的一般形式为：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">array_name</span><span style="color:#ff79c6">=(</span>value0 value1 value2 value3<span style="color:#ff79c6">)</span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4">#或者</span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">array_name</span><span style="color:#ff79c6">=(</span>
</span></span><span style="display:flex;"><span>value0
</span></span><span style="display:flex;"><span>value1
</span></span><span style="display:flex;"><span>value2
</span></span><span style="display:flex;"><span>value3
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">)</span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4">#可以单独定义数组的各个分量：</span>
</span></span><span style="display:flex;"><span>array_name<span style="color:#ff79c6">[</span>0<span style="color:#ff79c6">]=</span>value0
</span></span><span style="display:flex;"><span>array_name<span style="color:#ff79c6">[</span>1<span style="color:#ff79c6">]=</span>value1
</span></span><span style="display:flex;"><span>array_name<span style="color:#ff79c6">[</span>n<span style="color:#ff79c6">]=</span>valuen
</span></span><span style="display:flex;"><span><span style="color:#6272a4">#可以不使用连续的下标，而且下标的范围没有限制。</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4">#使用 declare 命令来声明</span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">declare</span> -A array_name
</span></span></code></pre></div><h4 id="读取">读取</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#f1fa8c">${</span><span style="color:#8be9fd;font-style:italic">数组名</span>[下标]<span style="color:#f1fa8c">}</span> <span style="color:#6272a4">#读取数组元素值的一般格式</span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">echo</span> <span style="color:#f1fa8c">${</span><span style="color:#8be9fd;font-style:italic">array_name</span>[@]<span style="color:#f1fa8c">}</span> <span style="color:#6272a4">#使用 @ 符号可以获取数组中的所有元素</span>
</span></span></code></pre></div><p><strong>获取数组的长度</strong></p>
<p>获取数组长度的方法与获取字符串长度的方法相同，例如：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#6272a4"># 取得数组元素的个数</span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">length</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">${#</span><span style="color:#8be9fd;font-style:italic">array_name</span>[@]<span style="color:#f1fa8c">}</span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># 或者</span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">length</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">${#</span><span style="color:#8be9fd;font-style:italic">array_name</span>[*]<span style="color:#f1fa8c">}</span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># 取得数组单个元素的长度</span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">length</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">${#</span><span style="color:#8be9fd;font-style:italic">array_name</span>[n]<span style="color:#f1fa8c">}</span>
</span></span></code></pre></div><p><strong>获取数组中的所有元素</strong></p>
<p><code>${my_array[*]}</code> <code>${my_array[@]}</code></p>
<p><strong>获取数组的所有键</strong></p>
<p><code>${!site[*]}</code>  <code>${!site[@]}</code></p>
<h2 id="传递参数">传递参数</h2>
<p>在执行 Shell 脚本时，向脚本传递参数，脚本内获取参数的格式为 <code>$n</code>，<code>n</code> 代表一个数字，<code>1</code> 为执行脚本的第一个参数，依此类推。</p>
<ul>
<li>
<p><code>#</code> 表示传递给脚本的参数数量</p>
</li>
<li>
<p><code>?</code> 表示上一个命令的退出状态。0表示没有错误，其他任何值表明有错误。</p>
</li>
<li>
<p><code>0</code> 为执行的文件名（包含文件路径）</p>
</li>
<li>
<p><code>-</code> 显示Shell使用的当前选项</p>
</li>
<li>
<p><code>*</code> 以<strong>一个单字符</strong>串显示所有向脚本传递的参数。
如 <code>$*</code> 用 <code>&quot;&quot;</code> 括起来的情况、以 <code>$1 $2 … $n</code> 的形式输出所有参数。</p>
</li>
<li>
<p><code>@</code> 与<code>$*</code>相同，但是使用时加引号，并在引号中返回<strong>每个</strong>参数。</p>
</li>
<li>
<p><code>$</code> 脚本运行的当前进程ID号</p>
</li>
</ul>
<h2 id="语法">语法</h2>
<h3 id="解释器执行">解释器执行</h3>
<p><code>#!</code> 是一个约定的标记，它告诉系统这个脚本需要什么解释器来执行，即使用哪一种 Shell。</p>
<h3 id="运算符">运算符</h3>
<h4 id="基本运算符">基本运算符</h4>
<ul>
<li>算数运算符</li>
<li>关系运算符</li>
<li>布尔运算符</li>
<li>字符串运算符</li>
<li>文件测试运算符</li>
</ul>
<h5 id="expr">expr</h5>
<p><strong>expr</strong> 是一款表达式计算工具，使用它能完成表达式的求值操作。完整的表达式要被 <strong>反引号</strong> **` ** 包含</p>
<p>使用 <strong>expr</strong> 命令时，表达式中的运算符左右必须包含空格，如果不包含空格，将会输出表达式本身:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>expr 5+6    // 直接输出 5+6
</span></span><span style="display:flex;"><span>expr <span style="color:#bd93f9">5</span> + <span style="color:#bd93f9">6</span>       // 输出 <span style="color:#bd93f9">11</span>
</span></span></code></pre></div><p>对于某些运算符，还需要我们使用符号<code>\</code>进行转义，否则就会提示语法错误。表格如下：（假定变量 a 为 10，变量 b 为 20）</p>
<table>
<thead>
<tr>
<th style="text-align:left">运算符</th>
<th style="text-align:left">说明</th>
<th style="text-align:left">举例</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">+</td>
<td style="text-align:left">加法</td>
<td style="text-align:left"><code>expr $a + $b</code> 结果为 30。</td>
</tr>
<tr>
<td style="text-align:left">-</td>
<td style="text-align:left">减法</td>
<td style="text-align:left"><code>expr $a - $b</code> 结果为 -10。</td>
</tr>
<tr>
<td style="text-align:left">*</td>
<td style="text-align:left">乘法</td>
<td style="text-align:left"><code>expr $a \* $b</code> 结果为  200。</td>
</tr>
<tr>
<td style="text-align:left">/</td>
<td style="text-align:left">除法</td>
<td style="text-align:left"><code>expr $b / $a</code> 结果为 2。</td>
</tr>
<tr>
<td style="text-align:left">%</td>
<td style="text-align:left">取余</td>
<td style="text-align:left"><code>expr $b % $a</code> 结果为 0。</td>
</tr>
<tr>
<td style="text-align:left">=</td>
<td style="text-align:left">赋值</td>
<td style="text-align:left"><code>a=$b</code> 把变量 b 的值赋给 a。</td>
</tr>
<tr>
<td style="text-align:left">==</td>
<td style="text-align:left">相等。用于比较两个数字，相同则返回 true。</td>
<td style="text-align:left"><code>[ $a == $b ]</code> 返回 false。</td>
</tr>
<tr>
<td style="text-align:left">!=</td>
<td style="text-align:left">不相等。用于比较两个数字，不相同则返回 true。</td>
<td style="text-align:left"><code>[ $a != $b ]</code> 返回 true。</td>
</tr>
</tbody>
</table>
<blockquote>
<p>条件表达式要放在方括号之间，并且要有空格，例如: <code>[$a==$b]</code> 是错误的，必须写成 <code> [ $a == $b ]</code>。</p>
<p>乘号(*)前边必须加反斜杠()才能实现乘法运算\</p>
<p>在 MAC 中 shell 的 expr 语法是：<strong>$((表达式))</strong>，此处表达式中的 &ldquo;*&rdquo; 不需要转义符号 &ldquo;&quot; 。</p>
</blockquote>
<p><strong><code>[]</code>在算术运算中，可以认为是我们平时运算的<code>()</code></strong></p>
<h4 id="关系运算符">关系运算符</h4>
<p>关系运算符只支持数字，不支持字符串，除非字符串的值是数字。</p>
<p>如下表（假定变量 a 为 10，变量 b 为 20）</p>
<table>
<thead>
<tr>
<th style="text-align:left">运算符</th>
<th style="text-align:left">说明</th>
<th style="text-align:left">举例</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">-eq</td>
<td style="text-align:left">检测两个数是否相等，相等返回 true。</td>
<td style="text-align:left"><code>[ $a -eq $b ] </code>返回 false。</td>
</tr>
<tr>
<td style="text-align:left">-ne</td>
<td style="text-align:left">检测两个数是否不相等，不相等返回 true。</td>
<td style="text-align:left"><code>[ $a -ne $b ] </code>返回 true。</td>
</tr>
<tr>
<td style="text-align:left">-gt</td>
<td style="text-align:left">检测左边的数是否大于右边的，如果是，则返回 true。</td>
<td style="text-align:left"><code>[ $a -gt $b ]</code> 返回 false。</td>
</tr>
<tr>
<td style="text-align:left">-lt</td>
<td style="text-align:left">检测左边的数是否小于右边的，如果是，则返回 true。</td>
<td style="text-align:left"><code>[ $a -lt $b ] </code>返回 true。</td>
</tr>
<tr>
<td style="text-align:left">-ge</td>
<td style="text-align:left">检测左边的数是否大于等于右边的，如果是，则返回 true。</td>
<td style="text-align:left"><code>[ $a -ge $b ] </code>返回 false。</td>
</tr>
<tr>
<td style="text-align:left">-le</td>
<td style="text-align:left">检测左边的数是否小于等于右边的，如果是，则返回 true。</td>
<td style="text-align:left"><code>[ $a -le $b ] </code>返回 true。</td>
</tr>
</tbody>
</table>
<h4 id="布尔运算符">布尔运算符</h4>
<p>在<code>[]</code>中使用，假定变量 a 为 10，变量 b 为 20:</p>
<table>
<thead>
<tr>
<th style="text-align:left">运算符</th>
<th style="text-align:left">说明</th>
<th style="text-align:left">举例</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">!</td>
<td style="text-align:left">非运算</td>
<td style="text-align:left"><code>[ ! false ] </code>返回 true。</td>
</tr>
<tr>
<td style="text-align:left">-o</td>
<td style="text-align:left">或运算</td>
<td style="text-align:left"><code>[ $a -lt 20 -o $b -gt 100 ]</code>  返回 true。</td>
</tr>
<tr>
<td style="text-align:left">-a</td>
<td style="text-align:left">与运算</td>
<td style="text-align:left"><code>[ $a -lt 20 -a $b -gt 100 ]</code>  返回 false。</td>
</tr>
</tbody>
</table>
<h4 id="逻辑运算符">逻辑运算符</h4>
<p>在<code>[[]]</code>中使用，假定变量 a 为 10，变量 b 为 20:</p>
<table>
<thead>
<tr>
<th style="text-align:left">运算符</th>
<th style="text-align:left">说明</th>
<th style="text-align:left">举例</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">&amp;&amp;</td>
<td style="text-align:left">逻辑AND</td>
<td style="text-align:left"><code>[[ $a -lt 100 &amp;&amp; $b -gt 100 ]]</code> 返回 false</td>
</tr>
<tr>
<td style="text-align:left">||</td>
<td style="text-align:left">逻辑OR</td>
<td style="text-align:left">`[[ $a -lt 100</td>
</tr>
</tbody>
</table>
<h4 id="字符串运算符">字符串运算符</h4>
<p>假定变量 a 为 &ldquo;abc&rdquo;，变量 b 为 &ldquo;efg&rdquo;：</p>
<table>
<thead>
<tr>
<th style="text-align:left">运算符</th>
<th style="text-align:left">说明</th>
<th style="text-align:left">举例</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">=</td>
<td style="text-align:left">检测两个字符串是否相等，相等返回 true。</td>
<td style="text-align:left"><code>[ $a = $b ]</code> 返回 false。</td>
</tr>
<tr>
<td style="text-align:left">!=</td>
<td style="text-align:left">检测两个字符串是否不相等，不相等返回 true。</td>
<td style="text-align:left"><code>[ $a != $b ]</code> 返回 true。</td>
</tr>
<tr>
<td style="text-align:left">-z</td>
<td style="text-align:left">检测字符串长度是否为0，为0返回 true。</td>
<td style="text-align:left"><code>[ -z $a ]</code> 返回 false。</td>
</tr>
<tr>
<td style="text-align:left">-n</td>
<td style="text-align:left">检测字符串长度是否不为 0，不为 0 返回 true。</td>
<td style="text-align:left"><code>[ -n &quot;$a&quot; ]</code> 返回 true。</td>
</tr>
<tr>
<td style="text-align:left">$</td>
<td style="text-align:left">检测字符串是否不为空，不为空返回 true。</td>
<td style="text-align:left"><code>[ $a ]</code> 返回 true。</td>
</tr>
</tbody>
</table>
<h4 id="文件测试运算符">文件测试运算符</h4>
<p>文件测试运算符用于检测 Unix 文件的各种属性。</p>
<table>
<thead>
<tr>
<th style="text-align:left">操作符</th>
<th style="text-align:left">说明</th>
<th style="text-align:left">举例</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">-b file</td>
<td style="text-align:left">检测文件是否是块设备文件，如果是，则返回 true。</td>
<td style="text-align:left"><code>[ -b $file ]</code> 返回 false。</td>
</tr>
<tr>
<td style="text-align:left">-c file</td>
<td style="text-align:left">检测文件是否是字符设备文件，如果是，则返回 true。</td>
<td style="text-align:left"><code>[ -c $file ]</code> 返回 false。</td>
</tr>
<tr>
<td style="text-align:left">-d file</td>
<td style="text-align:left">检测文件是否是目录，如果是，则返回 true。</td>
<td style="text-align:left"><code>[ -d $file ]</code> 返回 false。</td>
</tr>
<tr>
<td style="text-align:left">-f file</td>
<td style="text-align:left">检测文件是否是普通文件（既不是目录，也不是设备文件），如果是，则返回 true。</td>
<td style="text-align:left"><code>[ -f $file ]</code> 返回 true。</td>
</tr>
<tr>
<td style="text-align:left">-g file</td>
<td style="text-align:left">检测文件是否设置了 SGID 位，如果是，则返回 true。</td>
<td style="text-align:left"><code>[ -g $file ]</code> 返回 false。</td>
</tr>
<tr>
<td style="text-align:left">-k file</td>
<td style="text-align:left">检测文件是否设置了粘着位(Sticky Bit)，如果是，则返回 true。</td>
<td style="text-align:left"><code>[ -k $file ]</code> 返回 false。</td>
</tr>
<tr>
<td style="text-align:left">-p file</td>
<td style="text-align:left">检测文件是否是有名管道，如果是，则返回 true。</td>
<td style="text-align:left"><code>[ -p $file ]</code> 返回 false。</td>
</tr>
<tr>
<td style="text-align:left">-u file</td>
<td style="text-align:left">检测文件是否设置了 SUID 位，如果是，则返回 true。</td>
<td style="text-align:left"><code>[ -u $file ]</code> 返回 false。</td>
</tr>
<tr>
<td style="text-align:left">-r file</td>
<td style="text-align:left">检测文件是否可读，如果是，则返回 true。</td>
<td style="text-align:left"><code>[ -r $file ]</code> 返回 true。</td>
</tr>
<tr>
<td style="text-align:left">-w file</td>
<td style="text-align:left">检测文件是否可写，如果是，则返回 true。</td>
<td style="text-align:left"><code>[ -w $file ]</code> 返回 true。</td>
</tr>
<tr>
<td style="text-align:left">-x file</td>
<td style="text-align:left">检测文件是否可执行，如果是，则返回 true。</td>
<td style="text-align:left"><code>[ -x $file ]</code> 返回 true。</td>
</tr>
<tr>
<td style="text-align:left">-s file</td>
<td style="text-align:left">检测文件是否为空（文件大小是否大于0），不为空返回 true。</td>
<td style="text-align:left"><code>[ -s $file ]</code> 返回 true。</td>
</tr>
<tr>
<td style="text-align:left">-e file</td>
<td style="text-align:left">检测文件（包括目录）是否存在，如果是，则返回 true。</td>
<td style="text-align:left"><code>[ -e $file ]</code> 返回 true。</td>
</tr>
</tbody>
</table>
<blockquote>
<p>其他：</p>
<ul>
<li><strong>-S</strong>: 判断某文件是否 socket。</li>
<li><strong>-L</strong>: 检测文件是否存在并且是一个符号链接。</li>
</ul>
</blockquote>
<h3 id="let">LET</h3>
<p>let 命令是 BASH 中用于计算的工具，用于执行一个或多个表达式，变量计算中<strong>不需要</strong>加上 <code>$</code> 来表示变量。如果表达式中包含了空格或其他特殊字符，则必须引起来<code>&quot;&quot;</code>。</p>
<p><strong>语法格式</strong></p>
<pre tabindex="0"><code>let arg [arg ...]
</code></pre><p><strong>参数说明：</strong></p>
<p>arg：要执行的表达式</p>
<p><u>arg的内容和c的类似</u></p>
<h3 id="echo">ECHO</h3>
<p>输出一个字符串并换行</p>
<p><strong>显示普通字符串:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">echo</span> <span style="color:#f1fa8c">&#34;\&#34;It is a test\&#34;&#34;</span> <span style="color:#6272a4">#显示It is a test</span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4">#这里的双引号完全可以省略</span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">echo</span> <span style="color:#f1fa8c">\&#34;</span>It is a test<span style="color:#f1fa8c">\&#34;</span>
</span></span></code></pre></div><p><strong>显示变量</strong></p>
<p>read 命令从标准输入中读取一行，并把输入行的每个字段的值指定给 shell 变量</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">read</span> data1 data2 <span style="color:#6272a4">#可以读取多个值</span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">echo</span> <span style="color:#f1fa8c">&#34;</span><span style="color:#8be9fd;font-style:italic">$data1</span><span style="color:#f1fa8c"> :It is a test </span><span style="color:#8be9fd;font-style:italic">$data2</span><span style="color:#f1fa8c"> !&#34;</span>
</span></span></code></pre></div><p><strong>显示换行/不换行</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">echo</span> -e <span style="color:#f1fa8c">&#34;OK! \n&#34;</span> <span style="color:#6272a4"># -e 开启转义</span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">echo</span> <span style="color:#f1fa8c">&#34;It is a test&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4">#OK!</span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4">#</span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4">#It is a test</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">echo</span> -e <span style="color:#f1fa8c">&#34;OK! \c&#34;</span> <span style="color:#6272a4"># -e 开启转义 \c 不换行</span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">echo</span> <span style="color:#f1fa8c">&#34;It is a test&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4">#OK! It is a test</span>
</span></span></code></pre></div><p><strong>原样输出字符串，不进行转义或取变量(用单引号)</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">echo</span> <span style="color:#f1fa8c">&#39;$name\&#34;&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4">#$name\&#34;</span>
</span></span></code></pre></div><p><strong>显示命令执行结果</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">echo</span> <span style="color:#f1fa8c">`</span>date<span style="color:#f1fa8c">`</span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4">#&lt;当前日期&gt;</span>
</span></span></code></pre></div><h3 id="printf">PRINTF</h3>
<p>printf 格式和参数均和C相同</p>
<p>printf 由 POSIX 标准所定义，因此使用 printf 的脚本比使用 echo 移植性好。</p>
<p>printf 使用引用文本或空格分隔的参数，外面可以在 <strong>printf</strong> 中使用格式化字符串，还可以制定字符串的宽度、左右对齐方式等。默认的 printf 不会像 <strong>echo</strong> 自动添加换行符，我们可以手动添加 <strong>\n</strong>。</p>
<p>printf 命令的语法：</p>
<pre tabindex="0"><code>printf  format-string  [arguments...]
</code></pre><p><strong>参数说明：</strong></p>
<ul>
<li><strong>format-string:</strong> 一个格式字符串，它包含普通文本和格式说明符。</li>
<li><strong>arguments:</strong> 用于填充格式说明符的参数列表。。</li>
</ul>
<p>格式说明符由 <strong>%</strong> 字符开始，后跟一个或多个字符，用于指定输出的格式。常用的格式说明符包括：</p>
<ul>
<li><code>%s</code>：字符串</li>
<li><code>%d</code>：十进制整数</li>
<li><code>%f</code>：浮点数</li>
<li><code>%c</code>：字符</li>
<li><code>%x</code>：十六进制数</li>
<li><code>%o</code>：八进制数</li>
<li><code>%b</code>：二进制数</li>
<li><code>%e</code>：科学计数法表示的浮点数</li>
</ul>
<h3 id="test">TEST</h3>
<p><code>test</code>命令用于检查某个条件是否成立，它可以进行数值、字符和文件三个方面的测试。</p>
<table>
<thead>
<tr>
<th>类型</th>
<th style="text-align:left">参数</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>数值测试</td>
<td style="text-align:left">-eq</td>
<td style="text-align:left">等于则为真</td>
</tr>
<tr>
<td></td>
<td style="text-align:left">-ne</td>
<td style="text-align:left">不等于则为真</td>
</tr>
<tr>
<td></td>
<td style="text-align:left">-gt</td>
<td style="text-align:left">大于则为真</td>
</tr>
<tr>
<td></td>
<td style="text-align:left">-ge</td>
<td style="text-align:left">大于等于则为真</td>
</tr>
<tr>
<td></td>
<td style="text-align:left">-lt</td>
<td style="text-align:left">小于则为真</td>
</tr>
<tr>
<td></td>
<td style="text-align:left">-le</td>
<td style="text-align:left">小于等于则为真</td>
</tr>
<tr>
<td>字符串测试</td>
<td style="text-align:left">=</td>
<td style="text-align:left">等于则为真</td>
</tr>
<tr>
<td></td>
<td style="text-align:left">!=</td>
<td style="text-align:left">不相等则为真</td>
</tr>
<tr>
<td></td>
<td style="text-align:left">-z 字符串</td>
<td style="text-align:left">字符串的长度为零则为真</td>
</tr>
<tr>
<td></td>
<td style="text-align:left">-n 字符串</td>
<td style="text-align:left">字符串的长度不为零则为真</td>
</tr>
<tr>
<td>文件测试</td>
<td style="text-align:left">-e 文件名</td>
<td style="text-align:left">如果文件存在则为真</td>
</tr>
<tr>
<td></td>
<td style="text-align:left">-r 文件名</td>
<td style="text-align:left">如果文件存在且可读则为真</td>
</tr>
<tr>
<td></td>
<td style="text-align:left">-w 文件名</td>
<td style="text-align:left">如果文件存在且可写则为真</td>
</tr>
<tr>
<td></td>
<td style="text-align:left">-x 文件名</td>
<td style="text-align:left">如果文件存在且可执行则为真</td>
</tr>
<tr>
<td></td>
<td style="text-align:left">-s 文件名</td>
<td style="text-align:left">如果文件存在且至少有一个字符则为真</td>
</tr>
<tr>
<td></td>
<td style="text-align:left">-d 文件名</td>
<td style="text-align:left">如果文件存在且为目录则为真</td>
</tr>
<tr>
<td></td>
<td style="text-align:left">-f 文件名</td>
<td style="text-align:left">如果文件存在且为普通文件则为真</td>
</tr>
<tr>
<td></td>
<td style="text-align:left">-c 文件名</td>
<td style="text-align:left">如果文件存在且为字符型特殊文件则为真</td>
</tr>
<tr>
<td></td>
<td style="text-align:left">-b 文件名</td>
<td style="text-align:left">如果文件存在且为块特殊文件则为真</td>
</tr>
<tr>
<td></td>
<td style="text-align:left">-O 文件名</td>
<td style="text-align:left">判断对象是否存在，并且属于当前用户</td>
</tr>
<tr>
<td></td>
<td style="text-align:left">-G 文件名</td>
<td style="text-align:left">判断对象是否存在，并且属于当前用户组</td>
</tr>
<tr>
<td></td>
<td style="text-align:left">-nt <br />  [ &ldquo;/data/file1&rdquo; -nt &ldquo;/data/file2&rdquo; ]</td>
<td style="text-align:left">判断file1是否比file2新</td>
</tr>
<tr>
<td></td>
<td style="text-align:left">-ot <br />[ &ldquo;/data/file1&rdquo; -ot &ldquo;/data/file2&rdquo; ]</td>
<td style="text-align:left">判断file1是否比file2旧</td>
</tr>
</tbody>
</table>
<blockquote>
<p>另外，Shell 还提供了与<code>-a</code>、或<code>-o</code>、非<code>!</code>三个逻辑操作符用于将测试条件连接起来，其优先级为： <code>!</code> 最高， <code>-a</code> 次之， <code>-o</code> 最低。</p>
</blockquote>
<p>代码中的 <code>[]</code> 执行基本的算数运算</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">test</span> $<span style="color:#ff79c6">[</span>num1<span style="color:#ff79c6">]</span> -eq $<span style="color:#ff79c6">[</span>num2<span style="color:#ff79c6">]</span>
</span></span></code></pre></div><h3 id="wc">WC</h3>
<p><code>wc</code>命令是一个非常实用的工具，用于统计文件的行数、单词数和字节数。</p>
<p><code>wc</code>命令的基本语法如下：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>wc <span style="color:#ff79c6">[</span>选项<span style="color:#ff79c6">]</span>... <span style="color:#ff79c6">[</span>文件<span style="color:#ff79c6">]</span>...
</span></span></code></pre></div><p>其中，<code>选项</code>用于指定需要统计的内容，<code>文件</code>用于指定要统计的文件名。如果不指定文件名，则默认从标准输入读取数据进行统计。</p>
<ul>
<li>
<p>行数（newline counts）：使用-l或&ndash;lines选项可以打印出文件的行数。</p>
</li>
<li>
<p>单词数（word counts）：使用-w或&ndash;words选项可以打印出文件的单词数。这里的单词是由空白字符分隔的非零长度字符序列。</p>
</li>
<li>
<p>字符数（character counts）：使用-m或&ndash;chars选项可以打印出文件的字符数。</p>
</li>
<li>
<p>字节数（byte counts）：使用-c或&ndash;bytes选项可以打印出文件的字节数。</p>
</li>
<li>
<p>最长行长度（maximum line length）：使用-L或&ndash;max-line-length选项可以打印出文件中最长行的长度。</p>
</li>
</ul>
<p><code>--help</code>：显示帮助信息并退出。</p>
<p><code>--version</code>：显示版本信息并退出。</p>
<blockquote>
<p><strong>不加选项</strong>的话默认统计文件的<strong>行数、单词数和字节数</strong></p>
</blockquote>
<p>可以统计多个文件的数据</p>
<p>会分别输出每一个文件的对应的数据，最后一行会输出总和。</p>
<h3 id="流程控制">流程控制</h3>
<h4 id="if">if</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#ff79c6">if</span> condition <span style="color:#ff79c6">(</span>;<span style="color:#ff79c6">then</span>|
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">then</span><span style="color:#ff79c6">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    command1 
</span></span><span style="display:flex;"><span>    command2
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span>    commandN 
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">else</span>
</span></span><span style="display:flex;"><span>		command1 
</span></span><span style="display:flex;"><span>    command2
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span>    commandM 
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">fi</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4">#写成一行（适用于终端命令提示符）：</span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">if</span> <span style="color:#ff79c6">[</span> <span style="color:#ff79c6">$(</span>ps -ef | grep -c <span style="color:#f1fa8c">&#34;ssh&#34;</span><span style="color:#ff79c6">)</span> -gt <span style="color:#bd93f9">1</span> <span style="color:#ff79c6">]</span>; <span style="color:#ff79c6">then</span> <span style="color:#8be9fd;font-style:italic">echo</span> <span style="color:#f1fa8c">&#34;true&#34;</span>; <span style="color:#ff79c6">fi</span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4">#末尾的 fi 就是 if 倒过来拼写</span>
</span></span></code></pre></div><p>还有<code>if elif else</code></p>
<p>如果使用 <code>((...))</code> 作为判断语句，大于和小于可以直接使用 <code>&gt;</code> 和 <code>&lt;</code>。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">a</span><span style="color:#ff79c6">=</span><span style="color:#bd93f9">10</span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">b</span><span style="color:#ff79c6">=</span><span style="color:#bd93f9">20</span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">if</span> <span style="color:#ff79c6">((</span> <span style="color:#8be9fd;font-style:italic">$a</span> <span style="color:#ff79c6">==</span> <span style="color:#8be9fd;font-style:italic">$b</span> <span style="color:#ff79c6">))</span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">then</span>
</span></span><span style="display:flex;"><span>   <span style="color:#8be9fd;font-style:italic">echo</span> <span style="color:#f1fa8c">&#34;a 等于 b&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">elif</span> <span style="color:#ff79c6">[</span> <span style="color:#8be9fd;font-style:italic">$a</span> -gt <span style="color:#8be9fd;font-style:italic">$b</span> <span style="color:#ff79c6">]</span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">then</span>
</span></span><span style="display:flex;"><span>   <span style="color:#8be9fd;font-style:italic">echo</span> <span style="color:#f1fa8c">&#34;a 大于 b&#34;</span>
</span></span></code></pre></div><h4 id="for">for</h4>
<p>for循环一般格式为：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#ff79c6">for</span> var in item1 item2 ... itemN
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">do</span>
</span></span><span style="display:flex;"><span>    command1
</span></span><span style="display:flex;"><span>    command2
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span>    commandN
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">done</span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4">#写成一行:</span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">for</span> var in item1 item2 ... itemN; <span style="color:#ff79c6">do</span> command1; command2… <span style="color:#ff79c6">done</span>;
</span></span></code></pre></div><p>使用变量<code>var</code>获取列表中的当前取值。in 列表可以包含替换、字符串和文件名。</p>
<h4 id="while">while</h4>
<p>while 循环用于不断执行一系列命令，也用于从输入文件中读取数据。其语法格式为：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#ff79c6">while</span> condition
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">do</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8be9fd;font-style:italic">command</span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">done</span>
</span></span></code></pre></div><p>以下是一个基本的 while 循环，测试条件是：如果 int 小于等于 5，那么条件返回真。int 从 1 开始，每次循环处理时，int 加 1。运行上述脚本，返回数字 1 到 5，然后终止。</p>
<p>while循环可用于读取键盘信息。下面的例子中，输入信息被设置为变量FILM，按<Ctrl-D>结束循环。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">echo</span> <span style="color:#f1fa8c">&#39;按下 &lt;CTRL-D&gt; 退出&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">echo</span> -n <span style="color:#f1fa8c">&#39;输入你最喜欢的网站名: &#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">while</span> <span style="color:#8be9fd;font-style:italic">read</span> FILM
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">do</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8be9fd;font-style:italic">echo</span> <span style="color:#f1fa8c">&#34;是的！</span><span style="color:#8be9fd;font-style:italic">$FILM</span><span style="color:#f1fa8c"> 是一个好网站&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">done</span>
</span></span></code></pre></div><h4 id="无限循环">无限循环</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#ff79c6">while</span> :
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">do</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8be9fd;font-style:italic">command</span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">done</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">while</span> <span style="color:#8be9fd;font-style:italic">true</span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">do</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8be9fd;font-style:italic">command</span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">done</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">for</span> <span style="color:#ff79c6">((</span> ; ; <span style="color:#ff79c6">))</span>
</span></span></code></pre></div><h4 id="until-循环">until 循环</h4>
<p>一般 while 循环优于 until 循环，但在某些时候—也只是极少数情况下，until 循环更加有用。</p>
<p>until 语法格式:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#ff79c6">until</span> condition
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">do</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8be9fd;font-style:italic">command</span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">done</span>
</span></span></code></pre></div><h4 id="case">CASE</h4>
<p><strong>case &hellip; esac</strong> 为多选择语句，与其他语言中的 switch &hellip; case 语句类似，是一种多分支选择结构。</p>
<p>每个 case 分支用右圆括号<code>)</code>开始，用两个分号 <code>;;</code> 表示 break，即执行结束，跳出整个 case &hellip; esac 语句，esac（就是 case 反过来）作为结束标记。</p>
<p><strong>case &hellip; esac</strong> 语法格式如下：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#ff79c6">case</span> 值 in
</span></span><span style="display:flex;"><span>模式1<span style="color:#ff79c6">)</span>
</span></span><span style="display:flex;"><span>    command1
</span></span><span style="display:flex;"><span>    command2
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span>    commandN
</span></span><span style="display:flex;"><span>    ;;
</span></span><span style="display:flex;"><span>模式2<span style="color:#ff79c6">)</span>
</span></span><span style="display:flex;"><span>    command1
</span></span><span style="display:flex;"><span>    command2
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span>    commandN
</span></span><span style="display:flex;"><span>    ;;
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">esac</span>
</span></span></code></pre></div><h4 id="跳出循环">跳出循环</h4>
<p><strong>break</strong></p>
<p>break在case中不能算<code>;;</code></p>
<p><strong>continue</strong></p>
<h3 id="注释">注释</h3>
<p>以 <strong><code>#</code> 开头</strong>的行就是注释，会被解释器忽略。</p>
<p><strong>多行注释</strong></p>
<p>1、每一行加个<code>#</code>符号太费力了，可以把这一段要注释的代码用一对花括号<code>{ }</code>括起来，<strong>定义成一个函数</strong>，没有地方调用这个函数，这块代码就不会执行，达到了和注释一样的效果。</p>
<p>2、还可以**使用<a href="https://baike.baidu.com/item/here%E6%96%87%E6%A1%A3/16003193?fr=ge_ala">Here文档</a>**以下格式：</p>
<pre tabindex="0"><code class="language-here" data-lang="here">:&lt;&lt;EOF
注释内容...
注释内容...
注释内容...
EOF

: &lt;&lt;&#39;COMMENT&#39;
这是注释的部分。
可以有多行内容。
COMMENT

:&lt;&lt;&#39;
注释内容...
注释内容...
注释内容...
&#39;

:&lt;&lt;!
注释内容...
注释内容...
注释内容...
!
</code></pre><p>以上例子中，<code>:</code> 是一个空命令，用于执行后面的 Here 文档，<code>&lt;&lt;'EOF'</code> 表示开启 Here 文档，<strong>COMMENT 是 Here 文档的标识符</strong>，在这两个标识符之间的内容都会被视为注释，不会被执行。</p>
<p>3、<strong>直接使用 : 号</strong></p>
<p>我们也可以使用了冒号 <code>:</code> 命令，并用单引号 <code>'</code> 将多行内容括起来。由于冒号是一个空命令，这些内容不会被执行。</p>
<p>格式为：<code>: + 空格 + 单引号</code>。</p>
<h3 id="函数">函数</h3>
<p>格式如下：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#ff79c6">[</span> <span style="color:#ff79c6">function</span> <span style="color:#ff79c6">]</span> funname <span style="color:#ff79c6">[()]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    action;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">[</span><span style="color:#ff79c6">return</span> int;<span style="color:#ff79c6">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">}</span>
</span></span></code></pre></div><p>说明：</p>
<ul>
<li>可以带 <code>function fun()</code> 定义，也可以直接 <code>fun()</code> 定义,不带任何参数。</li>
<li>参数返回，可以显示加：<code>return</code> 返回，如果不加，将以最后一条命令运行结果，作为返回值。 <code>return</code> 后只能跟数值 <code>n(0-255)</code></li>
<li>函数返回值在调用该函数后通过 <code>$?</code> 来获得。</li>
</ul>
<p>调用函数时可以向其传递参数。在函数体内部，通过 <code>$n</code> 的形式来获取参数的值。当n&gt;=10时，需要使用<code>${n}</code>来获取参数。</p>
<h2 id="输入输出重定向">输入输出重定向</h2>
<p>重定向命令列表如下：</p>
<table>
<thead>
<tr>
<th style="text-align:left">命令</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">command &gt; file</td>
<td style="text-align:left">将输出重定向到 file（覆盖）</td>
</tr>
<tr>
<td style="text-align:left">command &lt; file</td>
<td style="text-align:left">将输入重定向到 file</td>
</tr>
<tr>
<td style="text-align:left">command &raquo; file</td>
<td style="text-align:left">将输出以追加的方式重定向到 file（添加）</td>
</tr>
<tr>
<td style="text-align:left">n &gt; file</td>
<td style="text-align:left">将文件描述符为 n 的文件重定向到 file</td>
</tr>
<tr>
<td style="text-align:left">n &raquo; file</td>
<td style="text-align:left">将文件描述符为 n 的文件以追加的方式重定向到 file（添加）</td>
</tr>
<tr>
<td style="text-align:left">n &gt;&amp; m</td>
<td style="text-align:left">将输出文件 m 和 n 合并</td>
</tr>
<tr>
<td style="text-align:left">n &lt;&amp; m</td>
<td style="text-align:left">将输入文件 m 和 n 合并</td>
</tr>
<tr>
<td style="text-align:left">&laquo; tag</td>
<td style="text-align:left">将开始标记 tag 和结束标记 tag 之间的内容作为输入</td>
</tr>
</tbody>
</table>
<blockquote>
<p>需要注意的是文件描述符 0 通常是标准输入（STDIN），1 是标准输出（STDOUT），2 是标准错误输出（STDERR）。</p>
<p><code>2&gt;</code>类似这样的必须中间没有空格，这样才算stderr</p>
<p>这里的**&amp;<strong>没有固定的意思。放在</strong>&gt;<strong>后面的</strong>&amp;<strong>，表示重定向的目标不是一个</strong>文件**，而是一个<strong>文件描述符</strong></p>
</blockquote>
<p>默认情况下，<code>command &gt; file</code> 将 stdout 重定向到 file，<code>command &lt; file</code> 将stdin 重定向到 file。</p>
<p><strong>&amp;&gt;file</strong>是一种特殊的用法，也可以写成**&gt;&amp;file**，二者的意思完全相同，<code>&gt;file 2&gt;&amp;1</code></p>
<p>可以多个命令一起，但是他是从左到右有顺序的。</p>
<h2 id="here文档">Here文档</h2>
<p>Here Document 是 Shell 中的一种特殊的重定向方式，用来将输入重定向到一个交互式 Shell 脚本或程序。</p>
<p>它的基本的形式如下：</p>
<pre tabindex="0"><code>command &lt;&lt; delimiter
    document
delimiter
</code></pre><p>它的作用是将两个 <code>delimiter</code> 之间的内容(<code>document</code>) 作为输入传递给 <code>command</code>。</p>
<blockquote>
<ul>
<li>结尾的<code>delimiter </code>一定要顶格写，前面不能有任何字符，后面也不能有任何字符，包括空格和 tab 缩进。</li>
<li>开始的<code>delimiter</code>前后的空格会被忽略掉。</li>
</ul>
</blockquote>
<h2 id="devnull-文件">/dev/null 文件</h2>
<p>如果希望执行某个命令，但又不希望在屏幕上显示输出结果，那么可以将输出重定向到 /dev/null：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ <span style="color:#8be9fd;font-style:italic">command</span> &gt; /dev/null
</span></span></code></pre></div><p><code>/dev/null</code> 是一个特殊的文件，写入到它的内容都会被丢弃；如果尝试从该文件读取内容，那么什么也读不到。但是 <code>/dev/null</code> 文件非常有用，将命令的输出重定向到它，会起到&quot;禁止输出&quot;的效果。</p>
<p>如果希望屏蔽 <code>stdout</code> 和 <code>stderr</code>，可以这样写：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ <span style="color:#8be9fd;font-style:italic">command</span> &gt; /dev/null 2&gt;&amp;<span style="color:#bd93f9">1</span>
</span></span></code></pre></div>
    </div>
    <div class="post-footer">
        <div class="info">
            
            
        </div>
        


    </div>
    
        
    
</div>

                <div class="grow"></div>
                <div class="built-with">
    Built with <a href="https://gohugo.io/">Hugo</a> <b>·</b> Using the <a href="https://github.com/LucasVadilho/heyo-hugo-theme">heyo</a> theme
</div>
            </div>
        </div>
        
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha512-3M00D/rn8n+2ZVXBO9Hib0GKNpkm8MSUU/e2VNthDyBYxKWG+BftNYYcuEjXlyrSO637tidzMBXfE7sQm0INUg==" crossorigin="anonymous" referrerpolicy="no-referrer" />

<script type="text/javascript">
            
            
            window.MathJax = {
                tex: {
                    inlineMath: [['$', '$'], ['\\(', '\\)']],
                    displayMath: [['$$','$$'], ['\\[', '\\]']]
                },
                svg: {
                    scale: 1.25,
                }
            };
        </script><script defer type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.1.0/es5/tex-mml-svg.min.js" integrity="sha512-/mL9Gs6E5Bz6NtPOr9eY&#43;T8IIdJbo2JL3TudApzFFelwBXEc3TeFLU6kPq122TJROv7jkktuBRkz5h8vGzrsyA==" crossorigin="anonymous"></script>
    </body>
</html>